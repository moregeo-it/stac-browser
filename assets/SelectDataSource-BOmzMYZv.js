import{a as x,_ as C}from"./BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-uP3pKCjA.js";import{_ as I}from"./BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-Csj99Gv7.js";import{_ as S}from"./BForm.vue_vue_type_script_setup_true_lang-u44ElAm9-D92kQWfy.js";import{bf as w,d as B,bg as f,G as a,x as n,P as i,L as s,z as d,v as l,y as r,_ as D,M as u,F as U,N as _,av as V,E as m,bm as A,cf as N,cg as M}from"./index-DLQIbJqc.js";import{d as P}from"./BFormGroup.vue_vue_type_script_setup_true_lang-BmZN8qcE-DWeOhU7e.js";import{_ as T}from"./BFormInput.vue_vue_type_script_setup_true_lang-D3z3jxbI-CJtUD2WG.js";import F from"./Description-5KvaRZak.js";import{j as L}from"./utils-B7F_ho2D.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--D04gVupl.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./useStateClass-BGbSLWFN-DVCkhww4.js";import"./debounce-BHqBzJ1a-BZDj8VL8.js";const j=B({name:"SelectDataSource",components:{Description:F,"i18n-t":N},data(){return{url:"",stacIndex:[]}},computed:{...A(["toBrowserPath"]),valid(){return this.url.length===0?null:!this.error},error(){if(!this.url)return null;try{let t=new URL(this.url);if(t.protocol){if(!t.host)return this.$t("index.urlMissingHost")}else return this.$t("index.urlMissingProtocol");return null}catch{return this.$t("index.urlInvalid")}}},async created(){this.$store.commit("resetCatalog",!0);try{let t=await M.get("https://stacindex.org/api/catalogs");Array.isArray(t.data)&&(this.stacIndex=t.data)}catch(t){console.error("Failed to load STAC Index:",t)}},methods:{show(t){return t.access==="private"?!1:this.url?L.search(this.url,[t.title,t.url]):!0},setUrl(t){this.url=t},open(t){this.url=t,this.go()},go(){this.url&&this.$router.push(this.toBrowserPath(this.url))}}}),E={class:"select-data-source"},G={key:0},z={class:"d-flex justify-content-between align-items-baseline mb-1"};function H(t,e,R,q,J,K){const h=T,p=P,b=D,$=S,g=f("i18n-t"),c=I,y=f("Description"),v=C,k=x;return n(),a("main",E,[i($,{onSubmit:U(t.go,["prevent"])},{default:r(()=>[i(p,{id:"select",label:t.$t("index.specifyCatalog"),"label-for":"url","invalid-feedback":t.error,state:t.valid,class:"mb-3"},{default:r(()=>[i(h,{id:"url",type:"url","model-value":t.url,"onUpdate:modelValue":t.setUrl,placeholder:"https://..."},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["label","invalid-feedback","state"]),e[0]||(e[0]=s()),i(b,{type:"submit",variant:"primary"},{default:r(()=>[s(u(t.$t("index.load")),1)]),_:1})]),_:1},8,["onSubmit"]),e[5]||(e[5]=s()),t.stacIndex.length>0?(n(),a("hr",G)):d("",!0),e[6]||(e[6]=s()),t.stacIndex.length>0?(n(),l(p,{key:1,class:"stac-index"},{label:r(()=>[i(g,{keypath:"index.selectStacIndex",tag:"span"},{stacIndex:r(()=>[...e[1]||(e[1]=[m("a",{href:"https://stacindex.org",target:"_blank"},"STAC Index",-1)])]),_:1})]),default:r(()=>[e[4]||(e[4]=s()),i(k,null,{default:r(()=>[(n(!0),a(_,null,V(t.stacIndex,o=>(n(),a(_,{key:o.id},[t.show(o)?(n(),l(v,{key:0,button:"",active:t.url===o.url,onClick:O=>t.open(o.url)},{default:r(()=>[m("div",z,[m("strong",null,u(o.title),1),e[2]||(e[2]=s()),o.isApi?(n(),l(c,{key:0,variant:"danger"},{default:r(()=>[s(u(t.$t("index.api")),1)]),_:1})):(n(),l(c,{key:1,variant:"success"},{default:r(()=>[s(u(t.$t("index.catalog")),1)]),_:1}))]),e[3]||(e[3]=s()),i(y,{description:o.summary,compact:""},null,8,["description"])]),_:2},1032,["active","onClick"])):d("",!0)],64))),128))]),_:1})]),_:1})):d("",!0)])}const lt=w(j,[["render",H]]);export{lt as default};
//# sourceMappingURL=SelectDataSource-BOmzMYZv.js.map
