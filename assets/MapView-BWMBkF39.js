const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GeoJSON-ChDkG0En.js","assets/index-C4WwNGim.js","assets/utils-B8zgF4c8.js","assets/_commonjsHelpers-CE1G-McA.js","assets/I18N-DlIXJTel.js","assets/index-Bt3LNNEE.css","assets/BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3-BQl9x5r7.js","assets/useStateClass-BGbSLWFN-fwe7ggqp.js","assets/ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--B_qcBrKp.js","assets/GeoJSON-Bh2emOAl.css","assets/bootstrap-vue-next-B4ztNbda.js","assets/BOffcanvas.vue_vue_type_script_setup_true_lang-BbXmU_5z-Cj5s3um9.js","assets/BAccordion.vue_vue_type_script_setup_true_lang-Ccx3zW5a-5MfFVSoK.js","assets/BTabs.vue_vue_type_script_setup_true_lang-CU4B0ph2-CbkqTrqF.js","assets/BCollapse.vue_vue_type_script_setup_true_lang-BUisG8-R-CyIwG_D3.js","assets/BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-CukeeBb6.js","assets/BTable.vue_vue_type_script_setup_true_lang-D6ymr5i1-ztloLJjn.js","assets/debounce-BHqBzJ1a-jGdHJSGt.js","assets/BCard.vue_vue_type_script_setup_true_lang-9RhyvL8I-CtbyLLZj.js","assets/BCardText.vue_vue_type_script_setup_true_lang-SRGbviaO-CfZGkdJy.js","assets/BDropdownText.vue_vue_type_script_setup_true_lang-Cm6QYE9x-B0w5Nb4k.js","assets/BForm.vue_vue_type_script_setup_true_lang-u44ElAm9-CLv0b1tE.js","assets/BFormSelect.vue_vue_type_script_setup_true_lang-djrVhugk-B2vfVsie.js","assets/BFormGroup.vue_vue_type_script_setup_true_lang-RIWLdYTY-BuPBLlsN.js","assets/BFormCheckboxGroup.vue_vue_type_script_setup_true_lang-Dx_mpGFE-Dvbo9Ex8.js","assets/BFormInput.vue_vue_type_script_setup_true_lang-DRDhfD8d-D6iWX4E1.js","assets/BInputGroupText.vue_vue_type_script_setup_true_lang-BBN5F0A4-DkdLXpPf.js","assets/BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-BXam2FB4.js","assets/Features-A0-RfeAY.js","assets/helper-CaHhXSPV.js","assets/helper-DO3U350M.js","assets/datatypes-XrFOh23H.js","assets/Catalogs-BzXSOUwr.js","assets/CardMixin-CnggxDQ0.js","assets/StacFieldsMixin-rDUFSuXy.js","assets/Loading-0stQtfme.js","assets/Loading-BLYcl2tz.css","assets/Catalogs-CbWoa7rf.css","assets/Items-Cg9Alz-L.js"])))=>i.map(i=>d[i]);
import{bp as $,bu as te,cM as oe,cN as Kt,cO as Jt,cP as qt,cQ as Xt,bk as Yt,bl as W,n as V,B as Qt,y as le,L as Ne,G as Q,p as N,K as $e,q as He,_ as er,H as tr,br as rr,bt as ce}from"./index-C4WwNGim.js";import{I as sr,s as ir,n as Ke,a as nr,T as Je,C as ar,g as ee,b as ue,V as Ee,F as qe,c as or,d as lr,e as Xe,B as gt,f as be,E as cr,h as yt,S as ur,i as hr,j as fr,k as dr,l as Ye,m as Qe,o as mr,p as gr,q as yr,t as pr,r as _r,u as wr,v as vr,w as br,x as Tr,y as Lr,z as xr,P as Sr,A as Ar,L as Fr,D as Mr,G as et,H as pt,J as Er,M as Ir,K as Cr,N as Pr,O as Or}from"./GeoJSON-ChDkG0En.js";import Rr from"./WMTSCapabilities-CCj_LiS6.js";import Ur from"./Image-DvqyAMWh.js";import tt from"./Tile-D7qUPT2v.js";import Dr from"./VectorTile-BTro7yxu.js";import rt from"./WebGLTile-CBwyjYAH.js";import jr from"./ImageStatic-Cz2eV_sM.js";import Br from"./TileJSON-DQ2euany.js";import Gr from"./TileWMS-qzpVO5ZN.js";import{V as _t}from"./VectorTile-Byk6v44S.js";import kr,{optionsFromCapabilities as zr}from"./WMTS-DM0snyi7.js";import st from"./XYZ-DmwGA9Nb.js";import wt from"./DataTile-9DcpmOFp.js";import{c as vt,e as bt}from"./Tile-AZEx8Bzc.js";import{M as Vr}from"./MVT-Chsid1Yo.js";import he from"./index-EOgWswiP.js";import{a as Te,t as Zr,n as Wr,p as it,u as Nr,c as $r}from"./utils-B8zgF4c8.js";import{f as Hr,a as Kr,b as Jr,P as qr,p as Xr}from"./geotiff-BwjMEY6l.js";import{T as Yr}from"./TileGrid-BYTM6C2i.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3-BQl9x5r7.js";import"./useStateClass-BGbSLWFN-fwe7ggqp.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--B_qcBrKp.js";import"./ImageLayer-BN6kOHNW.js";import"./BaseImage-BvT1_inc.js";import"./TileLayer-B6Rglwfc.js";import"./DataTile-D0OU2vxu.js";import"./Tile-iCtKaAKM.js";import"./Tile-CE-lPm5a.js";import"./common-CLmj5YpX.js";import"./TileRange-2Tc-Ry00.js";import"./LRUCache-CsKpaSJt.js";import"./tilecoord-DulSmB7I.js";import"./BaseTile-DdhWivdj.js";import"./TileProperty-BF4LcWSy.js";import"./compileUtil-CnJ1KvY-.js";import"./mat4-CeypvY8Z.js";import"./Image-CTtUxLzw.js";import"./resolution-CU8ppKQ3.js";import"./common-9rOs42pz.js";import"./static-BQNKmRLz.js";import"./net-CJQO6T6Z.js";import"./tileurlfunction-PgAJ5Liu.js";import"./uri-Bnf4M7OL.js";import"./TileImage-Bn_QnZoJ.js";import"./UrlTile-C_TGV60v.js";import"./TileEventType-CTN_nmJ7.js";import"./wms-zbNaN1M-.js";import"./__vite-browser-external-B1O5LaIO.js";const fe={SELECT:"select"};class de extends gt{constructor(e,t,r,i){super(e),this.selected=t,this.deselected=r,this.mapBrowserEvent=i}}const me={};class Ie extends sr{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:ir,this.addCondition_=e.addCondition?e.addCondition:Ke,this.removeCondition_=e.removeCondition?e.removeCondition:Ke,this.toggleCondition_=e.toggleCondition?e.toggleCondition:nr,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Je,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:Qr(),this.features_=e.features||new ar;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const r=e.layers;t=function(i){return r.includes(i)}}else t=Je;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[ee(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[ee(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(ue.ADD,this.boundAddFeature_),this.features_.addEventListener(ue.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ue.ADD,this.boundAddFeature_),this.features_.removeEventListener(ue.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const r=this.findLayerOfFeature_(t);r&&this.addFeatureLayerAssociation_(t,r)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}findLayerOfFeature_(e){return this.getMap().getAllLayers().find(function(r){if(r instanceof Ee&&r.getSource()&&r.getSource().hasFeature(e))return r})}getStyle(){return this.style_}applySelectedStyle_(e){const t=ee(e);t in me||(me[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let i=t.length-1;i>=0;--i){const n=t[i];if(n!==this&&n instanceof Ie&&n.getStyle()&&n.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(n.getStyle());return}}const r=ee(e);e.setStyle(me[r]),delete me[r]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[ee(e)]}selectFeatureInternal_(e,t,r){if(!(e instanceof qe)||!this.filter_(e,t))return;const i=this.getFeatures();return i.getArray().includes(e)||(this.addFeatureLayerAssociation_(e,t),i.push(e),r?.push(e)),e}selectFeature(e){const t=this.findLayerOfFeature_(e);if(!this.layerFilter_(t))return!1;const r=this.selectFeatureInternal_(e,t);return r&&this.dispatchEvent(new de(fe.SELECT,[r],[],void 0)),!!r}removeFeatureInternal_(e,t){const r=this.getFeatures();if(!(!(e instanceof qe)||!r.getArray().includes(e)))return r.remove(e),this.removeFeatureLayerAssociation_(e),t?.push(e),e}deselectFeature(e){const t=this.removeFeatureInternal_(e);return t&&this.dispatchEvent(new de(fe.SELECT,[],[t],void 0)),!!t}toggleFeature(e){this.deselectFeature(e)||this.selectFeature(e)}clearSelection(){or(this.featureLayerAssociation_);const e=this.getFeatures(),t=e.getArray().slice();e.clear(),t.length!==0&&this.dispatchEvent(new de(fe.SELECT,[],t,void 0))}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),n=!t&&!r&&!i,a=e.map,o=this.getFeatures(),l=[],u=[];if(n){let h=!1;a.forEachFeatureAtPixel(e.pixel,(c,f)=>{if(h=!0,!!this.selectFeatureInternal_(c,f,u))return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let c=o.getLength()-1;c>=0;--c){const f=o.item(c);(u.length>0&&!u.includes(f)||!h)&&this.removeFeatureInternal_(f,l)}}else a.forEachFeatureAtPixel(e.pixel,(h,c)=>{let f;if((r||i)&&(f=this.removeFeatureInternal_(h,l)),(t||i)&&!f&&(f=this.selectFeatureInternal_(h,c,u)),!!f)return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});return(u.length>0||l.length>0)&&this.dispatchEvent(new de(fe.SELECT,u,l,e)),!0}}function Qr(){const s=lr();return Xe(s.Polygon,s.LineString),Xe(s.GeometryCollection,s.LineString),function(e){return e.getGeometry()?s[e.getGeometry().getType()]:null}}var O=Uint8Array,J=Uint16Array,es=Int32Array,Tt=new O([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lt=new O([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ts=new O([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xt=function(s,e){for(var t=new J(31),r=0;r<31;++r)t[r]=e+=1<<s[r-1];for(var i=new es(t[30]),r=1;r<30;++r)for(var n=t[r];n<t[r+1];++n)i[n]=n-t[r]<<5|r;return{b:t,r:i}},St=xt(Tt,2),At=St.b,rs=St.r;At[28]=258,rs[258]=28;var ss=xt(Lt,0),is=ss.b,Fe=new J(32768);for(var x=0;x<32768;++x){var z=(x&43690)>>1|(x&21845)<<1;z=(z&52428)>>2|(z&13107)<<2,z=(z&61680)>>4|(z&3855)<<4,Fe[x]=((z&65280)>>8|(z&255)<<8)>>1}var se=(function(s,e,t){for(var r=s.length,i=0,n=new J(e);i<r;++i)s[i]&&++n[s[i]-1];var a=new J(e);for(i=1;i<e;++i)a[i]=a[i-1]+n[i-1]<<1;var o;if(t){o=new J(1<<e);var l=15-e;for(i=0;i<r;++i)if(s[i])for(var u=i<<4|s[i],h=e-s[i],c=a[s[i]-1]++<<h,f=c|(1<<h)-1;c<=f;++c)o[Fe[c]>>l]=u}else for(o=new J(r),i=0;i<r;++i)s[i]&&(o[i]=Fe[a[s[i]-1]++]>>15-s[i]);return o}),ne=new O(288);for(var x=0;x<144;++x)ne[x]=8;for(var x=144;x<256;++x)ne[x]=9;for(var x=256;x<280;++x)ne[x]=7;for(var x=280;x<288;++x)ne[x]=8;var Ft=new O(32);for(var x=0;x<32;++x)Ft[x]=5;var ns=se(ne,9,1),as=se(Ft,5,1),Le=function(s){for(var e=s[0],t=1;t<s.length;++t)s[t]>e&&(e=s[t]);return e},j=function(s,e,t){var r=e/8|0;return(s[r]|s[r+1]<<8)>>(e&7)&t},xe=function(s,e){var t=e/8|0;return(s[t]|s[t+1]<<8|s[t+2]<<16)>>(e&7)},os=function(s){return(s+7)/8|0},ls=function(s,e,t){return(t==null||t>s.length)&&(t=s.length),new O(s.subarray(e,t))},cs=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],P=function(s,e,t){var r=new Error(e||cs[s]);if(r.code=s,Error.captureStackTrace&&Error.captureStackTrace(r,P),!t)throw r;return r},Ce=function(s,e,t,r){var i=s.length,n=0;if(!i||e.f&&!e.l)return t||new O(0);var a=!t,o=a||e.i!=2,l=e.i;a&&(t=new O(i*3));var u=function(Ve){var Ze=t.length;if(Ve>Ze){var We=new O(Math.max(Ze*2,Ve));We.set(t),t=We}},h=e.f||0,c=e.p||0,f=e.b||0,m=e.l,_=e.d,y=e.m,d=e.n,g=i*8;do{if(!m){h=j(s,c,1);var w=j(s,c+1,3);if(c+=3,w)if(w==1)m=ns,_=as,y=9,d=5;else if(w==2){var B=j(s,c,31)+257,S=j(s,c+10,15)+4,M=B+j(s,c+5,31)+1;c+=14;for(var b=new O(M),A=new O(19),F=0;F<S;++F)A[ts[F]]=j(s,c+F*3,7);c+=S*3;for(var U=Le(A),q=(1<<U)-1,X=se(A,U,1),F=0;F<M;){var D=X[j(s,c,q)];c+=D&15;var p=D>>4;if(p<16)b[F++]=p;else{var G=0,ae=0;for(p==16?(ae=3+j(s,c,3),c+=2,G=b[F-1]):p==17?(ae=3+j(s,c,7),c+=3):p==18&&(ae=11+j(s,c,127),c+=7);ae--;)b[F++]=G}}var Be=b.subarray(0,B),k=b.subarray(B);y=Le(Be),d=Le(k),m=se(Be,y,1),_=se(k,d,1)}else P(1);else{var p=os(c)+4,C=s[p-4]|s[p-3]<<8,I=p+C;if(I>i){l&&P(0);break}o&&u(f+C),t.set(s.subarray(p,I),f),e.b=f+=C,e.p=c=I*8,e.f=h;continue}if(c>g){l&&P(0);break}}o&&u(f+131072);for(var Nt=(1<<y)-1,$t=(1<<d)-1,_e=c;;_e=c){var G=m[xe(s,c)&Nt],Z=G>>4;if(c+=G&15,c>g){l&&P(0);break}if(G||P(2),Z<256)t[f++]=Z;else if(Z==256){_e=c,m=null;break}else{var Ge=Z-254;if(Z>264){var F=Z-257,Y=Tt[F];Ge=j(s,c,(1<<Y)-1)+At[F],c+=Y}var we=_[xe(s,c)&$t],ve=we>>4;we||P(3),c+=we&15;var k=is[ve];if(ve>3){var Y=Lt[ve];k+=xe(s,c)&(1<<Y)-1,c+=Y}if(c>g){l&&P(0);break}o&&u(f+131072);var ke=f+Ge;if(f<k){var ze=n-k,Ht=Math.min(k,ke);for(ze+f<0&&P(3);f<Ht;++f)t[f]=r[ze+f]}for(;f<ke;++f)t[f]=t[f-k]}}e.l=m,e.p=_e,e.b=f,e.f=h,m&&(h=1,e.m=y,e.d=_,e.n=d)}while(!h);return f!=t.length&&a?ls(t,0,f):t.subarray(0,f)},us=new O(0),hs=function(s){(s[0]!=31||s[1]!=139||s[2]!=8)&&P(6,"invalid gzip data");var e=s[3],t=10;e&4&&(t+=(s[10]|s[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!s[t++]);return t+(e&2)},fs=function(s){var e=s.length;return(s[e-4]|s[e-3]<<8|s[e-2]<<16|s[e-1]<<24)>>>0},ds=function(s,e){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&P(6,"invalid zlib data"),(s[1]>>5&1)==1&&P(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function ms(s,e){return Ce(s,{i:2},e,e)}function gs(s,e){var t=hs(s);return t+8>s.length&&P(6,"invalid gzip data"),Ce(s.subarray(t,-8),{i:2},new O(fs(s)),e)}function ys(s,e){return Ce(s.subarray(ds(s),-4),{i:2},e,e)}function ps(s,e){return s[0]==31&&s[1]==139&&s[2]==8?gs(s,e):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?ms(s,e):ys(s,e)}var _s=typeof TextDecoder<"u"&&new TextDecoder,ws=0;try{_s.decode(us,{stream:!0}),ws=1}catch{}var vs=Object.defineProperty,bs=Math.pow,v=(s,e)=>vs(s,"name",{value:e,configurable:!0}),E=(s,e,t)=>new Promise((r,i)=>{var n=l=>{try{o(t.next(l))}catch(u){i(u)}},a=l=>{try{o(t.throw(l))}catch(u){i(u)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(n,a);o((t=t.apply(s,e)).next())});v((s,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:v((n,a)=>{let o=document.createElement("img"),l=new AbortController,u=l.signal;return o.cancel=()=>{l.abort()},t||(s.getHeader().then(h=>{h.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):h.tileType===2?r="image/png":h.tileType===3?r="image/jpeg":h.tileType===4?r="image/webp":h.tileType===5&&(r="image/avif")}),t=!0),s.getZxy(n.z,n.x,n.y,u).then(h=>{if(h){let c=new Blob([h.data],{type:r}),f=window.URL.createObjectURL(c);o.src=f}else o.style.display="none";o.cancel=void 0,a(void 0,o)}).catch(h=>{if(h.name!=="AbortError")throw h}),o},"createTile"),_removeTile:v(function(n){let a=this._tiles[n];a&&(a.el.cancel&&a.el.cancel(),a.el.width=0,a.el.height=0,a.el.deleted=!0,L.DomUtil.remove(a.el),delete this._tiles[n],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(n)}))},"_removeTile")});return new i(e)},"leafletRasterLayer");var Ts=v(s=>(e,t)=>{if(t instanceof AbortController)return s(e,t);let r=new AbortController;return s(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:v(()=>r.abort(),"cancel")}},"v3compat"),Ls=class{constructor(e){this.tilev4=v((t,r)=>E(this,null,function*(){if(t.type==="json"){let m=t.url.substr(10),_=this.tiles.get(m);if(_||(_=new ie(m),this.tiles.set(m,_)),this.metadata){let d=yield _.getTileJson(t.url);return r.signal.throwIfAborted(),{data:d}}let y=yield _.getHeader();return r.signal.throwIfAborted(),(y.minLon>=y.maxLon||y.minLat>=y.maxLat)&&console.error(`Bounds of PMTiles archive ${y.minLon},${y.minLat},${y.maxLon},${y.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:y.minZoom,maxzoom:y.maxZoom,bounds:[y.minLon,y.minLat,y.maxLon,y.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),n=t.url.match(i);if(!n)throw new Error("Invalid PMTiles protocol URL");let a=n[1],o=this.tiles.get(a);o||(o=new ie(a),this.tiles.set(a,o));let l=n[2],u=n[3],h=n[4],c=yield o.getHeader(),f=yield o?.getZxy(+l,+u,+h,r.signal);if(r.signal.throwIfAborted(),f)return{data:new Uint8Array(f.data),cacheControl:f.cacheControl,expires:f.expires};if(c.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=Ts(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};v(Ls,"Protocol");function Mt(s,e){return(e>>>0)*4294967296+(s>>>0)}v(Mt,"toNum");function Et(s,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return Mt(s,i);throw new Error("Expected varint not more than 10 bytes")}v(Et,"readVarintRemainder");function H(s){let e=s.buf,t=e[s.pos++],r=t&127;return t<128||(t=e[s.pos++],r|=(t&127)<<7,t<128)||(t=e[s.pos++],r|=(t&127)<<14,t<128)||(t=e[s.pos++],r|=(t&127)<<21,t<128)?r:(t=e[s.pos],r|=(t&15)<<28,Et(r,s))}v(H,"readVarint");function Pe(s,e,t,r,i){return i===0?r!==0?[s-1-t,s-1-e]:[t,e]:[e,t]}v(Pe,"rotate");function It(s,e,t){if(s>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>=1<<s||t>=1<<s)throw new Error("tile x/y outside zoom level bounds");let r=((1<<s)*(1<<s)-1)/3,i=s-1,[n,a]=[e,t];for(let o=1<<i;o>0;o>>=1){let l=n&o,u=a&o;r+=(3*l^u)*(1<<i),[n,a]=Pe(o,n,a,l,u),i--}return r}v(It,"zxyToTileId");function Ct(s){let e=3*s+1;return e<4294967296?31-Math.clz32(e):63-Math.clz32(e/4294967296)}v(Ct,"tileIdToZ");function xs(s){let e=Ct(s)>>1;if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");let t=((1<<e)*(1<<e)-1)/3,r=s-t,i=0,n=0,a=1<<e;for(let o=1;o<a;o<<=1){let l=o&r/2,u=o&(r^l);[i,n]=Pe(o,i,n,l,u),r=r/2,i+=l,n+=u}return[e,i,n]}v(xs,"tileIdToZxy");var Ss=(s=>(s[s.Unknown=0]="Unknown",s[s.None=1]="None",s[s.Gzip=2]="Gzip",s[s.Brotli=3]="Brotli",s[s.Zstd=4]="Zstd",s))(Ss||{});function ye(s,e){return E(this,null,function*(){if(e===1||e===0)return s;if(e===2){if(typeof globalThis.DecompressionStream>"u")return ps(new Uint8Array(s));let t=new Response(s).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}v(ye,"defaultDecompress");var K=(s=>(s[s.Unknown=0]="Unknown",s[s.Mvt=1]="Mvt",s[s.Png=2]="Png",s[s.Jpeg=3]="Jpeg",s[s.Webp=4]="Webp",s[s.Avif=5]="Avif",s))(K||{});function Pt(s){return s===1?".mvt":s===2?".png":s===3?".jpg":s===4?".webp":s===5?".avif":""}v(Pt,"tileTypeExt");var As=127;function Ot(s,e){let t=0,r=s.length-1;for(;t<=r;){let i=r+t>>1,n=e-s[i].tileId;if(n>0)t=i+1;else if(n<0)r=i-1;else return s[i]}return r>=0&&(s[r].runLength===0||e-s[r].tileId<s[r].runLength)?s[r]:null}v(Ot,"findTile");var Fs=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return E(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};v(Fs,"FileSource");var Rt=class{constructor(e,t=new Headers){var r,i;this.url=e,this.customHeaders=t,this.mustReload=!1;let n="";"navigator"in globalThis&&(n=(i=(r=globalThis.navigator)==null?void 0:r.userAgent)!=null?i:"");let a=n.indexOf("Windows")>-1,o=/Chrome|Chromium|Edg|OPR|Brave/.test(n);this.chromeWindowsNoCache=!1,a&&o&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return E(this,null,function*(){let n,a;r?a=r:(n=new AbortController,a=n.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let l;this.mustReload?l="reload":this.chromeWindowsNoCache&&(l="no-store");let u=yield fetch(this.url,{signal:a,cache:l,headers:o});if(e===0&&u.status===416){let f=u.headers.get("Content-Range");if(!f||!f.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let m=+f.substr(8);u=yield fetch(this.url,{signal:a,cache:"reload",headers:{range:`bytes=0-${m-1}`}})}let h=u.headers.get("Etag");if(h!=null&&h.startsWith("W/")&&(h=null),u.status===416||i&&h&&h!==i)throw this.mustReload=!0,new Me(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(u.status>=300)throw new Error(`Bad response code: ${u.status}`);let c=u.headers.get("Content-Length");if(u.status===200&&(!c||+c>t))throw n&&n.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield u.arrayBuffer(),etag:h||void 0,cacheControl:u.headers.get("Cache-Control")||void 0,expires:u.headers.get("Expires")||void 0}})}};v(Rt,"FetchSource");var Ms=Rt;function R(s,e){let t=s.getUint32(e+4,!0),r=s.getUint32(e+0,!0);return t*bs(2,32)+r}v(R,"getUint64");function Ut(s,e){let t=new DataView(s),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:R(t,8),rootDirectoryLength:R(t,16),jsonMetadataOffset:R(t,24),jsonMetadataLength:R(t,32),leafDirectoryOffset:R(t,40),leafDirectoryLength:R(t,48),tileDataOffset:R(t,56),tileDataLength:R(t,64),numAddressedTiles:R(t,72),numTileEntries:R(t,80),numTileContents:R(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}v(Ut,"bytesToHeader");function Oe(s){let e={buf:new Uint8Array(s),pos:0},t=H(e),r=[],i=0;for(let n=0;n<t;n++){let a=H(e);r.push({tileId:i+a,offset:0,length:0,runLength:1}),i+=a}for(let n=0;n<t;n++)r[n].runLength=H(e);for(let n=0;n<t;n++)r[n].length=H(e);for(let n=0;n<t;n++){let a=H(e);a===0&&n>0?r[n].offset=r[n-1].offset+r[n-1].length:r[n].offset=a-1}return r}v(Oe,"deserializeIndex");var Dt=class extends Error{};v(Dt,"EtagMismatch");var Me=Dt;function Re(s,e){return E(this,null,function*(){let t=yield s.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,As),i=Ut(r,t.etag),n=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),a=`${s.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,o=Oe(yield e(n,i.internalCompression));return[i,[a,o.length,o]]})}v(Re,"getHeaderAndRoot");function Ue(s,e,t,r,i){return E(this,null,function*(){let n=yield s.getBytes(t,r,void 0,i.etag),a=yield e(n.data,i.internalCompression),o=Oe(a);if(o.length===0)throw new Error("Empty directory is invalid");return o})}v(Ue,"getDirectory");var Es=class{constructor(e=100,t=!0,r=ye){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return E(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield Re(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return E(this,null,function*(){let n=`${e.getKey()}|${i.etag||""}|${t}|${r}`,a=this.cache.get(n);if(a)return a.lastUsed=this.counter++,a.data;let o=yield Ue(e,this.decompress,t,r,i);return this.cache.set(n,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return E(this,null,function*(){this.cache.delete(e.getKey())})}};v(Es,"ResolvedValueCache");var jt=class{constructor(e=100,t=!0,r=ye){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return E(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((n,a)=>{Re(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),n(o[0]),this.prune()}).catch(o=>{a(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return E(this,null,function*(){let n=`${e.getKey()}|${i.etag||""}|${t}|${r}`,a=this.cache.get(n);if(a)return a.lastUsed=this.counter++,yield a.data;let o=new Promise((l,u)=>{Ue(e,this.decompress,t,r,i).then(h=>{l(h),this.prune()}).catch(h=>{u(h)})});return this.cache.set(n,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return E(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,n)=>{this.getHeader(e).then(a=>{i(),this.invalidations.delete(t)}).catch(a=>{n(a)})});this.invalidations.set(t,r)})}};v(jt,"SharedPromiseCache");var Is=jt,Bt=class{constructor(e,t,r){typeof e=="string"?this.source=new Ms(e):this.source=e,r?this.decompress=r:this.decompress=ye,t?this.cache=t:this.cache=new Is}getHeader(){return E(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return E(this,null,function*(){let n=It(e,t,r),a=yield this.cache.getHeader(this.source);if(e<a.minZoom||e>a.maxZoom)return;let o=a.rootDirectoryOffset,l=a.rootDirectoryLength;for(let u=0;u<=3;u++){let h=yield this.cache.getDirectory(this.source,o,l,a),c=Ot(h,n);if(c){if(c.runLength>0){let f=yield this.source.getBytes(a.tileDataOffset+c.offset,c.length,i,a.etag);return{data:yield this.decompress(f.data,a.tileCompression),cacheControl:f.cacheControl,expires:f.expires}}o=a.leafDirectoryOffset+c.offset,l=c.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return E(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(n){if(n instanceof Me)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw n}})}getMetadataAttempt(){return E(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return E(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof Me)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return E(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=Pt(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};v(Bt,"PMTiles");var ie=Bt,Gt=Object.defineProperty,nt=Object.getOwnPropertySymbols,Cs=Object.prototype.hasOwnProperty,Ps=Object.prototype.propertyIsEnumerable,at=(s,e,t)=>e in s?Gt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,ge=(s,e)=>{for(var t in e||(e={}))Cs.call(e,t)&&at(s,t,e[t]);if(nt)for(var t of nt(e))Ps.call(e,t)&&at(s,t,e[t]);return s},pe=(s,e)=>Gt(s,"name",{value:e,configurable:!0}),Os=(s,e,t)=>new Promise((r,i)=>{var n=l=>{try{o(t.next(l))}catch(u){i(u)}},a=l=>{try{o(t.throw(l))}catch(u){i(u)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(n,a);o((t=t.apply(s,e)).next())}),kt=class extends wt{constructor(e){super(ge(ge({},e),{state:"loading"})),this.loadImage=pe(r=>new Promise((i,n)=>{const a=new Image;a.addEventListener("load",()=>i(a)),a.addEventListener("error",()=>n(new Error("load failed"))),a.src=r}),"loadImage");const t=new ie(e.url);t.getHeader().then(r=>{const i=e.projection===void 0?"EPSG:3857":e.projection;this.tileGrid=e.tileGrid||vt({extent:bt(i),maxResolution:e.maxResolution,minZoom:r.minZoom,maxZoom:r.maxZoom,tileSize:e.tileSize}),this.setLoader((n,a,o)=>Os(this,null,function*(){const l=yield t.getZxy(n,a,o);if(!l)return new Uint8Array;const u=URL.createObjectURL(new Blob([l.data])),h=yield this.loadImage(u);return URL.revokeObjectURL(u),h})),this.setState("ready")})}};pe(kt,"PMTilesRasterSource");var ot=kt,zt=class extends _t{constructor(e){super(ge(ge({},e),{state:"loading",url:"pmtiles://{z}/{x}/{y}",format:e.format||new Vr})),this.tileLoadFunction=pe((t,r)=>{const i=t,n=new RegExp(/pmtiles:\/\/(\d+)\/(\d+)\/(\d+)/),a=r.match(n);if(!(a&&a.length>=4))throw Error("Could not parse tile URL");const o=+a[1],l=+a[2],u=+a[3];i.setLoader((h,c,f)=>{this.pmtiles_.getZxy(o,l,u).then(m=>{if(m){const _=i.getFormat();i.setFeatures(_.readFeatures(m.data,{extent:h,featureProjection:f})),i.setState(be.LOADED)}else i.setFeatures([]),i.setState(be.EMPTY)}).catch(m=>{i.setFeatures([]),i.setState(be.ERROR)})})},"tileLoadFunction"),this.pmtiles_=new ie(e.url),this.pmtiles_.getHeader().then(t=>{const r=e.projection||"EPSG:3857",i=e.extent||bt(r);this.tileGrid=e.tileGrid||vt({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:e.tileSize||512}),this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}};pe(zt,"PMTilesVectorSource");var Rs=zt;class Us extends gt{constructor(e){super(cr.ERROR),this.error=e}}const Ds="https://stac-extensions.github.io/label/v1.*/schema.json",Vt=new yt({color:"rgba(0,0,0,0)"});function De(s,e,t="rgba(255,255,255,0.4)",r=5){let i=Vt;t&&(i=new yt({color:t}));const n=new ur({color:s,width:e});return new hr({image:new fr({fill:i,stroke:n,radius:r}),fill:i,stroke:n})}const js=De("#3399CC",3),lt=De("#ff9933",2,null);async function Bs(s,e=null,t=null,r=0){const i=new Set;return s.map.forEachFeatureAtPixel(s.pixel,(n,a)=>{t&&t.push(n),i.add(a.get("stac"))},{hitTolerance:r,layerFilter(n){if(n instanceof Ee&&n.get("bounds")===!0){const a=n.get("stac");if(a instanceof $&&(!e||!a.equals(e)))return!0}return!1}}),[...i]}function Gs(s,e){const t={url:s.getAbsoluteUrl()};let r=s,i=s.getBands();i.length===1&&(r=i[0],i=[]);const{minimum:n,maximum:a}=r.getMinMaxValues();if(typeof n=="number"&&(t.min=n),typeof a=="number"&&(t.max=a),typeof t.min!="number"&&typeof t.max!="number"&&i.length>1)for(const l of i){const{minimum:u,maximum:h}=l.getMinMaxValues();typeof u=="number"&&(typeof t.min>"u"||u<t.min)&&(t.min=u),typeof h=="number"&&(typeof t.max>"u"||h>t.max)&&(t.max=h)}const o=r.getNoDataValues();if(o.length>0)t.nodata=o[0];else if(i.length>1){let l;for(const u of i){const h=u.getNoDataValues();if(h.length>0){if(typeof l>"u")l=h[0];else if(l!==h[0]){l=void 0;break}}}typeof l<"u"&&(t.nodata=l)}if(e.length>0)t.bands=e;else{const l=s.findVisualBands();l&&(t.bands=[l.red.getIndex()+1,l.green.getIndex()+1,l.blue.getIndex()+1])}return t}async function Zt(s){try{const{fromProjectionCode:e,fromEPSGCode:t}=await te(async()=>{const{fromProjectionCode:r,fromEPSGCode:i}=await import("./GeoJSON-ChDkG0En.js").then(n=>n.ca);return{fromProjectionCode:r,fromEPSGCode:i}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));return typeof e=="function"?await e(s):await t(s)}catch{return null}}async function ct(s,e=void 0){let t;if(dr()){const r=s.getMetadata("proj:code");r&&(t=await Zt(r))}return t||e}function ut(s,e){const t=s.clone();return e.hasOnlyBounds()||t.setFill(Vt),t}function ks(s){let e=s.href;if(e.includes("{s}"))if(Array.isArray(s["href:servers"])&&s["href:servers"].length>0){const t=Math.random()*s["href:servers"].length|0;e=e.replace("{s}",s["href:servers"][t])}else return null;return e}function ht(s){return typeof s=="string"||typeof s=="number"||typeof s=="boolean"}function zs(s){return((s.fileDirectory.NewSubfileType||0)&4)===4}function Vs(s,e){if(!s)return!1;if(s===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const t=e.fileDirectory.PhotometricInterpretation,r=Xr;return t===r.CMYK||t===r.YCbCr||t===r.CIELab||t===r.ICCLab}const ft="STATISTICS_MAXIMUM",dt="STATISTICS_MINIMUM",Se=256;let Ae;function Zs(){return Ae||(Ae=new qr),Ae}function Ws(s){try{return s.getBoundingBox(!0)}catch{return[0,0,s.getWidth(),s.getHeight()]}}function Ns(s){try{return s.getOrigin().slice(0,2)}catch{return[0,s.getHeight()]}}function $s(s,e){try{return s.getResolution(e)}catch{return[e.getWidth()/s.getWidth(),e.getHeight()/s.getHeight()]}}async function mt(s,e,t,r){const i=s[e];if(i&&i!==32767){const n="EPSG:"+i;let a=Lr(n);if(!a&&r&&(a=await Zt(n)),!a){const o=xr(s[t]);o&&(a=new Sr({code:n,units:o}))}return a||null}}async function Hs(s,e){const t=s.geoKeys;if(!t)return null;const r=await mt(t,"ProjectedCSTypeGeoKey","ProjLinearUnitsGeoKey",e);return r||await mt(t,"GeographicTypeGeoKey","GeogAngularUnitsGeoKey",e)}function Ks(s){return s.getImageCount().then(function(e){const t=new Array(e);for(let r=0;r<e;++r)t[r]=s.getImage(r);return Promise.all(t)})}function Js(s,e){let t;return s.blob?t=Hr(s.blob):s.overviews?t=Kr(s.url,s.overviews,e):t=Jr(s.url,e),t.then(Ks)}function re(s,e,t,r,i){if(Array.isArray(s)){const n=s.length;if(!Array.isArray(e)||n!=e.length){const a=new Error(r);throw i(a),a}for(let a=0;a<n;++a)re(s[a],e[a],t,r,i);return}if(e=e,Math.abs(s-e)>t*s)throw new Error(r)}function qs(s){return s instanceof Int8Array?-128:s instanceof Int16Array?-32768:s instanceof Int32Array?-2147483648:s instanceof Float32Array?12e-39:0}function Xs(s){return s instanceof Int8Array?127:s instanceof Uint8Array||s instanceof Uint8ClampedArray?255:s instanceof Int16Array?32767:s instanceof Uint16Array?65535:s instanceof Int32Array?2147483647:s instanceof Uint32Array?4294967295:s instanceof Float32Array?34e37:255}class Wt extends wt{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.loadMissingProjection_=e.loadMissingProjection||!1,this.setKey(this.sourceInfo_.map(n=>n.url).join(","));const r=this,i=new Array(t);for(let n=0;n<t;++n)i[n]=Js(this.sourceInfo_[n],this.sourceOptions_);Promise.all(i).then(function(n){return r.configure_(n)}).catch(function(n){Ye(n),r.error_=n,r.setState("error")})}getError(){return this.error_}async determineProjection(e){const t=e[0];for(let r=t.length-1;r>=0;--r){const i=t[r],n=await Hs(i,this.loadMissingProjection_);if(n){this.projection=n;break}}}determineTransformMatrix(e){const t=e[0];for(let r=t.length-1;r>=0;--r){const n=t[r].fileDirectory.ModelTransformation;if(n){const[a,o,l,u,h,c,f,m]=n,_=Qe(Qe([1/Math.sqrt(a*a+h*h),0,0,-1/Math.sqrt(o*o+c*c),u,m],[a,h,o,c,0,0]),[1,0,0,1,-u,-m]);this.transformMatrix=_,this.addAlpha_=!0;break}}}async configure_(e){let t,r,i,n,a;const o=new Array(e.length),l=new Array(e.length),u=new Array(e.length);let h=0;const c=e.length;for(let d=0;d<c;++d){const g=[],w=[];e[d].forEach(b=>{zs(b)?w.push(b):g.push(b)});const p=g.length;if(w.length>0&&w.length!==p)throw new Error(`Expected one mask per image found ${w.length} masks and ${p} images`);let C,I;const B=new Array(p),S=new Array(p),M=new Array(p);l[d]=new Array(p),u[d]=new Array(p);for(let b=0;b<p;++b){const A=g[b],F=A.getGDALNoData();u[d][b]=A.getGDALMetadata(0),l[d][b]=F;const U=this.sourceInfo_[d].bands;o[d]=U?U.length:A.getSamplesPerPixel();const q=p-(b+1);C||(C=Ws(A)),I||(I=Ns(A));const X=$s(A,g[0]);M[q]=X[0];const D=[A.getTileWidth(),A.getTileHeight()];D[0]!==D[1]&&D[1]<Se&&(D[0]=Se,D[1]=Se),B[q]=D;const G=X[0]/Math.abs(X[1]);S[q]=[D[0],D[1]/G]}if(t?vr(t,C,t):t=C,!r)r=I;else{const b=`Origin mismatch for source ${d}, got [${I}] but expected [${r}]`;re(r,I,0,b,this.viewRejector)}if(!a)a=M,this.resolutionFactors_[d]=1;else{a.length-h>M.length&&(h=a.length-M.length);const b=a[a.length-1]/M[M.length-1];this.resolutionFactors_[d]=b;const A=M.map(U=>U*=b),F=`Resolution mismatch for source ${d}, got [${A}] but expected [${a}]`;re(a.slice(h,a.length),A,.02,F,this.viewRejector)}i?re(i.slice(h,i.length),S,.01,`Tile size mismatch for source ${d}`,this.viewRejector):i=S,n?re(n.slice(h,n.length),B,0,`Tile size mismatch for source ${d}`,this.viewRejector):n=B,this.sourceImagery_[d]=g.reverse(),this.sourceMasks_[d]=w.reverse()}for(let d=0,g=this.sourceImagery_.length;d<g;++d){const w=this.sourceImagery_[d];for(;w.length<a.length;)w.unshift(void 0)}this.getProjection()||await this.determineProjection(e),this.determineTransformMatrix(e),this.samplesPerPixel_=o,this.nodataValues_=l,this.metadata_=u;e:for(let d=0;d<c;++d){if(this.sourceInfo_[d].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[d].length){this.addAlpha_=!0;break}const g=l[d],w=this.sourceInfo_[d].bands;if(w){for(let p=0;p<w.length;++p)if(g[w[p]-1]!==null){this.addAlpha_=!0;break e}continue}for(let p=0;p<g.length;++p)if(g[p]!==null){this.addAlpha_=!0;break e}}let f=this.addAlpha_?1:0;for(let d=0;d<c;++d)f+=o[d];this.bandCount=f;const m=new Yr({extent:t,minZoom:h,origin:r,resolutions:a,tileSizes:i});this.tileGrid=m,this.setTileSizes(n),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const _=1;a.length===2?a=[a[0],a[1],a[1]/2]:a.length===1&&(a=[a[0]*2,a[0],a[0]/2]);let y=t;if(this.transformMatrix){const d=mr(gr(),this.transformMatrix.slice()),g=Tr(w=>Ar(d,w));y=yr(t,g)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:a,center:_r(wr(y),this.projection),extent:pr(y,this.projection),zoom:_})}loadTile_(e,t,r,i){const n=this.getTileSize(e),a=this.sourceImagery_.length,o=new Array(a*2),l=this.nodataValues_,u=this.sourceInfo_,h=Zs();for(let c=0;c<a;++c){const f=u[c],m=this.resolutionFactors_[c],_=[Math.round(t*(n[0]*m)),Math.round(r*(n[1]*m)),Math.round((t+1)*(n[0]*m)),Math.round((r+1)*(n[1]*m))],y=this.sourceImagery_[c][e];let d;f.bands&&(d=f.bands.map(function(I){return I-1}));let g;"nodata"in f&&f.nodata!==null?g=f.nodata:d?g=d.map(function(I){return l[c][I]}):g=l[c];const w={window:_,width:n[0],height:n[1],samples:d,fillValue:g,pool:h,interleave:!1,signal:i.signal};Vs(this.convertToRGB_,y)?o[c]=y.readRGB(w):o[c]=y.readRasters(w);const p=a+c,C=this.sourceMasks_[c][e];if(!C){o[p]=Promise.resolve(null);continue}o[p]=C.readRasters({window:_,width:n[0],height:n[1],samples:[0],pool:h,interleave:!1})}return Promise.all(o).then(this.composeTile_.bind(this,n)).catch(function(c){throw Ye(c),c})}composeTile_(e,t){const r=this.metadata_,i=this.sourceInfo_,n=this.sourceImagery_.length,a=this.bandCount,o=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,h=this.addAlpha_,c=e[0]*e[1],f=c*a;let m;u?m=new Uint8Array(f):m=new Float32Array(f);let _=0;for(let y=0;y<c;++y){let d=h;for(let g=0;g<n;++g){const w=i[g];let p=w.min,C=w.max,I,B;if(u){const S=r[g][0];p===void 0&&(S&&dt in S?p=parseFloat(S[dt]):p=qs(t[g][0])),C===void 0&&(S&&ft in S?C=parseFloat(S[ft]):C=Xs(t[g][0])),I=255/(C-p),B=-p*I}for(let S=0;S<o[g];++S){const M=t[g][S][y];let b;if(u?b=br(I*M+B,0,255):b=M,!h)m[_]=b;else{let A=w.nodata;if(A===void 0){let U;w.bands?U=w.bands[S]-1:U=S,A=l[g][U]}const F=isNaN(A);(!F&&M!==A||F&&!isNaN(M))&&(d=!1,m[_]=b)}_++}if(!d){const S=n+g,M=t[S];M&&!M[0][y]&&(d=!0)}}h&&(d||(m[_]=255),_++)}return m}}Wt.prototype.getView;class T{constructor(e){this.name=e}toString(){return this.name}}T.GeoTIFF=new T("GeoTIFF");T.ImageStatic=new T("ImageStatic");T.PMTilesRaster=new T("PMTilesRaster");T.PMTilesVector=new T("PMTilesVector");T.TileJSON=new T("TileJSON");T.TileWMS=new T("TileWMS");T.WMTS=new T("WMTS");T.XYZ=new T("XYZ");class je extends Fr{constructor(e){const t={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>t[r]=e[r]),super(t),this.getSourceOptions_=e.getSourceOptions,this.children_=null,this.childrenOptions_=e.childrenOptions||{},this.assets_=null,this.bands_=[],this.crossOrigin_=e.crossOrigin||null,this.displayFootprint_=e.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!e.displayGeoTiffByDefault,this.displayPreview_=!!e.displayPreview,this.displayOverview_=e.displayOverview!==!1,this.displayWebMapLink_=e.displayWebMapLink||!1,this.buildTileUrlTemplate_=e.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=e.useTileLayerAsFallback||!1,this.boundsStyle_=e.boundsStyle||js,this.collectionStyle_=e.collectionStyle||lt,this.boundsLayer_=null,this.disableMigration_=e.disableMigration||!1,this.map_=null,this.eventQueue_=[],e.httpRequestFn&&(this.fetch_=e.httpRequestFn),e.data){try{this.configure_(e.data,e.url,e.children,e.assets,e.bands)}catch(r){this.handleError_(r)}return}if(!e.url)throw new Error("Either url or data must be provided");this.fetch_(e.url).then(r=>this.configure_(r,e.url,e.children,e.assets,e.bands)).catch(r=>this.handleError_(r))}async fetch_(e,t="json"){const r=await fetch(e);if(!r.ok)throw new Error(`Unexpected response from ${e}: ${r.status}`);return t==="json"?await r.json():t==="text"?await r.text():null}getBoundsLayer(){return this.boundsLayer_}isEmpty(){var e;if(this.getLayers().getLength()>1)return!1;const r=(e=this.getData())===null||e===void 0?void 0:e.getBoundingBox();return!r||Mr(r)?!0:!this.boundsLayer_||!this.displayFootprint_}handleError_(e){this.dispatch_(new Us(e))}configure_(e,t=null,r=null,i=null,n=[]){let a;e instanceof oe||e instanceof $?a=e:(a=he(e,!this.disableMigration_),t&&t.includes("://")&&a.setAbsoluteUrl(t)),this.set("stac",a),this.bands_=n,this.boundsLayer_=this.addFootprint_();const o=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(ut(this.boundsStyle_,this))};this.getLayers().on("add",o),this.getLayers().on("remove",o);const l=h=>this.handleError_(h),u=[];r&&u.push(this.setChildren(r,null,!1).catch(l)),i&&u.push(this.setAssets(i,!1).catch(l)),Promise.all(u).then(()=>this.updateLayers().catch(l)),this.dispatch_("sourceready")}dispatch_(e){this.eventQueue_.push(e),this.flush_()}flush_(){if(this.map_){for(const e of this.eventQueue_)this.dispatchEvent(e);this.eventQueue_=[]}}setMap_(e){this.map_!==e&&(this.map_=e,this.flush_())}async addChildren_(e,t={}){const r=e.map(i=>{const n={data:i,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_,useTileLayerAsFallback:this.useTileLayerAsFallback_,buildTileUrlTemplate:this.buildTileUrlTemplate_},a=new je(Object.assign(n,t));return a.on("sourceready",()=>{a.map_&&this.setMap_(a.map_)}),this.addLayer_(a,null),a});return await Promise.all(r)}async addPreviewImage_(e){const t=await ct(e,"EPSG:4326"),r=e.getContext().getBoundingBoxes();if(r.length!==1)return;const i=r[0];let n={url:e.getAbsoluteUrl(),projection:t,imageExtent:et(i,"EPSG:4326",t),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(n=await this.getSourceOptions_(T.ImageStatic,n,e));const a=new Ur({source:new jr(n)});return this.addLayer_(a,e),a}async addLayerForLink(e){const t=ks(e);if(!t)return;const r={attributions:e.getMetadata("attribution")||this.getData().getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:t},i=async(a,o)=>(this.getSourceOptions_&&(o=await this.getSourceOptions_(a,o,e)),o),n=[];switch(e.rel){case"pmtiles":const o=await new ie(r.url).getHeader();let l;switch(o.tileType){case K.Mvt:l=new Rs(await i(T.PMTilesVector,r));break;case K.Avif:case K.Jpeg:case K.Png:case K.Webp:l=new ot(await i(T.PMTilesRaster,r));break;default:return}n.push(l);break;case"tilejson":n.push(new Br(await i(T.TileJSON,r)));break;case"wms":if(!Array.isArray(e["wms:layers"]))break;for(const c in e["wms:layers"]){const f=e["wms:layers"][c]||"";let m="";Array.isArray(e["wms:styles"])&&typeof e["wms:styles"][c]=="string"&&(m=e["wms:styles"][c]);const _=Object.assign({LAYERS:f,STYLES:m},e["wms:dimensions"]);typeof e["wms:transparent"]=="boolean"&&(_.TRANSPARENT=String(e["wms:transparent"])),typeof e.type=="string"&&e.type.startsWith("image/")&&(_.FORMAT=e.type);const y=await i(T.TileWMS,Object.assign({},r,{params:_}));n.push(new Gr(y))}break;case"wmts":const u=await this.getWmtsCapabilities_(t,e["wmts:encoding"]);if(!u)return;let h=[];Array.isArray(e["wmts:layer"])?h=e["wmts:layer"]:typeof e["wmts:layer"]=="string"&&(h=[e["wmts:layer"]]);for(const c of h){let f=Object.assign({},r,{layer:c,requestEncoding:e["wmts:encoding"]==="rest"?"REST":"KVP"});typeof e.type=="string"&&e.type.startsWith("image/")&&(f.format=e.type),f=await i(T.WMTS,f);const m=zr(u,f);if(m!==null){if(typeof e.uriTemplate=="string"){let _=e.uriTemplate;const y=Te(e.variables)?e.variables:{};for(const d in y){const g=y[d];let w;if(ht(g.const)?w=g.const:ht(g.default)?w=g.default:Array.isArray(g.enum)&&g.enum.length>0&&(w=g.enum[0]),typeof w<"u")_=_.replaceAll(`{${d}}`,String(w));else continue}delete m.urls,m.url=_}n.push(new kr(m))}}break;case"xyz":n.push(new st(await i(T.XYZ,r)));break;default:return}return n.map(a=>{let o;return a instanceof _t?o=new Dr({source:a,declutter:!0}):a instanceof ot?o=new rt({source:a}):o=new tt({source:a}),this.addLayer_(o,e),o})}async addGeoTiff_(e){if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(e);let r={sources:[Gs(e,this.bands_)],convertToRGB:"auto",loadMissingProjection:!0};const i=await ct(e);i&&(r.projection=i),this.getSourceOptions_&&(r=await this.getSourceOptions_(T.GeoTIFF,r,e));const n=new Wt(r),a=new Promise((o,l)=>{n.on("error",l),n.on("change",()=>{n.getState()==="error"?l(n.getError()):o()})});try{await a;const o=new rt({source:n});return this.addLayer_(o,e),o}catch(o){if(this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(e);this.handleError_(o)}}async addTileLayerForImagery_(e){let t=this.buildTileUrlTemplate_(e);t instanceof Promise&&(t=await t);let r={crossOrigin:this.crossOrigin_,url:t};this.getSourceOptions_&&(r=await this.getSourceOptions_(T.XYZ,r,e));const i=new tt({source:new st(r)});return this.addLayer_(i,e),i}addLayer_(e,t=null,r=0){t&&e.set("stac",t),e.setZIndex(r),this.getLayers().push(e)}addFootprint_(){let e=null;const t=this.getData();if(t.isItemCollection()||t.isCollectionCollection()?e=Zr(t.getBoundingBox()):e=t.toGeoJSON(),e){const r=this.createGeoJsonLayer_(e,ut(this.boundsStyle_,this),this.displayFootprint_);return r.set("bounds",!0),r.on("change",()=>this.setMap_(r.getMapInternal())),this.addLayer_(r,t,1),r}return null}async addGeoJson_(e){try{const t=await this.fetch_(e.getAbsoluteUrl()),r=this.createGeoJsonLayer_(t);return this.addLayer_(r,e),r}catch(t){this.handleError_(t)}}createGeoJsonLayer_(e,t=null,r=!0){const i=new pt,n=new Er({format:i,loader:(a,o,l)=>{e=Wr(e);const u=i.readFeatures(e,{featureProjection:l});n.addFeatures(u)}});return t||(t=lt),new Ee({source:n,style:t,visible:r})}async addLabelExtension_(){const e=this.getData();if(!(e instanceof Kt))return;let t=e.getAssetsWithRoles(["labels","labels-vector"],!0),r;t.length>1&&(r=t.find(n=>n.roles.includes("labels-vector"))),r||(r=e.getAsset("vector_labels")),r||(t=e.getAssets().filter(n=>n.type===it&&!n.roles),t.length===1&&(r=t[0]));const i=e.getLinksWithRels(["source"]);if(r&&i.length>0){const n=i.map(async o=>{try{const l=await this.fetch_(o.getAbsoluteUrl());return he(l)}catch(l){return this.handleError_(l),null}}),a=(await Promise.all(n)).filter(o=>o instanceof $);await this.addChildren_(a,{displayFootprint:!1})}try{await this.addGeoJson_(r)}catch(n){this.handleError_(n)}}async updateLayers(e=!0){const t=this.getLayers();for(let n=t.getLength()-1;n>=0;n--){const a=t.item(n);a.get("stac")&&!a.get("bounds")&&t.removeAt(n)}const r=this.getData();if(Array.isArray(this.displayWebMapLink_)){const n=this.getWebMapLinks().map(async a=>await this.addLayerForLink(a));await Promise.all(n)}this.children_&&await this.addChildren_(this.children_,this.childrenOptions_);const i=this.getAssets();if(i){const n=i.map(async a=>{if(a){if(a.type===it)return await this.addGeoJson_(a);if(a.isGeoTIFF())return await this.addGeoTiff_(a);if(a.canBrowserDisplayImage())return await this.addPreviewImage_(a)}});await Promise.all(n)}if(this.hasOnlyBounds()){if(r instanceof Jt)await this.addChildren_(r.getAll(),this.childrenOptions_);else if(r instanceof $){if(r.isItem()&&r.supportsExtension(Ds)&&r.getMetadata("label:type")==="vector"){await this.addLabelExtension_(),e&&this.dispatch_("layersready");return}const n=this.getWebMapLinks();if(n.length>0)await this.addLayerForLink(n[0]);else{const a=r.getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);let o;if(a&&this.displayOverview_&&(o=await this.addGeoTiff_(a)),this.displayPreview_&&(!a||!o)){const l=r.getThumbnails(!0,"overview");l.length>0&&await this.addPreviewImage_(l[0])}}}}e&&this.dispatch_("layersready")}hasOnlyBounds(){const e=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==e)>"u"}getWebMapLinks(){const e=this.getData();if(e instanceof oe)return[];let t=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(t=[this.displayWebMapLink_]);let r=e.getLinksWithRels(t);return Array.isArray(this.displayWebMapLink_)?r=this.displayWebMapLink_.map(i=>{if(typeof i=="string"){const n=r.find(a=>a.id===i);return n||null}return i}).filter(i=>!!i):r.sort((i,n)=>{const a=t.indexOf(i.rel),o=t.indexOf(n.rel);return a-o}),r}async setAssets(e,t=!0){if(e!==this.assets_){if(Array.isArray(e)){const r=this.getData();this.assets_=e.map(i=>r instanceof $&&typeof i=="string"?r.getAsset(i):i instanceof oe?i:new oe(i))}else this.assets_=null;t&&await this.updateLayers()}}async setChildren(e,t=null,r=!0){e instanceof qt?this.children_=e.getAll():e instanceof Xt?this.children_=e.getAll():Te(e)&&e.type==="FeatureCollection"?this.children_=he(e,!this.disableMigration_).getAll():Array.isArray(e)?this.children_=e.map(i=>i instanceof $?i:he(i,!this.disableMigration_)):this.children_=null,this.children_&&this.children_.length===0&&(this.children_=null),this.children_&&Te(t)&&(this.childrenOptions_=t),r&&await this.updateLayers()}getData(){return this.get("stac")}getChildren(){return this.children_}getAssets(){return this.assets_}getExtent(){if(!this.map_)return;const e=this.map_.getView();if(!e)return;let t;const r=this.getData();r&&(t=r.getBoundingBox());const i=this.getChildren();if(i){const n=i.map(a=>a.getBoundingBox());t=Nr(n)}if(t)return et(t,"EPSG:4326",e.getProjection())}getLayerState(){const e=super.getLayerState();return e.extent=void 0,e}getAttributions(){const e=[],t=this.getData();if(t){const r=t.getMetadata("attribution");r&&r.push(r)}return e}getSource(){return null}async getWmtsCapabilities_(e,t="kvp"){try{const r=new URL(e);t!=="rest"&&(r.searchParams.set("service","wmts"),r.searchParams.set("request","GetCapabilities"));const i=await this.fetch_(r.toString(),"text");return new Rr().read(i)}catch{return null}}}const Ys=De("#ff0000",2,null);let Qs=0;const ei={name:"MapView",components:{BPopover:ce(()=>te(()=>import("./bootstrap-vue-next-B4ztNbda.js"),__vite__mapDeps([10,1,2,3,4,5,11,12,13,14,15,8,16,17,18,19,20,21,22,7,23,24,6,25,26,27])).then(s=>s.BPopover)),Features:ce(()=>te(()=>import("./Features-A0-RfeAY.js"),__vite__mapDeps([28,1,2,3,4,5,15,8,18,29,30,31]))),Catalogs:ce(()=>te(()=>import("./Catalogs-BzXSOUwr.js").then(s=>s.b),__vite__mapDeps([32,1,2,3,4,5,15,8,33,34,30,31,18,19,35,36,37]))),Items:ce(()=>te(()=>import("./Items-Cg9Alz-L.js"),__vite__mapDeps([38,1,2,3,4,5,15,8,14,33,34,30,31,18,19,35,36]))),LayerControl:Pr,TextControl:Cr},mixins:[Ir],props:{stac:{type:Object,default:null},assets:{type:Array,default:null},children:{type:Object,default:null},onfocusOnly:{type:Boolean,default:!1},popover:{type:Boolean,default:!1}},emits:["empty","changed"],data(){return{selection:null,clickPosition:{x:0,y:0},empty:!1,selector:null,mapId:`map-${++Qs}`}},computed:{...rr(["getStac"]),container(){return this.isFullScreen?"#"+this.mapId:"#stac-browser"},childrenOptions(){return{displayPreview:this.children&&this.children.isItemCollection()}}},watch:{async stac(){await this.showStacLayer()},async assets(){this.stacLayer&&await this.stacLayer.setAssets(this.assets)},async children(){this.stacLayer&&(await this.stacLayer.setAssets(null,!1),await this.stacLayer.setChildren(this.children,this.childrenOptions,!1),await this.stacLayer.updateLayers(),this.fit())},empty(s){s&&this.$emit("empty")},selection(s){!s&&this.selector&&this.selector.getFeatures().clear()}},created(){this.stacLayer=null},async mounted(){await this.showStacLayer()},methods:{async showStacLayer(){this.map=null,this.stacLayer=null,await this.createMap(this.$refs.map,this.stac,this.onfocusOnly),this.stac&&await this.addStacLayer()},async addStacLayer(){let s=Object.assign({},this.stacLayerOptions,{data:this.stac,children:this.children,assets:this.assets||null,displayWebMapLink:!0,disableMigration:!0,childrenOptions:this.childrenOptions});this.stacLayer=new je(s),this.stacLayer.on("error",e=>{console.warn(e),this.fit()}),this.stacLayer.on("sourceready",this.fit),this.stacLayer.on("layersready",()=>{this.empty=this.stacLayer.isEmpty(),this.$emit("changed",this.getShownData())}),this.map.addLayer(this.stacLayer),this.popover&&(this.selector=new Ie({multi:!0,style:Ys,layers:e=>{if(this.children)return!1;{const t=e.get("stac");return t&&t.isAsset()}}}),this.selector.on("select",e=>{this.selection=null,this.setTargetPosition(e.mapBrowserEvent);const t=this.selector.getFeatures();if(t.getLength()>0){const r=new pt;this.selection={target:this.$refs.target,type:"features",items:t.getArray().map(i=>r.writeFeatureObject(i))}}}),this.map.addInteraction(this.selector),this.map.on("singleclick",async e=>{if(this.selection=null,this.children){this.setTargetPosition(e),this.selector.getFeatures().clear();const t=this.selector.getFeatures(),r=this.stacLayer.getData(),i=await Bs(e,r,t,5);i.length>0&&(this.selection={target:this.$refs.target,type:this.children.isCollectionCollection()?"collections":"items",children:i})}}),this.map.on("change",()=>this.selection=null),this.map.on("movestart",()=>this.selection=null))},setTargetPosition(s){this.$refs.target.style.left=s.pixel[0]+"px",this.$refs.target.style.top=s.pixel[1]+"px"},fit(){const s=this.stacLayer.getExtent();s&&(this.map.updateSize(),this.map.getView().fit(s,{padding:[50,50,50,50],maxZoom:this.maxZoom}))},resetSelection(){this.selection=null},getShownData(){return this.stacLayer?this.stacLayer.getLayers().getArray().filter(s=>Or.isLayerVisible(s)).map(s=>s.get("stac")).filter(s=>s instanceof $r):null}}},ti={class:"map-container"},ri=["id"],si={ref:"target",class:"popover-target"},ii={class:"popover-children"},ni={class:"text-center"};function ai(s,e,t,r,i,n){const a=W("LayerControl"),o=W("TextControl"),l=W("Items"),u=W("Catalogs"),h=W("Features"),c=er,f=W("b-popover");return V(),Qt("div",ti,[le("div",{ref:"map",class:"map",id:i.mapId},[Ne(a,{map:s.map,maxZoom:s.maxZoom},null,8,["map","maxZoom"]),e[0]||(e[0]=Q()),i.empty?(V(),N(o,{key:0,map:s.map,text:s.$t("mapping.nodata")},null,8,["map","text"])):s.hasBasemap?$e("",!0):(V(),N(o,{key:1,map:s.map,text:s.$t("mapping.nobasemap")},null,8,["map","text"]))],8,ri),e[2]||(e[2]=Q()),le("div",si,null,512),e[3]||(e[3]=Q()),t.popover&&i.selection?(V(),N(f,{key:0,show:"",manual:"",placement:"auto",target:i.selection.target,"teleport-to":n.container,class:"map-popover","boundary-padding":10},{default:He(()=>[le("section",ii,[i.selection.type==="items"?(V(),N(l,{key:0,stac:t.stac,items:i.selection.children},null,8,["stac","items"])):i.selection.type==="collections"?(V(),N(u,{key:1,collectionsOnly:"",enforceCards:"",hideControls:"",stac:t.stac,catalogs:i.selection.children},null,8,["stac","catalogs"])):(V(),N(h,{key:2,features:i.selection.children},null,8,["features"]))]),e[1]||(e[1]=Q()),le("div",ni,[Ne(c,{variant:"danger",onClick:n.resetSelection},{default:He(()=>[Q(tr(s.$t("mapping.close")),1)]),_:1},8,["onClick"])])]),_:1},8,["target","teleport-to"])):$e("",!0)])}const mn=Yt(ei,[["render",ai]]);export{mn as default};
//# sourceMappingURL=MapView-BWMBkF39.js.map
