import{a as x,_ as I}from"./BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-BXam2FB4.js";import{_ as C}from"./BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-CukeeBb6.js";import{_ as S}from"./BForm.vue_vue_type_script_setup_true_lang-u44ElAm9-CLv0b1tE.js";import{bk as w,bl as f,n,B as a,L as i,q as r,G as s,_ as B,H as l,z as D,K as d,p as u,I as _,ax as U,y as m,d as V,cj as A,ck as N,br as T}from"./index-C4WwNGim.js";import{d as j}from"./BFormGroup.vue_vue_type_script_setup_true_lang-RIWLdYTY-BuPBLlsN.js";import{_ as L}from"./BFormInput.vue_vue_type_script_setup_true_lang-DRDhfD8d-D6iWX4E1.js";import M from"./Description-CwvxY63f.js";import{j as P}from"./utils-B8zgF4c8.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--B_qcBrKp.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./useStateClass-BGbSLWFN-fwe7ggqp.js";import"./debounce-BHqBzJ1a-jGdHJSGt.js";const F=V({name:"SelectDataSource",components:{Description:M,"i18n-t":A},data(){return{url:"",stacIndex:[]}},computed:{...T(["toBrowserPath"]),valid(){return this.url.length===0?null:!this.error},error(){if(!this.url)return null;try{let t=new URL(this.url);if(t.protocol){if(!t.host)return this.$t("index.urlMissingHost")}else return this.$t("index.urlMissingProtocol");return null}catch(t){return this.$t("index.urlInvalid:",{error:t.message})}}},async created(){this.$store.commit("resetCatalog",!0);try{let t=await N.get("https://stacindex.org/api/catalogs");Array.isArray(t.data)&&(this.stacIndex=t.data)}catch(t){console.error("Failed to load STAC Index:",t)}},methods:{show(t){return t.access==="private"?!1:this.url?P.search(this.url,[t.title,t.url]):!0},setUrl(t){this.url=t},open(t){this.url=t,this.go()},go(){this.url&&this.$router.push(this.toBrowserPath(this.url))}}}),G={class:"select-data-source"},H={key:0},q={class:"d-flex justify-content-between align-items-baseline mb-1"};function z(t,e,E,K,R,J){const h=L,p=j,b=B,$=S,y=f("i18n-t"),c=C,g=f("Description"),k=I,v=x;return n(),a("main",G,[i($,{onSubmit:D(t.go,["prevent"])},{default:r(()=>[i(p,{id:"select",label:t.$t("index.specifyCatalog"),"label-for":"url","invalid-feedback":t.error,state:t.valid,class:"mb-3"},{default:r(()=>[i(h,{id:"url",type:"url","model-value":t.url,"onUpdate:modelValue":t.setUrl,placeholder:"https://..."},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["label","invalid-feedback","state"]),e[0]||(e[0]=s()),i(b,{type:"submit",variant:"primary"},{default:r(()=>[s(l(t.$t("index.load")),1)]),_:1})]),_:1},8,["onSubmit"]),e[5]||(e[5]=s()),t.stacIndex.length>0?(n(),a("hr",H)):d("",!0),e[6]||(e[6]=s()),t.stacIndex.length>0?(n(),u(p,{key:1,class:"stac-index"},{label:r(()=>[i(y,{keypath:"index.selectStacIndex",tag:"span"},{stacIndex:r(()=>[...e[1]||(e[1]=[m("a",{href:"https://stacindex.org",target:"_blank"},"STAC Index",-1)])]),_:1})]),default:r(()=>[e[4]||(e[4]=s()),i(v,null,{default:r(()=>[(n(!0),a(_,null,U(t.stacIndex,o=>(n(),a(_,{key:o.id},[t.show(o)?(n(),u(k,{key:0,button:"",active:t.url===o.url,onClick:O=>t.open(o.url)},{default:r(()=>[m("div",q,[m("strong",null,l(o.title),1),e[2]||(e[2]=s()),o.isApi?(n(),u(c,{key:0,variant:"danger"},{default:r(()=>[s(l(t.$t("index.api")),1)]),_:1})):(n(),u(c,{key:1,variant:"success"},{default:r(()=>[s(l(t.$t("index.catalog")),1)]),_:1}))]),e[3]||(e[3]=s()),i(g,{description:o.summary,compact:""},null,8,["description"])]),_:2},1032,["active","onClick"])):d("",!0)],64))),128))]),_:1})]),_:1})):d("",!0)])}const lt=w(F,[["render",z]]);export{lt as default};
//# sourceMappingURL=SelectDataSource-Cb2SrAQQ.js.map
