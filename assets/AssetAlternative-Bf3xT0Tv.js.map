{"version":3,"mappings":";4fAqBA,MAAKA,EAAU,CACb,KAAM,mBACN,WAAY,CACV,YAAAC,EACA,YAAAC,EACA,eAAgBC,EAAqB,IAAIC,EAAA,IAAE,OAAO,8BAAsB,wEAAC,GAE3E,OAAQ,CACNC,EAAgB,iBAAEC,kBAAiB,GAErC,MAAO,CACL,MAAO,CACL,KAAM,OACN,SAAU,IAEZ,gBAAiB,CACf,KAAM,QACN,QAAS,IAEX,MAAO,CACL,KAAM,QACN,QAAS,EACX,GAEF,MAAO,CAAC,MAAM,EACd,MAAO,CACL,MAAO,CACL,OAAQ,CAEN,OACA,QACA,cACA,OACA,QAEA,YACA,gBAEA,wBACA,qBACA,yBAEA,YACA,eAEA,YACA,gBACF,EAEJ,EACA,SAAU,CACR,SAAU,CACR,OAAO,KAAK,MAAM,WAAU,CAC9B,EACA,eAAgB,CACd,GAAI,MAAM,QAAQ,KAAK,MAAM,cAAc,CAAC,EAAG,CAC7C,MAAMC,EAAQ,IAAIC,EAAM,KAAK,MAAO,KAAK,MAAM,OAAM,EAAI,KAAK,OAAO,EACrE,OAAAD,EAAM,iBAAiB,EAAI,KAAK,eAAe,KAAK,MAAO,KAAK,OAAO,EAChEA,CACT,CACA,OAAO,KAAK,KACd,EACA,kBAAmB,CACjB,OAAI,KAAK,sBAAwB,CAAC,KAAK,uBAC9B,SAGA,QAEX,EACA,YAAa,CACX,OAAI,OAAO,KAAK,MAAM,MAAS,UAAY,KAAK,MAAM,KAAK,OAAS,EAC3D,KAAK,gBAAgB,KAAK,MAAM,IAAI,EAEtC,IACT,EACA,MAAO,CACL,OAAOE,EAAU,YAAY,KAAK,MAAO,KAAK,OAAO,CACvD,GAEF,QAAS,CACP,eAAeC,EAAKC,EAAS,CAC3B,GAAIA,aAAmBC,GAAcC,EAAM,KAAKH,EAAI,cAAc,CAAC,EAAI,EAAG,CACxE,MAAMI,EAAUH,EAAQ,YAAY,iBAAiB,EAC/CI,EAAkB,GACxB,UAAWC,KAAON,EAAI,cAAc,EAC9BG,EAAM,SAASC,EAAQE,CAAG,CAAC,IAC7BD,EAAgBC,CAAG,EAAIF,EAAQE,CAAG,GAGtC,OAAOD,CACT,CACA,MAAO,EACT,EACA,MAAO,CACL,KAAK,MAAM,OAAQ,GAAG,SAAS,CACjC,CACF,CACF,2BAnHS,MAAM,6GAHbE,EAOM,YANJC,EAAuC,MAAnC,MAAM,OAAO,UAAQC,EAAA,uCACzBC,EAA8EC,EAAA,CAAjE,WAAS,KAAMC,EAAA,MAAQ,MAAOA,EAAA,MAAQ,OAAMH,EAAA,KAAO,KAAMA,EAAA,gEAC9CG,EAAA,MAAM,aAA9BC,IAAAN,EAEM,MAFNO,EAEM,CADJJ,EAAwDK,EAAA,CAA1C,YAAaH,EAAA,MAAM,YAAa,iEAEhDF,EAAqHM,EAAA,CAArG,MAAM,OAAQ,KAAMP,EAAA,cAAgB,QAASA,EAAA,QAAU,aAAcQ,EAAA,OAAQ,MAAM,GAAG,KAAK","names":["_sfc_main","Description","HrefActions","defineAsyncComponent","__vitePreload","StacFieldsMixin","formatMediaType","asset","Asset","AuthUtils","obj","context","STACObject","Utils","schemes","filteredSchemes","ref","_createElementBlock","_createElementVNode","$options","_createVNode","_component_HrefActions","$props","_openBlock","_hoisted_2","_component_Description","_component_MetadataGroups","$data"],"ignoreList":[],"sources":["../../src/components/AssetAlternative.vue"],"sourcesContent":["<template>\n  <div>\n    <h4 class=\"mb-4\" v-html=\"fileFormat\" />\n    <HrefActions isAsset :data=\"asset\" :shown=\"shown\" @show=\"show\" :auth=\"auth\" />\n    <div class=\"mt-4\" v-if=\"asset.description\">\n      <Description :description=\"asset.description\" compact />\n    </div>\n    <MetadataGroups class=\"mt-4\" :data=\"resolvedAsset\" :context=\"context\" :ignoreFields=\"ignore\" title=\"\" type=\"Asset\" />\n  </div>\n</template>\n\n<script>\nimport { defineAsyncComponent } from 'vue';\nimport { formatMediaType } from '@radiantearth/stac-fields/formatters';\nimport Description from './Description.vue';\nimport HrefActions from './HrefActions.vue';\nimport StacFieldsMixin from './StacFieldsMixin';\nimport AuthUtils from './auth/utils';\nimport Utils from '../utils';\nimport { Asset, STACObject } from 'stac-js';\n\nexport default {\n  name: 'AssetAlternative',\n  components: {\n    Description,\n    HrefActions,\n    MetadataGroups: defineAsyncComponent(() => import('./MetadataGroups.vue'))\n  },\n  mixins: [\n    StacFieldsMixin({ formatMediaType })\n  ],\n  props: {\n    asset: {\n      type: Object,\n      required: true\n    },\n    hasAlternatives: {\n      type: Boolean,\n      default: false\n    },\n    shown: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['show'],\n  data() {\n    return {\n      ignore: [\n        // Asset fields that are handled directly\n        'href',\n        'title',\n        'description',\n        'type',\n        'roles',\n        // Don't show these complex lists of coordinates: https://github.com/radiantearth/stac-browser/issues/141\n        'proj:bbox',\n        'proj:geometry',\n        // Don't show very specific options that can't be rendered nicely\n        'table:storage_options',\n        'xarray:open_kwargs',\n        'xarray:storage_options',\n        // Special handling for auth and storage\n        'auth:refs',\n        'storage:refs',\n        // Alternative Assets are displayed separately\n        'alternate',\n        'alternate:name',\n      ]\n    };\n  },\n  computed: {\n    context() {\n      return this.asset.getContext();\n    },\n    resolvedAsset() {\n      if (Array.isArray(this.asset['storage:refs'])) {\n        const asset = new Asset(this.asset, this.asset.getKey(), this.context);\n        asset['storage:schemes'] = this.resolveStorage(this.asset, this.context);\n        return asset;\n      }\n      return this.asset;\n    },\n    tileRendererType() {\n      if (this.buildTileUrlTemplate && !this.useTileLayerAsFallback) {\n        return 'server';\n      }\n      else {\n        return 'client';\n      }\n    },\n    fileFormat() {\n      if (typeof this.asset.type === \"string\" && this.asset.type.length > 0) {\n        return this.formatMediaType(this.asset.type);\n      }\n      return null;\n    },\n    auth() {\n      return AuthUtils.resolveAuth(this.asset, this.context);\n    }\n  },\n  methods: {\n    resolveStorage(obj, context) {\n      if (context instanceof STACObject && Utils.size(obj['storage:refs']) > 0) {\n        const schemes = context.getMetadata('storage:schemes');\n        const filteredSchemes = {};\n        for (const ref of obj['storage:refs']) {\n          if (Utils.isObject(schemes[ref])) {\n            filteredSchemes[ref] = schemes[ref];\n          }\n        }\n        return filteredSchemes;\n      }\n      return [];\n    },\n    show() {\n      this.$emit('show', ...arguments);\n    }\n  }\n};\n</script>\n"],"file":"AssetAlternative-Bf3xT0Tv.js"}