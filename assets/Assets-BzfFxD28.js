const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MetadataGroups-BEHBKDSS.js","assets/index-DLQIbJqc.js","assets/utils-B7F_ho2D.js","assets/_commonjsHelpers-CE1G-McA.js","assets/I18N-DlIXJTel.js","assets/index-Dw8SzqbY.css","assets/BCardText.vue_vue_type_script_setup_true_lang-SRGbviaO-C7gcSv8b.js","assets/index-Dzaw9-N9.js","assets/StacFieldsMixin-c9dxzqw7.js","assets/helper-DO3U350M.js","assets/datatypes-XrFOh23H.js","assets/index.esm-aL1O-Kk3.js","assets/util-B-u73NMb.js","assets/interface-BPo5cHT_.js","assets/BCard.vue_vue_type_script_setup_true_lang-BjoxuViz-CtHr40D7.js","assets/MetadataGroups-DSbVrFW-.css"])))=>i.map(i=>d[i]);
import{_ as H}from"./BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-Csj99Gv7.js";import{_ as K}from"./check-BYHT0Kfd.js";import{_ as L,a as V}from"./chevron-down-CwCwPMJE.js";import{S as F,f as B}from"./StacFieldsMixin-c9dxzqw7.js";import{bf as k,bo as N,bk as z,cS as D,cH as C,bp as E,bg as d,G as f,x as a,E as w,L as r,P as h,z as p,bn as P,v as i,y as l,N as v,av as T,M as g}from"./index-DLQIbJqc.js";import U from"./Description-5KvaRZak.js";import{H as G}from"./HrefActions-DpLlJaI1.js";import{j as A}from"./utils-B7F_ho2D.js";import{_ as I,a as R}from"./BAccordion.vue_vue_type_script_setup_true_lang-Bm1RghW9-BiX2x-2q.js";import{_ as q,a as J}from"./BTabs.vue_vue_type_script_setup_true_lang-DJniJmO4-DqkkB-SW.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--D04gVupl.js";import"./helper-DO3U350M.js";import"./I18N-DlIXJTel.js";import"./_commonjsHelpers-CE1G-McA.js";import"./datatypes-XrFOh23H.js";import"./BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-uP3pKCjA.js";import"./BCollapse.vue_vue_type_script_setup_true_lang-B8TqF-kB-DiZzKXJc.js";const Q={name:"AssetAlternative",components:{Description:U,HrefActions:G,MetadataGroups:N(()=>E(()=>import("./MetadataGroups-BEHBKDSS.js").then(n=>n.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])))},mixins:[F({formatMediaType:B.formatMediaType})],props:{asset:{type:Object,required:!0},hasAlternatives:{type:Boolean,default:!1},shown:{type:Boolean,default:!1}},emits:["show"],data(){return{ignore:["href","title","description","type","roles","proj:bbox","proj:geometry","table:storage_options","xarray:open_kwargs","xarray:storage_options","auth:refs","storage:refs","alternate","alternate:name"]}},computed:{context(){return this.asset.getContext()},resolvedAsset(){if(Array.isArray(this.asset["storage:refs"])){const n=this.resolveStorage(this.asset,this.context),e=new C(this.asset,this.asset.getKey(),this.context);return e["storage:schemes"]=n,e}return this.asset},tileRendererType(){return this.buildTileUrlTemplate&&!this.useTileLayerAsFallback?"server":"client"},fileFormat(){return typeof this.asset.type=="string"&&this.asset.type.length>0?this.formatMediaType(this.asset.type):null},auth(){return D.resolveAuth(this.asset,this.context)}},methods:{resolveStorage(n,e){if(e instanceof z&&A.size(n["storage:refs"])>0){const t=e.getMetadata("storage:schemes");if(A.size(t)>0){const u={};for(const o in t){const s=t[o];A.isObject(s)&&(u[o]=s)}return u}}return[]},show(){this.$emit("show",...arguments)}}},W=["innerHTML"],X={key:0,class:"mt-4"};function Y(n,e,t,u,o,s){const _=d("HrefActions"),y=d("Description"),m=d("MetadataGroups");return a(),f("div",null,[w("h4",{class:"mb-4",innerHTML:s.fileFormat},null,8,W),e[0]||(e[0]=r()),h(_,{isAsset:"",data:t.asset,shown:t.shown,onShow:s.show,auth:s.auth},null,8,["data","shown","onShow","auth"]),e[1]||(e[1]=r()),t.asset.description?(a(),f("div",X,[h(y,{description:t.asset.description,compact:""},null,8,["description"])])):p("",!0),e[2]||(e[2]=r()),h(m,{class:"mt-4",data:s.resolvedAsset,context:s.context,ignoreFields:o.ignore,title:"",type:"Asset"},null,8,["data","context","ignoreFields"])])}const Z=k(Q,[["render",Y]]),$={name:"Asset",components:{AssetAlternative:Z,BTab:J,BTabs:q,BAccordionItem:I},mixins:[F({formatMediaType:B.formatMediaType})],props:{asset:{type:Object,required:!0},definition:{type:Boolean,default:!1},expand:{type:Boolean,default:null},shown:{type:Boolean,default:!1}},emits:["show"],data(){return{expanded:!1}},computed:{...P(["stateQueryParameters"]),type(){return this.definition?"itemdef":"asset"},uid(){return`${this.type}-${this.asset.getKey().toLowerCase().replace(/[^\w]/g,"-")}`},title(){return this.asset.title||this.asset.getKey()},fileFormat(){return typeof this.asset.type=="string"&&this.asset.type.length>0?this.formatMediaType(this.asset.type):null},shortFileFormat(){return typeof this.asset.type=="string"&&this.asset.type.length>0?this.formatMediaType(this.asset.type,null,{shorten:!0}):null},alternatives(){if(!A.isObject(this.asset.alternate))return{};const n=this.asset.toJSON();delete n.alternate;const e={};for(const t in this.asset.alternate){const u=this.asset.alternate[t],o=Object.assign({},n,u.toJSON());e[t]=new C(o,t,u.getContext())}return e},hasAlternatives(){return A.size(this.alternatives)>0}},created(){if(this.stateQueryParameters[this.type].indexOf(this.uid)>-1){this.expanded=!0;return}typeof this.expand=="boolean"?this.expanded=this.expand:this.expanded=!1},methods:{displayRole(n){let e=`assets.role.${n}`;return this.$te(e)?this.$t(e):n},collapseToggled(n){let e=n?"openCollapsible":"closeCollapsible";this.$store.commit(e,{type:this.type,uid:this.uid})},show(){this.$emit("show",...arguments)}}},ee={class:"chevron","aria-hidden":"true"},te={class:"title"},se={class:"badges ms-1"},ne=["innerHTML"];function ae(n,e,t,u,o,s){const _=L,y=V,m=K,b=H,x=d("AssetAlternative"),S=d("b-tab"),O=d("b-tabs"),j=d("b-accordion-item");return a(),i(j,{id:s.uid,class:"asset expandable-card",modelValue:o.expanded,"onUpdate:modelValue":[e[0]||(e[0]=c=>o.expanded=c),s.collapseToggled]},{title:l(()=>[w("span",ee,[o.expanded?(a(),i(_,{key:0})):(a(),i(y,{key:1}))]),e[4]||(e[4]=r()),w("span",te,g(s.title),1),e[5]||(e[5]=r()),w("div",se,[t.shown?(a(),i(b,{key:0,variant:"success",class:"shown",title:n.$t("assets.currentlyShown")},{default:l(()=>[h(m),r(" "+g(n.$t("assets.shown")),1)]),_:1},8,["title"])):p("",!0),e[1]||(e[1]=r()),t.asset.deprecated?(a(),i(b,{key:1,variant:"warning",class:"deprecated"},{default:l(()=>[r(g(n.$t("deprecated")),1)]),_:1})):p("",!0),e[2]||(e[2]=r()),Array.isArray(t.asset.roles)?(a(!0),f(v,{key:2},T(t.asset.roles,c=>(a(),i(b,{key:c,variant:c==="data"?"primary":"secondary",class:"role"},{default:l(()=>[r(g(s.displayRole(c)),1)]),_:2},1032,["variant"]))),128)):p("",!0),e[3]||(e[3]=r()),s.shortFileFormat?(a(),i(b,{key:3,variant:"dark",class:"format",title:s.fileFormat},{default:l(()=>[w("span",{innerHTML:s.shortFileFormat},null,8,ne)]),_:1},8,["title"])):p("",!0)])]),default:l(()=>[e[7]||(e[7]=r()),s.hasAlternatives?(a(),i(O,{key:0,"content-class":"mt-3",lazy:""},{default:l(()=>[h(S,{title:t.asset["alternate:name"]||n.$t("assets.alternate.main"),active:""},{default:l(()=>[h(x,{asset:t.asset,shown:t.shown,hasAlternatives:"",onShow:s.show},null,8,["asset","shown","onShow"])]),_:1},8,["title"]),e[6]||(e[6]=r()),(a(!0),f(v,null,T(s.alternatives,(c,M)=>(a(),i(S,{title:c["alternate:name"]||M,key:M},{default:l(()=>[h(x,{asset:c,shown:t.shown,hasAlternatives:"",onShow:s.show},null,8,["asset","shown","onShow"])]),_:2},1032,["title"]))),128))]),_:1})):(a(),i(x,{key:1,asset:t.asset,shown:t.shown,onShow:s.show},null,8,["asset","shown","onShow"]))]),_:1},8,["id","modelValue","onUpdate:modelValue"])}const re=k($,[["render",ae]]),oe={name:"Assets",components:{Asset:re,BAccordion:R},props:{assets:{type:Array,required:!0},shown:{type:Array,default:()=>[]},context:{type:Object,default:null},definition:{type:Boolean,default:!1},title:{type:String,default:null}},emits:["showAsset"],computed:{shownKeys(){return this.shown.filter(n=>n.isAsset()).map(n=>n.getKey())},displayTitle(){if(this.title===null){let n=this.definition?"assets.inItems":"stacAssets";return this.$tc(n,this.assets.length)}else return this.title},expand(){return this.definition?!1:this.assets.length===1&&this.context&&this.context.isItem()?!0:null}},methods:{show(){this.$emit("showAsset",...arguments)}}},ie={class:"assets mb-4"},le={key:0};function de(n,e,t,u,o,s){const _=d("Asset"),y=d("b-accordion");return a(),f("section",ie,[s.displayTitle?(a(),f("h2",le,g(s.displayTitle),1)):p("",!0),e[0]||(e[0]=r()),h(y,null,{default:l(()=>[(a(!0),f(v,null,T(t.assets,m=>(a(),i(_,{asset:m,expand:s.expand,context:t.context,definition:t.definition,shown:s.shownKeys.includes(m.getKey()),key:m.getKey(),onShow:s.show},null,8,["asset","expand","context","definition","shown","onShow"]))),128))]),_:1})])}const Me=k(oe,[["render",de]]);export{Me as default};
//# sourceMappingURL=Assets-BzfFxD28.js.map
