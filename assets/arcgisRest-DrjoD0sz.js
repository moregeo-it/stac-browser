import{bg as u,aA as p,aB as f,ak as O,z as P}from"./GeoJSON-dVJCj0SI.js";import{a as h}from"./uri-BP_XjvpC.js";import{getRequestExtent as A}from"./Image-BUhvsjjs.js";import{DECIMALS as S}from"./common-9rOs42pz.js";import"./index-DLQIbJqc.js";import"./utils-B7F_ho2D.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./BFormRadioGroup.vue_vue_type_script_setup_true_lang-LQBMttYK-CW7mqt87.js";import"./useStateClass-BGbSLWFN-DVCkhww4.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--D04gVupl.js";import"./tilecoord-CR7vLr2I.js";import"./common-D17H8Wti.js";import"./resolution-CU8ppKQ3.js";function E(o,t,m,c,s,r){const n=s.getCode().split(/:(?=\d+$)/).pop(),e=m/c,i=[u(p(t)/e,S),u(f(t)/e,S)];r.SIZE=i[0]+","+i[1],r.BBOX=t.join(","),r.BBOXSR=n,r.IMAGESR=n,r.DPI=Math.round(r.DPI?r.DPI*c:90*c);const g=o.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return h(g,r)}function C(o){const t=o.load?o.load:O,m=P(o.projection||"EPSG:3857"),c=o.ratio??1.5,s=o.crossOrigin??null;return function(r,n,e){e=o.hidpi?e:1;const i={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(i,o.params),r=A(r,n,e,c);const g=E(o.url,r,n,e,m,i),d=new Image;return d.crossOrigin=s,t(d,g).then(a=>{const I=p(r)/a.width*e;return{image:a,extent:r,resolution:I,pixelRatio:e}})}}export{C as createLoader,E as getRequestUrl};
//# sourceMappingURL=arcgisRest-DrjoD0sz.js.map
