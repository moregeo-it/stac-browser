import{h as n}from"./helper-CaHhXSPV.js";import{r as l}from"./interface-C5LRr40I.js";import{S as c,f as p}from"./StacFieldsMixin-Dgc-ZpgP.js";import{j as m}from"./utils-B7F_ho2D.js";import{P as u,B as h,C as d,p as f,a as x,b as y,A as _,c as b,d as v,L as g}from"./index-Rw9wB-yz.js";import{bf as E,G as B,x as o,v as S,K as $}from"./index-DPmgT0xU.js";import"./helper-DO3U350M.js";import"./I18N-DlIXJTel.js";import"./_commonjsHelpers-CE1G-McA.js";import"./datatypes-XrFOh23H.js";var w=l();d.register(f,x,y,_,b,v,g);const C={name:"StatsChart",components:{Bar:h,Pie:u},mixins:[c({formatMediaType:p.formatMediaType})],props:{data:{type:Object,required:!0},type:{type:String,required:!0},count:{type:Number,required:!0},options:{type:Object,default:()=>({})}},computed:{component(){switch(this.type){case"versions":return"Pie";default:return"Bar"}},title(){switch(this.type){case"versions":return this.$t("source.stacVersion");case"extensions":return this.$t("source.stacExtension");case"assets":return this.$t("source.fileFormat");default:return""}},allOptions(){let e={responsive:!0,plugins:{title:{display:!0,text:this.title}},scales:{y:{min:0,max:this.count,title:{display:!1}}}};return Object.assign(e,this.options)},chartData(){let e=[],r=[];for(let t in this.data){let s=this.data[t];r.push(s);let i;switch(this.type){case"extensions":{let a=this.parseExtension(t);i=`${a.title}`,a.version&&(i+=` (${a.version})`);break}case"assets":i=this.formatMediaType(t);break;default:i=t}e.push(i)}return{labels:e,datasets:[{data:r}]}}},methods:{parseExtension(e){let r=null,t=e,s=e.match(/^https?:\/\/stac-extensions\.github\.io\/([^/]+)\/v?([^/]+)(?:\/([^/.]+))?\/schema/);return s?(r=s[2],t=w.extension(s[1]),s[3]&&(t+=" - "+n.formatKey(s[3]))):(t=e.replace(/^https?:\/\/(www.)?/,"").replace(/\/schema(\.json)?$/,""),t=m.shortenTitle(t,30)),{title:t,version:r}}}},j={class:"chart mb-4"};function k(e,r,t,s,i,a){return o(),B("div",j,[(o(),S($(a.component),{data:a.chartData,options:a.allOptions},null,8,["data","options"]))])}const G=E(C,[["render",k]]);export{G as default};
//# sourceMappingURL=StatsChart-DxrAeIql.js.map
