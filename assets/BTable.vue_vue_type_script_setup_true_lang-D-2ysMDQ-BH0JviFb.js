import{c as f,t as Oe,c3 as at,d as G,e as te,g as He,p as ot,G as T,x as g,E as ue,A as b,I as L,J as Ae,R as qe,H as I,C as _,m as xe,f as Ge,h as De,w as ae,r as Je,c4 as _e,c5 as Te,c6 as lt,ay as Be,s as st,az as Ye,c7 as rt,c8 as Qe,v as H,ah as nt,y as k,av as oe,z as W,L as le,M as ee,B as d,c9 as $e,N as Z,P as O,c0 as D,i as it,ca as Xe,D as dt,Q as ut,K as ct,aF as Ve,aH as je,aG as Le,aK as We,aL as ze,cb as ft,ak as vt}from"./index-DLQIbJqc.js";import{u as pt}from"./debounce-BHqBzJ1a-BZDj8VL8.js";const yt=(m,w="px")=>f(()=>{const l=Oe(m),s=Oe(w);return at.test(String(l))?`${Number(l)}${s}`:l}),bt="300px",mt=G({__name:"BTableSimple",props:{bordered:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},borderVariant:{default:null},captionTop:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},id:{default:void 0},noBorderCollapse:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},responsive:{type:[Boolean,String],default:!1},small:{type:Boolean,default:!1},stacked:{type:[Boolean,String],default:!1},stickyHeader:{type:[Boolean,String,Number],default:!1},striped:{type:Boolean,default:!1},stripedColumns:{type:Boolean,default:!1},variant:{default:null},tableAttrs:{default:void 0},tableClass:{default:void 0}},setup(m){const l=te(m,"BTableSimple"),s=He(()=>l.id),t=ot(f(()=>({borderVariant:l.borderVariant}))),y=f(()=>[l.tableClass,"table","b-table",t.value,{border:l.outlined,"table-bordered":l.bordered,"table-borderless":l.borderless,"caption-top":l.captionTop,"table-dark":l.dark,"table-hover":l.hover,"b-table-stacked":l.stacked===!0,[`b-table-stacked-${l.stacked}`]:typeof l.stacked=="string","table-striped":l.striped,"table-sm":l.small,[`table-${l.variant}`]:l.variant!==null,"table-striped-columns":l.stripedColumns,"b-table-fixed":l.fixed,"b-table-no-border-collapse":l.noBorderCollapse}]),B=f(()=>({id:s.value,class:y.value,...l.tableAttrs})),V=yt(f(()=>(l.stickyHeader===!0?bt:l.stickyHeader)||Number.NaN)),J=f(()=>l.stickyHeader!==!1),S=f(()=>l.responsive!==!1||J.value),Y=f(()=>J.value?{maxHeight:V.value}:void 0),$=f(()=>({"table-responsive":l.responsive===!0,[`table-responsive-${l.responsive}`]:typeof l.responsive=="string","b-table-sticky-header":J.value}));return(x,P)=>S.value?(g(),T("div",{key:0,class:I($.value),style:qe(Y.value)},[ue("table",L(Ae(B.value)),[b(x.$slots,"default")],16)],6)):(g(),T("table",L(_({key:1},B.value)),[b(x.$slots,"default")],16))}}),Ke=(m,w,l)=>{const s=D(m,w);return l&&typeof l=="function"?l(s,w,m):s},U=m=>typeof m=="object"&&m!==null,ne=m=>typeof m=="object"&&m!==null&&"key"in m,gt=G({__name:"BTbody",props:{variant:{default:null}},setup(m){const l=te(m,"BTbody"),s=f(()=>({[`thead-${l.variant}`]:l.variant!==null}));return(t,y)=>(g(),T("tbody",{class:I(s.value)},[b(t.$slots,"default")],2))}}),ht=["colspan","rowspan","data-label"],kt={key:0},be=G({__name:"BTd",props:{colspan:{default:void 0},rowspan:{default:void 0},stackedHeading:{default:void 0},stickyColumn:{type:Boolean,default:!1},variant:{default:null}},setup(m){const l=te(m,"BTd"),s=f(()=>({[`table-${l.variant}`]:l.variant!==null,"b-table-sticky-column":l.stickyColumn,"table-b-table-default":l.stickyColumn&&l.variant===null}));return(t,y)=>(g(),T("td",{class:I(s.value),colspan:d(l).colspan,rowspan:d(l).rowspan,"data-label":d(l).stackedHeading},[d(l).stackedHeading?(g(),T("div",kt,[b(t.$slots,"default")])):b(t.$slots,"default",{key:1})],10,ht))}}),Ue=G({__name:"BTfoot",props:{variant:{default:null}},setup(m){const l=te(m,"BTfoot"),s=f(()=>({[`table-${l.variant}`]:l.variant!==null}));return(t,y)=>(g(),T("tfoot",{class:I(s.value)},[b(t.$slots,"default")],2))}}),wt=["scope","colspan","rowspan","data-label"],St={key:0},Me=G({__name:"BTh",props:{colspan:{default:void 0},rowspan:{default:void 0},stackedHeading:{default:void 0},stickyColumn:{type:Boolean,default:!1},variant:{default:null},scope:{default:void 0}},setup(m){const l=te(m,"BTh"),s=f(()=>({[`table-${l.variant}`]:l.variant!==null,"b-table-sticky-column":l.stickyColumn,"table-b-table-default":l.stickyColumn&&l.variant===null})),t=f(()=>l.scope?l.scope:l.colspan?"colgroup":l.rowspan?"rowgroup":"col");return(y,B)=>(g(),T("th",{scope:t.value,class:I(s.value),colspan:d(l).colspan,rowspan:d(l).rowspan,"data-label":d(l).stackedHeading},[d(l).stackedHeading!==void 0?(g(),T("div",St,[b(y.$slots,"default")])):b(y.$slots,"default",{key:1})],10,wt))}}),Ct=G({__name:"BThead",props:{variant:{default:null}},setup(m){const l=te(m,"BThead"),s=f(()=>({[`table-${l.variant}`]:l.variant!==null}));return(t,y)=>(g(),T("thead",{class:I(s.value)},[b(t.$slots,"default")],2))}}),q=G({__name:"BTr",props:{variant:{default:null}},setup(m){const l=te(m,"BTr"),s=f(()=>({[`table-${l.variant}`]:l.variant!==null}));return(t,y)=>(g(),T("tr",{class:I(s.value)},[b(t.$slots,"default")],2))}}),Bt=["TD","TH","TR"],_t=["a","a *","button","button *","input:not(.disabled):not([disabled])","select:not(.disabled):not([disabled])","textarea:not(.disabled):not([disabled])",'[role="link"]','[role="link"] *','[role="button"]','[role="button"] *',"[tabindex]:not(.disabled):not([disabled])"].join(","),de=m=>{if(!m||!m.target)return!1;const w=m.target;if("disabled"in w&&w.disabled||Bt.indexOf(w.tagName)!==-1)return!1;if(w.closest(".dropdown-menu"))return!0;const l=w.tagName==="LABEL"?w:w.closest("label");if(l){const s=l.getAttribute("for"),t=s?document.getElementById(s):l.querySelector("input, select, textarea");if(t&&!t.disabled)return!0}return w.matches(_t)},Tt={key:0},$t={key:0,class:"b-table-stacked-label"},At={class:"d-inline-flex flex-nowrap align-items-center gap-1"},Nt={key:3},Pt=G({__name:"BTableLite",props:{align:{default:void 0},caption:{default:void 0},detailsTdClass:{default:void 0},fieldColumnClass:{type:[Function,String,Object,Array],default:void 0},fields:{default:()=>[]},footClone:{type:Boolean,default:!1},footRowVariant:{default:void 0},footVariant:{default:void 0},headRowVariant:{default:void 0},headVariant:{default:void 0},items:{default:()=>[]},labelStacked:{type:Boolean,default:!1},modelValue:{default:void 0},primaryKey:{default:void 0},tbodyClass:{default:void 0},tbodyTrAttrs:{type:[Function,Object],default:void 0},tbodyTrClass:{type:[Function,String,Array,Object],default:void 0},tfootClass:{default:void 0},tfootTrClass:{default:void 0},theadClass:{default:void 0},theadTrClass:{default:void 0},bordered:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},borderVariant:{default:void 0},captionTop:{type:Boolean,default:void 0},dark:{type:Boolean,default:void 0},fixed:{type:Boolean,default:void 0},hover:{type:Boolean,default:void 0},id:{default:void 0},noBorderCollapse:{type:Boolean,default:void 0},outlined:{type:Boolean,default:void 0},responsive:{type:[Boolean,String],default:void 0},small:{type:Boolean,default:void 0},stacked:{type:[Boolean,String],default:void 0},stickyHeader:{type:[Boolean,String,Number],default:void 0},striped:{type:Boolean,default:void 0},stripedColumns:{type:Boolean,default:void 0},variant:{default:void 0},tableAttrs:{},tableClass:{default:void 0}},emits:["head-clicked","row-clicked","row-dblclicked","row-contextmenu","row-hovered","row-unhovered","row-middle-clicked"],setup(m,{emit:w}){const s=te(m,"BTableLite"),t=w,y=Ge(),B=it(Xe,null),V=He(()=>s.id),J=o=>[o,o._showDetails],S=Je(new WeakMap);ae(()=>s.items,o=>{o.forEach(u=>{U(u)&&S.value.set(...J(u))})},{deep:!0,immediate:!0});const Y=f(()=>[s.tableClass,{[`align-${s.align}`]:s.align!==void 0}]),$=f(()=>{if(!s.fields.length&&s.items.length){const[o]=s.items;return o&&(U(o)||Array.isArray(o))?Object.keys(o).map(u=>{const a=_e(u);return{key:u,label:a,tdAttr:Te(s,a)}}):[{key:"",_noHeader:!0}]}return s.fields.map(o=>{if(ne(o)){const a=o.label??_e(o.key);return{...o,tdAttr:{...Te(s,a),...o.tdAttr}}}const u=_e(o);return{key:o,label:u,tdAttr:Te(s,u)}})}),x=f(()=>$.value.length),P=f(()=>!(x.value>0&&$.value.every(o=>o._noHeader===!0))),A=f(()=>({variant:s.footVariant??s.headVariant,class:s.tfootClass??s.theadClass})),ce=o=>y[`foot(${String(o)})`]?`foot(${String(o)})`:y["foot()"]?"foot()":y[`head(${String(o)})`]?`head(${String(o)})`:"head()",se=(o,u,a)=>{const p=D(o,u);return a&&typeof a=="function"?a(p,u,o):a},re=(o,u,a)=>{const p=String(u.key),i=D(o,p);return u.thAttr&&typeof u.thAttr=="function"?u.thAttr(i,p,o,a):u.thAttr},fe=(o,u,a=!1)=>{t("head-clicked",o.key,o,u,a)},me=o=>{if(U(o)){const u=S.value.get(o);S.value.set(o,!u),o._showDetails=!u}},ve=o=>[o.class,o.thClass,{"b-table-sticky-column":o.stickyColumn},s.fieldColumnClass?typeof s.fieldColumnClass=="function"?s.fieldColumnClass(o):s.fieldColumnClass:null],z=(o,u)=>{const a=D(u,String(o.key));return[o.class,typeof o.tdClass=="function"?o.tdClass(a,String(o.key),u):o.tdClass,U(u)&&u._cellVariants?.[o.key]?`table-${u._cellVariants?.[o.key]}`:null,{"b-table-sticky-column":o.stickyColumn}]},Ne=(o,u,a)=>{a.button===1&&!de(a)&&t("row-middle-clicked",o,u,a)},M=(o,u)=>s.tbodyTrAttrs?typeof s.tbodyTrAttrs=="function"?s.tbodyTrAttrs(o,u):s.tbodyTrAttrs:null,ie=(o,u)=>s.tbodyTrClass?typeof s.tbodyTrClass=="function"?s.tbodyTrClass(o,u):s.tbodyTrClass:null,Pe=o=>`${V.value}__row_${o}`,F=o=>o?.isRowHeader?Me:be,ge=o=>!!(B?.headerNavigation.value&&o.sortable===!0),Fe=f(()=>!!(B?.rowNavigation.value&&s.items.length>0)),he=(o,u,a=!1)=>{const{target:p,code:i}=u;p&&p.tagName!=="TH"&&document.activeElement===p||(i==="Enter"||i==="NumpadEnter"||i==="Space")&&(Ve(u),fe(o,u,a))},Re=(o,u,a)=>{const{target:p,code:i,shiftKey:Ie}=a;if(!(p&&p.tagName!=="TR"&&document.activeElement===p)){if(i==="Enter"||i==="NumpadEnter"||i==="Space"){Ve(a),t("row-clicked",o,u,a);return}(i===je||i===Le||i===We||i===ze)&&(Ve(a),ke(i,Ie,u))}},ke=(o,u,a)=>{const p=Array.from(document.querySelectorAll(`#${V.value} tbody tr[tabindex]`));if(p.length===0)return;let i=a;o===je?u?i=p.length-1:i=Math.min(a+1,p.length-1):o===Le?u?i=0:i=Math.max(a-1,0):o===ze?i=p.length-1:o===We&&(i=0),i!==a&&p[i]&&p[i].focus()},pe=f(()=>({...Ye(s,Qe),tableClass:Y.value,id:V.value}));return(o,u)=>(g(),H(mt,L(Ae(pe.value)),{default:k(()=>[y["table-colgroup"]?(g(),T("colgroup",Tt,[b(o.$slots,"table-colgroup",{fields:$.value})])):W("",!0),dt(O(Ct,{variant:d(s).headVariant,class:I(d(s).theadClass)},{default:k(()=>[b(o.$slots,"thead-top",{columns:x.value,fields:$.value}),O(q,{variant:d(s).headRowVariant,class:I(d(s).theadTrClass)},{default:k(()=>[(g(!0),T(Z,null,oe($.value,a=>(g(),H(Me,_({key:a.key,scope:a.scope,class:ve(a),title:a.headerTitle,variant:a.variant,abbr:a.headerAbbr,style:a.thStyle,tabindex:ge(a)?"0":void 0},{ref_for:!0},re(null,a,"top"),{onClick:p=>fe(a,p),onKeydown:p=>he(a,p)}),{default:k(()=>[b(o.$slots,y[`head(${String(a.key)})`]?`head(${String(a.key)})`:"head()",{label:a.label,column:a.key,field:a,isFoot:!1},()=>[le(ee(d($e)(a)),1)])]),_:2},1040,["scope","class","title","variant","abbr","style","tabindex","onClick","onKeydown"]))),128))]),_:3},8,["variant","class"]),y["thead-sub"]?(g(),H(q,{key:0},{default:k(()=>[(g(!0),T(Z,null,oe($.value,a=>(g(),H(be,{key:a.key,scope:"col",variant:a.variant,class:I([a.class,a.thClass])},{default:k(()=>[b(o.$slots,"thead-sub",{items:d(s).items,fields:$.value,field:a},()=>[le(ee(a.label),1)])]),_:2},1032,["variant","class"]))),128))]),_:3})):W("",!0)]),_:3},8,["variant","class"]),[[ut,P.value]]),O(gt,{class:I(d(s).tbodyClass)},{default:k(()=>[b(o.$slots,"custom-body",{fields:$.value,items:d(s).items,columns:x.value},()=>[!d(s).stacked&&y["top-row"]?(g(),H(q,_({key:0,class:ie(null,"row-top")},M(null,"row-top")),{default:k(()=>[b(o.$slots,"top-row",{columns:x.value,fields:$.value})]),_:3},16,["class"])):W("",!0),(g(!0),T(Z,null,oe(d(s).items,(a,p)=>(g(),T(Z,{key:d(s).primaryKey&&d(D)(a,d(s).primaryKey)?d(D)(a,d(s).primaryKey):p},[O(q,_({id:d(s).primaryKey&&d(D)(a,d(s).primaryKey)?Pe(d(D)(a,d(s).primaryKey)):void 0,class:ie(a,"row"),variant:d(U)(a)?a._rowVariant:void 0,tabindex:Fe.value?"0":void 0},{ref_for:!0},M(a,"row"),{onClick:i=>!d(de)(i)&&t("row-clicked",a,p,i),onDblclick:i=>!d(de)(i)&&t("row-dblclicked",a,p,i),onContextmenu:i=>!d(de)(i)&&t("row-contextmenu",a,p,i),onMouseenter:i=>!d(de)(i)&&t("row-hovered",a,p,i),onMouseleave:i=>!d(de)(i)&&t("row-unhovered",a,p,i),onMousedown:i=>Ne(a,p,i),onKeydown:i=>Re(a,p,i)}),{default:k(()=>[(g(!0),T(Z,null,oe($.value,i=>(g(),H(ct(F(i)),_({key:i.key,variant:d(U)(a)&&a._cellVariants?.[i.key]?null:i.variant,class:z(i,a)},{ref_for:!0},se(a,String(i.key),i.tdAttr)),{default:k(()=>[d(s).stacked&&d(s).labelStacked?(g(),T("label",$t,ee(d($e)(i)),1)):W("",!0),b(o.$slots,y[`cell(${String(i.key)})`]?`cell(${String(i.key)})`:"cell()",{value:d(Ke)(a,String(i.key),i.formatter),unformatted:d(D)(a,String(i.key)),index:p,item:a,field:i,items:o.items,toggleDetails:()=>me(a),detailsShowing:d(U)(a)?S.value.get(a)??!1:!1},()=>[!y[`cell(${String(i.key)})`]&&!y["cell()"]?(g(),T(Z,{key:0},[le(ee(d(Ke)(a,String(i.key),i.formatter)),1)],64)):W("",!0)])]),_:2},1040,["variant","class"]))),128))]),_:2},1040,["id","class","variant","tabindex","onClick","onDblclick","onContextmenu","onMouseenter","onMouseleave","onMousedown","onKeydown"]),d(U)(a)&&S.value.get(a)===!0&&y["row-details"]?(g(),T(Z,{key:0},[O(q,{"aria-hidden":"true",role:"presentation",class:"d-none"}),O(q,_({class:ie(a,"row-details"),variant:a._rowVariant},{ref_for:!0},M(a,"row-details")),{default:k(()=>[O(be,{colspan:x.value,class:I(o.detailsTdClass)},{default:k(()=>[b(o.$slots,"row-details",{item:a,toggleDetails:()=>me(a),fields:$.value,index:p})]),_:2},1032,["colspan","class"])]),_:2},1040,["class","variant"])],64)):W("",!0)],64))),128)),!d(s).stacked&&y["bottom-row"]?(g(),H(q,_({key:1,class:["bottom-row",ie(null,"row-bottom")]},M(null,"row-bottom")),{default:k(()=>[b(o.$slots,"bottom-row",{columns:x.value,fields:$.value})]),_:3},16,["class"])):W("",!0)])]),_:3},8,["class"]),d(s).footClone?(g(),H(Ue,L(_({key:1},A.value)),{default:k(()=>[O(q,{variant:d(s).footRowVariant??d(s).headRowVariant,class:I(d(s).tfootTrClass??d(s).theadTrClass)},{default:k(()=>[(g(!0),T(Z,null,oe($.value,a=>(g(),H(Me,_({key:a.key,scope:"col",class:ve(a),title:a.headerTitle,abbr:a.headerAbbr,style:a.thStyle,variant:a.variant,tabindex:ge(a)?"0":void 0},{ref_for:!0},re(null,a,"bottom"),{onClick:p=>fe(a,p,!0),onKeydown:p=>he(a,p,!0)}),{default:k(()=>[ue("div",At,[ue("div",null,[b(o.$slots,ce(a.key),{label:a.label,column:a.key,field:a,isFoot:!0},()=>[le(ee(d($e)(a)),1)])])])]),_:2},1040,["class","title","abbr","style","variant","tabindex","onClick","onKeydown"]))),128))]),_:3},8,["variant","class"])]),_:3},16)):y["custom-foot"]?(g(),H(Ue,L(_({key:2},A.value)),{default:k(()=>[b(o.$slots,"custom-foot",{fields:$.value,items:d(s).items,columns:x.value})]),_:3},16)):W("",!0),y["table-caption"]||d(s).caption?(g(),T("caption",Nt,[b(o.$slots,"table-caption",{},()=>[le(ee(d(s).caption),1)])])):W("",!0)]),_:3},16))}}),Ft=["d"],Rt="M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z",It="M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4z",Ee=G({__name:"SortIcon",props:{fieldInfo:{},sortBy:{},initialSortDirection:{}},setup(m){const w=m,l=f(()=>w.sortBy?.find(V=>V.key===w.fieldInfo.key)),s=f(()=>{if(l.value?.order)return l.value.order;const V=w.fieldInfo.initialSortDirection||w.initialSortDirection;return V==="last"?[...w.sortBy??[]].reverse().find(S=>S.order!==void 0)?.order||"asc":V==="desc"?"desc":"asc"}),t=f(()=>s.value==="desc"?It:Rt),y=f(()=>s.value==="desc"?"bi bi-arrow-down-short":"bi bi-arrow-up-short"),B=f(()=>l.value?.order?1:.4);return(V,J)=>(g(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:I(y.value),style:qe({opacity:B.value}),viewBox:"0 0 16 16","aria-hidden":"true"},[ue("path",{"fill-rule":"evenodd",d:t.value},null,8,Ft)],6))}}),Dt={role:"alert","aria-live":"polite"},Vt={class:"text-center my-2"},Kt=G({__name:"BTable",props:xe({provider:{type:Function,default:void 0},noProvider:{default:void 0},noProviderPaging:{type:Boolean,default:!1},noProviderSorting:{type:Boolean,default:!1},noProviderFiltering:{type:Boolean,default:!1},sortCompare:{type:Function,default:void 0},mustSort:{type:[Boolean,Array],default:!1},initialSortDirection:{default:"asc"},selectable:{type:Boolean,default:!1},multisort:{type:Boolean,default:!1},stickySelect:{type:Boolean,default:!1},selectHead:{type:[Boolean,String],default:!0},selectMode:{default:"multi"},selectionVariant:{default:"primary"},busyLoadingText:{default:"Loading..."},perPage:{default:Number.POSITIVE_INFINITY},currentPage:{default:1},filter:{default:void 0},filterFunction:{type:Function,default:void 0},filterable:{default:void 0},noLocalSorting:{type:Boolean,default:!1},noSelectOnClick:{type:Boolean,default:!1},noSortableIcon:{type:Boolean,default:!1},emptyFilteredText:{default:"There are no records matching your request"},emptyText:{default:"There are no records to show"},showEmpty:{type:Boolean,default:!1},align:{default:void 0},caption:{default:void 0},detailsTdClass:{default:void 0},fieldColumnClass:{type:[Function,String,Object,Array],default:void 0},fields:{default:()=>[]},footClone:{type:Boolean,default:void 0},footRowVariant:{default:void 0},footVariant:{default:void 0},headRowVariant:{default:void 0},headVariant:{default:void 0},items:{default:()=>[]},labelStacked:{type:Boolean,default:void 0},modelValue:{default:void 0},primaryKey:{default:void 0},tbodyClass:{default:void 0},tbodyTrAttrs:{},tbodyTrClass:{type:[Function,String,Array,Object],default:void 0},tfootClass:{default:void 0},tfootTrClass:{default:void 0},theadClass:{default:void 0},theadTrClass:{default:void 0},bordered:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},borderVariant:{default:void 0},captionTop:{type:Boolean,default:void 0},dark:{type:Boolean,default:void 0},fixed:{type:Boolean,default:void 0},hover:{type:Boolean,default:void 0},id:{default:void 0},noBorderCollapse:{type:Boolean,default:void 0},outlined:{type:Boolean,default:void 0},responsive:{type:[Boolean,String],default:void 0},small:{type:Boolean,default:void 0},stacked:{type:[Boolean,String],default:void 0},stickyHeader:{type:[Boolean,String,Number],default:void 0},striped:{type:Boolean,default:void 0},stripedColumns:{type:Boolean,default:void 0},variant:{default:void 0},tableAttrs:{},debounce:{default:0},debounceMaxWait:{default:Number.NaN}},{sortBy:{default:void 0},sortByModifiers:{},busy:{type:Boolean,default:!1},busyModifiers:{},selectedItems:{default:()=>[]},selectedItemsModifiers:{}}),emits:xe(["filtered","row-selected","row-unselected","sorted","change","head-clicked","row-clicked","row-dblclicked","row-contextmenu","row-hovered","row-unhovered","row-middle-clicked"],["update:sortBy","update:busy","update:selectedItems"]),setup(m,{expose:w,emit:l}){const t=te(m,"BTable"),y=l,B=Ge(),V=f(()=>Object.keys(B).filter(e=>e.startsWith("cell("))),J=f(()=>Object.keys(B).filter(e=>e.startsWith("foot("))),S=De(m,"sortBy"),Y=De(m,"busy"),$=De(m,"selectedItems"),x=He(()=>t.id),P=f({get:()=>new Set($.value),set:e=>{$.value=[...e]}});ae(P,(e,n)=>{Array.from(n).filter(r=>!e.has(r)).forEach(r=>{y("row-unselected",r)}),Array.from(e).filter(r=>!n.has(r)).forEach(r=>{y("row-selected",r)})});const A={add:e=>{const n=new Set(P.value);n.add(e),P.value=n},clear:()=>{P.value.forEach(e=>{A.delete(e)})},delete:e=>{const n=new Set(P.value);if(t.primaryKey){const r=t.primaryKey;$.value.forEach((c,v)=>{const C=D(c,r),h=D(e,r);C&&h&&C===h&&n.delete($.value[v])})}else n.delete(e);P.value=n},set:e=>{P.value=new Set(e)},has:e=>{if(!t.primaryKey)return P.value.has(e);const n=t.primaryKey;for(const r of P.value){const c=D(r,n),v=D(e,n);if(c&&v&&c===v)return!0}return!1}},ce=Je([]),se=Be(()=>t.perPage,{method:"parseInt"}),re=Be(()=>t.currentPage,{method:"parseInt"}),fe=Be(()=>t.debounce??0,{nanToZero:!0}),me=Be(()=>t.debounceMaxWait??Number.NaN),ve=f(()=>!!t.filter),z=f(()=>t.provider!==void 0),Ne=f(()=>P.value.size>0),M=f(()=>S.value!==void 0||t.fields.some(e=>typeof e=="object"&&e!==null&&e.sortable===!0)),ie=f(()=>!!(t.selectable&&!t.noSelectOnClick)),Pe=f(()=>!!M.value);vt(Xe,{rowNavigation:ie,headerNavigation:Pe});const F=f(()=>t.fields.map(e=>{if(!ne(e)){const c=_e(e);return{key:e,label:c,tdAttr:Te(t,c)}}const n=S.value?.find(c=>e.key===c.key),r=M.value===!1?void 0:n===void 0?"none":n.order==="desc"?"descending":n.order==="asc"?"ascending":"none";return{...e,thAttr:{"aria-sort":r,...e.thAttr}}})),ge=f(()=>({"b-table-busy":Y.value,"b-table-selectable":t.selectable,"user-select-none":t.selectable&&Ne.value,"b-table-fixed":t.fixed,"b-table-no-border-collapse":t.noBorderCollapse})),Fe=f(()=>[t.tbodyTrClass?typeof t.tbodyTrClass=="function"?t.tbodyTrClass(null,"table-busy"):t.tbodyTrClass:null]),he=e=>[{"b-table-sortable-column":M.value&&e.sortable}],Re=(e,n)=>[{[`selected table-${t.selectionVariant}`]:t.selectable&&!!e&&A.has(e)},t.tbodyTrClass?typeof t.tbodyTrClass=="function"?t.tbodyTrClass(e,n):t.tbodyTrClass:null],ke=e=>typeof e.sortByFormatted=="function"?e.sortByFormatted:e.formatter,pe=(e,n)=>{if(!U(e))return String(e);const r=F.value.find(v=>ne(v)?v.key===n:!1),c=D(e,n);if(ne(r)&&r.sortByFormatted){const v=ke(r);if(v)return String(Ke(e,String(r.key),v))}return typeof c=="object"&&c!==null?JSON.stringify(c):c?.toString()??""},o=f(()=>{const e=new Map;for(const n of F.value)ne(n)&&e.set(n.key,n);return e}),u=f(()=>{const e=S.value?.filter(v=>!!v.order),n=v=>{if(typeof v=="object"&&v!==null&&Object.keys(v).some(C=>C.includes("."))){let C={};for(const h in v)h.includes(".")?C=lt(C,h,v[h]):C[h]=v[h];return C}return v},r=v=>U(v)?Object.entries(v).some(([C,h])=>h==null||C[0]==="_"||!t.filterable?.includes(C)&&t.filterable?.length?!1:t.filterFunction&&typeof t.filterFunction=="function"?t.filterFunction(v,t.filter):(()=>{const X=F.value.find(j=>ne(j)?j.key===C:!1);if(ne(X)&&X.filterByFormatted){const j=ke(X);if(j)return String(j(h,String(X.key),v))}return typeof h=="object"?JSON.stringify(Object.values(h)):h.toString()})().toLowerCase().includes(t.filter?.toLowerCase()??"")):!0,c=(z.value?ce.value:t.items).reduce((v,C)=>{const h=n(C);return(!(ve.value&&(!z.value||t.noProviderFiltering))||r(h))&&v.push(h),v},[]);return e?.length&&(M.value===!0&&!z.value&&!t.noLocalSorting||M.value===!0&&z.value&&t.noProviderSorting)?c.sort((v,C)=>{for(let h=0;h<e.length;h++){const{key:K,order:Q}=e[h],j=o.value.get(K)?.sortCompare||t.sortCompare,N=j?j(v,C,K):pe(v,K).localeCompare(pe(C,K),void 0,{numeric:!0});if(N!==0)return Q==="asc"?N:-N}return 0}):c}),a=f(()=>({emptyFilteredText:t.emptyFilteredText,emptyText:t.emptyText,fields:F.value,items:u.value})),p=f(()=>Number.isNaN(se.value)||z.value&&!t.noProviderPaging?u.value:u.value.slice((re.value-1)*(se.value||Number.POSITIVE_INFINITY),re.value*(se.value||Number.POSITIVE_INFINITY)));ae(p,e=>{y("change",e)});const i=(e,n,r=!1,c=!1,v=!1)=>{if(t.selectable)if(t.selectMode==="single"||t.selectMode==="multi"){if(r||c)return;A.has(e)?A.delete(e):t.selectMode==="single"?A.set([e]):A.add(e)}else if(c||v)A.has(e)?A.delete(e):A.add(e);else if(r){const C=[...P.value].pop(),h=u.value.findIndex(j=>j===C),K=Math.min(h,n),Q=Math.max(h,n),X=u.value.slice(K,Q+1);A.set(X)}else A.set([e])},Ie=e=>{if(!M.value)return;const n=typeof e=="object"&&e!==null?e.key:e,r=typeof e=="object"&&e!==null?e.sortable:!1;if(!(M.value===!0&&r===!0))return;const c=()=>[...S.value??[]].reverse().find(R=>R.order!==void 0&&R.key!==n)?.order??"asc",v=()=>typeof e=="object"&&e!==null&&e.initialSortDirection?e.initialSortDirection==="last"?c():e.initialSortDirection:t.initialSortDirection?t.initialSortDirection==="last"?c():t.initialSortDirection:"asc",C=N=>{if(N===void 0)return v();const R=v(),ye=t.mustSort===!0||Array.isArray(t.mustSort)&&t.mustSort.includes(n);if(N==="asc")return R==="desc"?ye?"desc":void 0:"desc";if(N==="desc")return R==="desc"||ye?"asc":void 0},h=S.value?.findIndex(N=>N.key===n)??-1,K=S.value?.[h],Q=h===-1||!K?{key:n,order:v()}:{...K},X=()=>{const N=[...S.value??[]],R=Q;if(h===-1)N.push(R);else{const ye=C(R.order);ye?(R.order=ye,N.splice(h,1,R)):(R.order=void 0,N.splice(h,1))}return S.value=N,R},j=()=>{const N=h===-1?Q.order:C(Q.order),R={...Q,order:N};return S.value=N?[R]:[],R};y("sorted",t.multisort===!0?X():j())};let we=null;const Se=async()=>{if(!z.value||t.provider===void 0)return;we&&we.abort(),we=new AbortController;const{signal:e}=we;Y.value=!0;const n=t.provider({currentPage:re.value,filter:t.filter,sortBy:S.value,perPage:se.value,signal:e});try{const r=n instanceof Promise?await n:n;if(e.aborted||r===void 0)return;ce.value=r}catch(r){if(r instanceof Error&&r.name==="AbortError")return;throw r}finally{e.aborted||(Y.value=!1)}},Ze=pt(Se,fe,{maxWait:me}),Ce=async(e,n,r)=>{if(ft(n,r))return;const c=K=>t.noProvider?.includes(K)===!0,v=(e==="currentPage"||e==="perPage")&&(c("paging")||t.noProviderPaging===!0),C=e==="filter"&&(c("filtering")||t.noProviderFiltering===!0),h=(e==="sortBy"||e==="sortDesc")&&(c("sorting")||t.noProviderSorting===!0);v||C||h||(z.value===!0&&await Ze(),e==="currentPage"||e==="perPage"||y("filtered",[...u.value]))};ae(()=>t.filter,(e,n)=>{Ce("filter",e,n),!(e===n||z.value)&&(e||y("filtered",[...u.value]))}),ae(re,(e,n)=>{Ce("currentPage",e,n)}),ae(se,(e,n)=>{Ce("perPage",e,n)}),ae(S,(e,n)=>{Ce("sortBy",e,n)},{deep:!0}),ae(()=>t.provider,e=>{if(e===void 0){ce.value=[];return}Se()}),st(Se);const E={clearSelected:()=>{t.selectable&&A.clear()},selectAllRows:()=>{!t.selectable||t.selectMode==="single"||(P.value=new Set(u.value))},selectRow:e=>{if(!t.selectable)return;const n=u.value[e];!n||A.has(n)||(t.selectMode==="single"?A.set([n]):A.add(n))},unselectRow:e=>{if(!t.selectable)return;const n=u.value[e];!n||!A.has(n)||A.delete(n)},isRowSelected:e=>{if(!t.selectable)return!1;const n=u.value[e];return A.has(n)}},et={onHeadClicked:(e,n,r,c=!1)=>{y("head-clicked",e,n,r,c),Ie(n)},onRowClicked:(e,n,r)=>{t.noSelectOnClick===!1&&i(e,n,r.shiftKey,r.ctrlKey,r.metaKey),y("row-clicked",e,n,r)},onRowDblclicked:(...e)=>y("row-dblclicked",...e),onRowContextmenu:(...e)=>y("row-contextmenu",...e),onRowHovered:(...e)=>y("row-hovered",...e),onRowUnhovered:(...e)=>y("row-unhovered",...e),onRowMiddleClicked:(...e)=>y("row-middle-clicked",...e)},tt=f(()=>({...Ye(t,[...rt,...Qe]),tableAttrs:{ariaBusy:Y.value},items:p.value,fields:F.value,tableClass:ge.value,tbodyTrClass:Re,fieldColumnClass:he,id:x.value,...et}));return w({...E,items:u,displayItems:p,getStringValue:pe,refresh:Se}),(e,n)=>(g(),H(Pt,L(Ae(tt.value)),nt({"custom-body":k(r=>[Y.value&&B["table-busy"]?(g(),H(q,{key:0,class:I(["b-table-busy-slot",Fe.value])},{default:k(()=>[O(be,{colspan:r.fields.length},{default:k(()=>[b(e.$slots,"table-busy")]),_:2},1032,["colspan"])]),_:2},1032,["class"])):d(t).showEmpty===!0&&u.value.length===0?(g(),H(q,{key:1,class:"b-table-empty-row"},{default:k(()=>[O(be,{colspan:F.value.length},{default:k(()=>[ue("div",Dt,[ue("div",Vt,[ve.value?b(e.$slots,"empty-filtered",L(_({key:0},a.value)),()=>[le(ee(d(t).emptyFilteredText),1)]):b(e.$slots,"empty",L(_({key:1},a.value)),()=>[le(ee(d(t).emptyText),1)])])])]),_:3},8,["colspan"])]),_:3})):W("",!0)]),_:2},[B["table-colgroup"]?{name:"table-colgroup",fn:k(r=>[b(e.$slots,"table-colgroup",L(Ae(r)))]),key:"0"}:void 0,B["thead-top"]?{name:"thead-top",fn:k(r=>[b(e.$slots,"thead-top",_(r,{clearSelected:E.clearSelected,selectAllRows:E.selectAllRows,fields:F.value}))]),key:"1"}:void 0,B["thead-sub"]?{name:"thead-sub",fn:k(r=>[b(e.$slots,"thead-sub",_(r,{fields:F.value}))]),key:"2"}:void 0,B["top-row"]?{name:"top-row",fn:k(r=>[b(e.$slots,"top-row",_(r,{fields:F.value}))]),key:"3"}:void 0,B["row-details"]?{name:"row-details",fn:k(r=>[b(e.$slots,"row-details",_(r,{fields:F.value,selectRow:()=>E.selectRow(r.index),unselectRow:()=>E.unselectRow(r.index),rowSelected:E.isRowSelected(r.index)}))]),key:"4"}:void 0,B["bottom-row"]?{name:"bottom-row",fn:k(r=>[b(e.$slots,"bottom-row",_(r,{fields:F.value}))]),key:"5"}:void 0,B["custom-foot"]?{name:"custom-foot",fn:k(r=>[b(e.$slots,"custom-foot",_(r,{fields:F.value}))]),key:"6"}:void 0,B["table-caption"]?{name:"table-caption",fn:k(()=>[b(e.$slots,"table-caption")]),key:"7"}:void 0,oe(V.value,r=>({name:r,fn:k(c=>[b(e.$slots,r,_(c,{selectRow:()=>E.selectRow(c.index),unselectRow:()=>E.unselectRow(c.index),rowSelected:E.isRowSelected(c.index)}))])})),oe(J.value,r=>({name:r,fn:k(c=>[b(e.$slots,r,_(c,{selectAllRows:E.selectAllRows,clearSelected:E.clearSelected}))])})),oe(F.value,r=>({name:`head(${String(r.key)})`,fn:k(c=>[b(e.$slots,B[`head(${String(r.key)})`]?`head(${String(r.key)})`:"head()",_(c,{selectAllRows:E.selectAllRows,clearSelected:E.clearSelected}),()=>[le(ee(d($e)(r)),1)]),M.value&&c.field.sortable&&d(t).noSortableIcon===!1?(g(),T(Z,{key:0},[S.value?.find(v=>v.key===c.field.key)?.order==="asc"?b(e.$slots,B[`sortAsc(${String(c.field.key)})`]?`sortAsc(${String(c.field.key)})`:"sortAsc()",L(_({key:0},c)),()=>[O(Ee,{"field-info":c.field,"sort-by":S.value,"initial-sort-direction":d(t).initialSortDirection},null,8,["field-info","sort-by","initial-sort-direction"])]):S.value?.find(v=>v.key===c.field.key)?.order==="desc"?b(e.$slots,B[`sortDesc(${String(c.field.key)})`]?`sortDesc(${String(c.field.key)})`:"sortDesc()",L(_({key:1},c)),()=>[O(Ee,{"field-info":c.field,"sort-by":S.value,"initial-sort-direction":d(t).initialSortDirection},null,8,["field-info","sort-by","initial-sort-direction"])]):b(e.$slots,B[`sortDefault(${String(c.field.key)})`]?`sortDefault(${String(c.field.key)})`:"sortDefault()",L(_({key:2},c)),()=>[O(Ee,{"field-info":c.field,"sort-by":S.value,"initial-sort-direction":d(t).initialSortDirection},null,8,["field-info","sort-by","initial-sort-direction"])])],64)):W("",!0)])}))]),1040))}});export{mt as _,q as a,Ct as b,Me as c,Ue as d,be as e,gt as f,Pt as g,Kt as h,yt as u};
//# sourceMappingURL=BTable.vue_vue_type_script_setup_true_lang-D-2ysMDQ-BH0JviFb.js.map
