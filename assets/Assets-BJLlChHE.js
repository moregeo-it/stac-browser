const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MetadataGroups-BNNEd6B9.js","assets/index-BeUdzPby.js","assets/utils-B8zgF4c8.js","assets/_commonjsHelpers-CE1G-McA.js","assets/I18N-DlIXJTel.js","assets/index-Bt3LNNEE.css","assets/BCardText.vue_vue_type_script_setup_true_lang-SRGbviaO-B0MpVcYg.js","assets/index-BeQHwA0l.js","assets/StacFieldsMixin-yZuZx_15.js","assets/helper-DO3U350M.js","assets/datatypes-XrFOh23H.js","assets/index.esm-aL1O-Kk3.js","assets/util-ZWfmvpyz.js","assets/interface-BGVbBhV8.js","assets/BCard.vue_vue_type_script_setup_true_lang-9RhyvL8I-h_wbRVVM.js","assets/MetadataGroups-DSbVrFW-.css"])))=>i.map(i=>d[i]);
import{_ as L}from"./BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-w041gL2s.js";import{_ as j}from"./check-CmCIRzuU.js";import{_ as H,a as V}from"./chevron-down-BRks8pxi.js";import{S as B,f as F}from"./StacFieldsMixin-yZuZx_15.js";import{bk as S,cW as N,cL as O,bt as D,bu as I,bl as d,n as a,B as f,y as w,G as r,L as c,K as p,bs as U,p as i,q as l,I as v,ax as T,H as g}from"./index-BeUdzPby.js";import q from"./Description-D3_EhY0m.js";import{H as E}from"./HrefActions-dXz_N73U.js";import{S as G,j as b}from"./utils-B8zgF4c8.js";import{_ as P,a as R}from"./BAccordion.vue_vue_type_script_setup_true_lang-Ccx3zW5a-DR3hJu2y.js";import{_ as z,a as J}from"./BTabs.vue_vue_type_script_setup_true_lang-CU4B0ph2-BPtxp36L.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--Bp4EfxTV.js";import"./helper-DO3U350M.js";import"./I18N-DlIXJTel.js";import"./_commonjsHelpers-CE1G-McA.js";import"./datatypes-XrFOh23H.js";import"./BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-H_SBOxLy.js";import"./BCollapse.vue_vue_type_script_setup_true_lang-BUisG8-R-DOMiyizI.js";const Q={name:"AssetAlternative",components:{Description:q,HrefActions:E,MetadataGroups:D(()=>I(()=>import("./MetadataGroups-BNNEd6B9.js").then(t=>t.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])))},mixins:[B({formatMediaType:F.formatMediaType})],props:{asset:{type:Object,required:!0},hasAlternatives:{type:Boolean,default:!1},shown:{type:Boolean,default:!1}},emits:["show"],data(){return{ignore:["href","title","description","type","roles","proj:bbox","proj:geometry","table:storage_options","xarray:open_kwargs","xarray:storage_options","auth:refs","storage:refs","alternate","alternate:name"]}},computed:{context(){return this.asset.getContext()},resolvedAsset(){if(Array.isArray(this.asset["storage:refs"])){const t=new O(this.asset,this.asset.getKey(),this.context);return t["storage:schemes"]=this.resolveStorage(this.asset,this.context),t}return this.asset},tileRendererType(){return this.buildTileUrlTemplate&&!this.useTileLayerAsFallback?"server":"client"},fileFormat(){return typeof this.asset.type=="string"&&this.asset.type.length>0?this.formatMediaType(this.asset.type):null},auth(){return N.resolveAuth(this.asset,this.context)}},methods:{resolveStorage(t,e){if(e instanceof G&&b.size(t["storage:refs"])>0){const s=e.getMetadata("storage:schemes"),u={};for(const o of t["storage:refs"])b.isObject(s[o])&&(u[o]=s[o]);return u}return[]},show(){this.$emit("show",...arguments)}}},W=["innerHTML"],X={key:0,class:"mt-4"};function Y(t,e,s,u,o,n){const _=d("HrefActions"),y=d("Description"),m=d("MetadataGroups");return a(),f("div",null,[w("h4",{class:"mb-4",innerHTML:n.fileFormat},null,8,W),e[0]||(e[0]=r()),c(_,{isAsset:"",data:s.asset,shown:s.shown,onShow:n.show,auth:n.auth},null,8,["data","shown","onShow","auth"]),e[1]||(e[1]=r()),s.asset.description?(a(),f("div",X,[c(y,{description:s.asset.description,compact:""},null,8,["description"])])):p("",!0),e[2]||(e[2]=r()),c(m,{class:"mt-4",data:n.resolvedAsset,context:n.context,ignoreFields:o.ignore,title:"",type:"Asset"},null,8,["data","context","ignoreFields"])])}const Z=S(Q,[["render",Y]]),$={name:"Asset",components:{AssetAlternative:Z,BTab:J,BTabs:z,BAccordionItem:P},mixins:[B({formatMediaType:F.formatMediaType})],props:{asset:{type:Object,required:!0},definition:{type:Boolean,default:!1},expand:{type:Boolean,default:null},shown:{type:Boolean,default:!1}},emits:["show"],data(){return{expanded:!1}},computed:{...U(["stateQueryParameters"]),type(){return this.definition?"itemdef":"asset"},uid(){return`${this.type}-${this.asset.getKey().toLowerCase().replace(/[^\w]/g,"-")}`},title(){return this.asset.title||this.asset.getKey()},fileFormat(){return typeof this.asset.type=="string"&&this.asset.type.length>0?this.formatMediaType(this.asset.type):null},shortFileFormat(){return typeof this.asset.type=="string"&&this.asset.type.length>0?this.formatMediaType(this.asset.type,null,{shorten:!0}):null},alternatives(){if(!b.isObject(this.asset.alternate))return{};const t=this.asset.toJSON();delete t.alternate;const e={};for(const s in this.asset.alternate){const u=this.asset.alternate[s],o=Object.assign({},t,u.toJSON());e[s]=new O(o,s,u.getContext())}return e},hasAlternatives(){return b.size(this.alternatives)>0}},created(){if(this.stateQueryParameters[this.type].indexOf(this.uid)>-1){this.expanded=!0;return}typeof this.expand=="boolean"?this.expanded=this.expand:this.expanded=!1},methods:{displayRole(t){let e=`assets.role.${t}`;return this.$te(e)?this.$t(e):t},collapseToggled(t){let e=t?"openCollapsible":"closeCollapsible";this.$store.commit(e,{type:this.type,uid:this.uid})},show(){this.$emit("show",...arguments)}}},ee={class:"chevron","aria-hidden":"true"},te={class:"title"},se={class:"badges ms-1"},ne=["innerHTML"];function ae(t,e,s,u,o,n){const _=H,y=V,m=j,A=L,x=d("AssetAlternative"),k=d("b-tab"),C=d("b-tabs"),K=d("b-accordion-item");return a(),i(K,{id:n.uid,class:"asset expandable-card",modelValue:o.expanded,"onUpdate:modelValue":[e[0]||(e[0]=h=>o.expanded=h),n.collapseToggled]},{title:l(()=>[w("span",ee,[o.expanded?(a(),i(_,{key:0})):(a(),i(y,{key:1}))]),e[4]||(e[4]=r()),w("span",te,g(n.title),1),e[5]||(e[5]=r()),w("div",se,[s.shown?(a(),i(A,{key:0,variant:"success",class:"shown",title:t.$t("assets.currentlyShown")},{default:l(()=>[c(m),r(" "+g(t.$t("assets.shown")),1)]),_:1},8,["title"])):p("",!0),e[1]||(e[1]=r()),s.asset.deprecated?(a(),i(A,{key:1,variant:"warning",class:"deprecated"},{default:l(()=>[r(g(t.$t("deprecated")),1)]),_:1})):p("",!0),e[2]||(e[2]=r()),Array.isArray(s.asset.roles)?(a(!0),f(v,{key:2},T(s.asset.roles,h=>(a(),i(A,{key:h,variant:h==="data"?"primary":"secondary",class:"role"},{default:l(()=>[r(g(n.displayRole(h)),1)]),_:2},1032,["variant"]))),128)):p("",!0),e[3]||(e[3]=r()),n.shortFileFormat?(a(),i(A,{key:3,variant:"dark",class:"format",title:n.fileFormat},{default:l(()=>[w("span",{innerHTML:n.shortFileFormat},null,8,ne)]),_:1},8,["title"])):p("",!0)])]),default:l(()=>[e[7]||(e[7]=r()),n.hasAlternatives?(a(),i(C,{key:0,"content-class":"mt-3",lazy:""},{default:l(()=>[c(k,{title:s.asset["alternate:name"]||t.$t("assets.alternate.main"),active:""},{default:l(()=>[c(x,{asset:s.asset,shown:s.shown,hasAlternatives:"",onShow:n.show},null,8,["asset","shown","onShow"])]),_:1},8,["title"]),e[6]||(e[6]=r()),(a(!0),f(v,null,T(n.alternatives,(h,M)=>(a(),i(k,{title:h["alternate:name"]||M,key:M},{default:l(()=>[c(x,{asset:h,shown:s.shown,hasAlternatives:"",onShow:n.show},null,8,["asset","shown","onShow"])]),_:2},1032,["title"]))),128))]),_:1})):(a(),i(x,{key:1,asset:s.asset,shown:s.shown,onShow:n.show},null,8,["asset","shown","onShow"]))]),_:1},8,["id","modelValue","onUpdate:modelValue"])}const re=S($,[["render",ae]]),oe={name:"Assets",components:{Asset:re,BAccordion:R},props:{assets:{type:Array,required:!0},shown:{type:Array,default:()=>[]},context:{type:Object,default:null},definition:{type:Boolean,default:!1},title:{type:String,default:null}},emits:["showAsset"],computed:{shownKeys(){return this.shown.filter(t=>t.isAsset()).map(t=>t.getKey())},displayTitle(){if(this.title===null){let t=this.definition?"assets.inItems":"stacAssets";return this.$t(t,this.assets.length)}else return this.title},expand(){return this.definition?!1:this.assets.length===1&&this.context&&this.context.isItem()?!0:null}},methods:{show(){this.$emit("showAsset",...arguments)}}},ie={class:"assets mb-4"},le={key:0};function de(t,e,s,u,o,n){const _=d("Asset"),y=d("b-accordion");return a(),f("section",ie,[n.displayTitle?(a(),f("h2",le,g(n.displayTitle),1)):p("",!0),e[0]||(e[0]=r()),c(y,null,{default:l(()=>[(a(!0),f(v,null,T(s.assets,m=>(a(),i(_,{asset:m,expand:n.expand,context:s.context,definition:s.definition,shown:n.shownKeys.includes(m.getKey()),key:m.getKey(),onShow:n.show},null,8,["asset","expand","context","definition","shown","onShow"]))),128))]),_:1})])}const Me=S(oe,[["render",de]]);export{Me as default};
//# sourceMappingURL=Assets-BJLlChHE.js.map
