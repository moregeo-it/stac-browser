import{r as h,g as q,i as _,bV as D,c as M,aE as k,s as A,bY as S,ay as F,a2 as T,d as U,m as W,e as G,h as K,j,G as E,x as P,B as t,H as R}from"./index-DPmgT0xU.js";import{a as w,u as H}from"./useStateClass-BGbSLWFN-BNuqkYB7.js";import{u as Y}from"./debounce-BHqBzJ1a-bWdYcPta.js";const Z=(a,s)=>{if(a===null)return;let l=a;if(s.number&&typeof l=="string"&&l!==""){const e=Number.parseFloat(l);l=Number.isNaN(e)?l:e}return l},$=(a,s,l,e)=>{const i=h(0),c=q(()=>a.id,"input"),m=F(()=>a.debounce??0,{nanToZero:!0}),N=F(()=>a.debounceMaxWait??Number.NaN),z=_(D,null)?.(c),p=M(()=>a.state!==void 0?a.state:z?.state.value??null),g=w(()=>a.ariaInvalid,p),B=H(p),I=Y(o=>{l.value=o},()=>e.lazy===!0?0:m.value,{maxWait:()=>e.lazy===!0?Number.NaN:N.value}),v=(o,r=!1,n=!1)=>{e.lazy===!0&&r===!1||(n?l.value=o:I(o))},{focused:y}=k(s,{initialValue:a.autofocus}),b=(o,r,n=!1)=>a.formatter!==void 0&&(!a.lazyFormatter||n)?a.formatter(o,r):o;return A(()=>{s.value&&(s.value.value=l.value?.toString()??"")}),S(()=>{T(()=>{a.autofocus&&(y.value=!0)})}),{input:s,computedId:c,computedAriaInvalid:g,onInput:o=>{const{value:r}=o.target,n=b(r,o);if(o.defaultPrevented){o.preventDefault();return}v(n)},onChange:o=>{const{value:r}=o.target,n=b(r,o);if(o.defaultPrevented){o.preventDefault();return}const x=n;l.value!==x&&v(n,!0)},onBlur:o=>{if(!e.lazy&&!a.lazyFormatter&&!e.trim&&m.value<=0)return;const{value:r}=o.target,n=b(r,o,!0),x=e.trim?n.trim():n,V=x.length!==n.length;I.cancel(),l.value!==x&&v(n,!0,!0),e.trim&&V&&(i.value=i.value+1)},focus:()=>{a.disabled||(y.value=!0)},blur:()=>{a.disabled||(y.value=!1)},forceUpdateKey:i,stateClass:B}},J=["id","value","name","form","type","disabled","placeholder","required","autocomplete","readonly","min","max","step","list","aria-required","aria-invalid"],ee=U({__name:"BFormInput",props:W({max:{default:void 0},min:{default:void 0},step:{default:void 0},type:{default:"text"},ariaInvalid:{type:[Boolean,String],default:void 0},autocomplete:{default:void 0},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{default:void 0},formatter:{type:Function,default:void 0},id:{default:void 0},lazyFormatter:{type:Boolean,default:!1},list:{default:void 0},name:{default:void 0},placeholder:{default:void 0},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{default:void 0},state:{type:[Boolean,null],default:void 0},debounce:{default:0},debounceMaxWait:{default:Number.NaN}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(a,{expose:s}){const e=G(a,"BFormInput"),[i,c]=K(a,"modelValue",{set:d=>Z(d,c)}),m=j("_input"),{computedId:N,computedAriaInvalid:z,onInput:p,onChange:g,onBlur:B,stateClass:I,focus:v,blur:y,forceUpdateKey:b}=$(e,m,i,c),C=M(()=>{const d=e.type==="range",u=e.type==="color";return[I.value,{"form-range":d,"form-control":u||!e.plaintext&&!d,"form-control-color":u,"form-control-plaintext":e.plaintext&&!d&&!u,[`form-control-${e.size}`]:!!e.size}]});return s({blur:y,element:m,focus:v}),(d,u)=>(P(),E("input",{id:t(N),ref:"_input",key:t(b),value:t(i),class:R(C.value),name:t(e).name||void 0,form:t(e).form||void 0,type:t(e).type,disabled:t(e).disabled,placeholder:t(e).placeholder,required:t(e).required||void 0,autocomplete:t(e).autocomplete||void 0,readonly:t(e).readonly||t(e).plaintext,min:t(e).min,max:t(e).max,step:t(e).step,list:t(e).type!=="password"?t(e).list:void 0,"aria-required":t(e).required||void 0,"aria-invalid":t(z),onInput:u[0]||(u[0]=(...f)=>t(p)&&t(p)(...f)),onChange:u[1]||(u[1]=(...f)=>t(g)&&t(g)(...f)),onBlur:u[2]||(u[2]=(...f)=>t(B)&&t(B)(...f))},null,42,J))}});export{ee as _,Z as n,$ as u};
//# sourceMappingURL=BFormInput.vue_vue_type_script_setup_true_lang-D3z3jxbI-CMaDDDlG.js.map
