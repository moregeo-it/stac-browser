const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GeoJSON-dVJCj0SI.js","assets/index-DLQIbJqc.js","assets/utils-B7F_ho2D.js","assets/_commonjsHelpers-CE1G-McA.js","assets/I18N-DlIXJTel.js","assets/index-Dw8SzqbY.css","assets/BFormRadioGroup.vue_vue_type_script_setup_true_lang-LQBMttYK-CW7mqt87.js","assets/useStateClass-BGbSLWFN-DVCkhww4.js","assets/ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--D04gVupl.js","assets/GeoJSON-Bh2emOAl.css","assets/bootstrap-vue-next-BcxQ-4nT.js","assets/BOffcanvas.vue_vue_type_script_setup_true_lang-B6EHNFA6-ORsuhxBX.js","assets/BAccordion.vue_vue_type_script_setup_true_lang-Bm1RghW9-BiX2x-2q.js","assets/BTabs.vue_vue_type_script_setup_true_lang-DJniJmO4-DqkkB-SW.js","assets/BCollapse.vue_vue_type_script_setup_true_lang-B8TqF-kB-DiZzKXJc.js","assets/BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-Csj99Gv7.js","assets/BTable.vue_vue_type_script_setup_true_lang-D-2ysMDQ-BH0JviFb.js","assets/debounce-BHqBzJ1a-BZDj8VL8.js","assets/BCard.vue_vue_type_script_setup_true_lang-BjoxuViz-CtHr40D7.js","assets/BCardText.vue_vue_type_script_setup_true_lang-SRGbviaO-C7gcSv8b.js","assets/BDropdownText.vue_vue_type_script_setup_true_lang-Cm6QYE9x-Cw8y974t.js","assets/BForm.vue_vue_type_script_setup_true_lang-u44ElAm9-D92kQWfy.js","assets/BFormSelect.vue_vue_type_script_setup_true_lang-CkLgnxVA-BKCbqw72.js","assets/BFormGroup.vue_vue_type_script_setup_true_lang-BmZN8qcE-DWeOhU7e.js","assets/BFormCheckboxGroup.vue_vue_type_script_setup_true_lang-CZ2qJTp0-RH7SmsHg.js","assets/BFormInput.vue_vue_type_script_setup_true_lang-D3z3jxbI-CJtUD2WG.js","assets/BInputGroupText.vue_vue_type_script_setup_true_lang-BBN5F0A4-aOzNWSRc.js","assets/BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-uP3pKCjA.js","assets/Features-Bhlu8ydW.js","assets/helper-CaHhXSPV.js","assets/helper-DO3U350M.js","assets/datatypes-XrFOh23H.js","assets/Catalogs-D46bBwoK.js","assets/CardMixin-DyfOw87u.js","assets/StacFieldsMixin-c9dxzqw7.js","assets/Loading-CF4Zspxf.js","assets/Loading-BLYcl2tz.css","assets/Catalogs-CbWoa7rf.css","assets/Items-CsFJGy65.js"])))=>i.map(i=>d[i]);
import{bk as $,bp as te,cH as le,cI as Ht,cJ as Kt,cK as Jt,cL as qt,bf as Xt,bm as Yt,bo as ce,bg as W,G as Qt,x as V,E as ue,L as Q,v as N,z as We,P as Ne,y as $e,_ as er,M as tr}from"./index-DLQIbJqc.js";import{I as rr,s as sr,n as He,a as ir,T as Ke,C as nr,g as ee,b as he,V as Ee,c as ar,F as Je,d as or,e as qe,B as mt,f as ve,E as lr,h as gt,S as cr,i as ur,j as hr,k as fr,l as Xe,m as Ye,o as dr,p as mr,q as gr,t as yr,r as pr,u as _r,v as wr,w as vr,x as br,y as Tr,z as xr,A as Lr,P as Sr,L as Ar,D as Mr,G as Qe,H as yt,J as Er,M as Cr,K as Pr,N as Ir,O as Fr}from"./GeoJSON-dVJCj0SI.js";import Or from"./WMTSCapabilities-C0U6Xen5.js";import Rr from"./Image-Bz1alTmP.js";import et from"./Tile-h1JwAVEG.js";import Ur from"./VectorTile-DP4xcBbe.js";import tt from"./WebGLTile-ED5JhH4F.js";import jr from"./ImageStatic-D5r8yUO2.js";import Dr from"./TileJSON--1uWnHVM.js";import Br from"./TileWMS-BIYBpkoh.js";import{V as pt}from"./VectorTile-C-k2biOI.js";import Gr,{optionsFromCapabilities as kr}from"./WMTS-DPGdZ9bK.js";import rt from"./XYZ-DGlcwip7.js";import _t from"./DataTile-X66Qju27.js";import{c as wt,e as vt}from"./Tile-oJI9PQZQ.js";import{M as zr}from"./MVT-x-zIVQeZ.js";import fe from"./index-D4IycDHn.js";import{a as be,t as Vr,n as Zr,p as st,u as Wr,c as Nr}from"./utils-B7F_ho2D.js";import{f as $r,a as Hr,b as Kr,P as Jr,p as qr}from"./geotiff-DWVLGtuA.js";import{T as Xr}from"./TileGrid-DzNPHZK1.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./BFormRadioGroup.vue_vue_type_script_setup_true_lang-LQBMttYK-CW7mqt87.js";import"./useStateClass-BGbSLWFN-DVCkhww4.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--D04gVupl.js";import"./ImageLayer-Bb3JmA-j.js";import"./BaseImage-0-JC93Ph.js";import"./TileLayer-Co3HYvfJ.js";import"./DataTile-B7a7Je00.js";import"./Tile-G7aX-9AV.js";import"./Tile-C6wKdysJ.js";import"./common-D17H8Wti.js";import"./TileRange-2Tc-Ry00.js";import"./LRUCache-D3qbVE6m.js";import"./tilecoord-CR7vLr2I.js";import"./BaseTile-BU6ZW8RS.js";import"./TileProperty-BF4LcWSy.js";import"./compileUtil-DE-8w3AG.js";import"./mat4-CeypvY8Z.js";import"./Image-BUhvsjjs.js";import"./resolution-CU8ppKQ3.js";import"./common-9rOs42pz.js";import"./static-5Zd9MtS7.js";import"./net-DJ7xUrBu.js";import"./tileurlfunction-Bbs9UhLX.js";import"./uri-BP_XjvpC.js";import"./TileImage-CEJVvt16.js";import"./UrlTile-CFIfXLkZ.js";import"./TileEventType-CTN_nmJ7.js";import"./wms-Dp9X4DZG.js";import"./__vite-browser-external-DrV_kz0N.js";const Yr={SELECT:"select"};class Qr extends mt{constructor(e,t,r,i){super(e),this.selected=t,this.deselected=r,this.mapBrowserEvent=i}}const de={};class Ce extends rr{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:sr,this.addCondition_=e.addCondition?e.addCondition:He,this.removeCondition_=e.removeCondition?e.removeCondition:He,this.toggleCondition_=e.toggleCondition?e.toggleCondition:ir,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Ke,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:es(),this.features_=e.features||new nr;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const r=e.layers;t=function(i){return r.includes(i)}}else t=Ke;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[ee(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[ee(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(he.ADD,this.boundAddFeature_),this.features_.addEventListener(he.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(he.ADD,this.boundAddFeature_),this.features_.removeEventListener(he.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const r=this.getMap().getAllLayers().find(function(i){if(i instanceof Ee&&i.getSource()&&i.getSource().hasFeature(t))return i});r&&this.addFeatureLayerAssociation_(t,r)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=ee(e);t in de||(de[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let i=t.length-1;i>=0;--i){const n=t[i];if(n!==this&&n instanceof Ce&&n.getStyle()&&n.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(n.getStyle());return}}const r=ee(e);e.setStyle(de[r]),delete de[r]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[ee(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),n=!t&&!r&&!i,a=e.map,o=this.getFeatures(),l=[],h=[];if(n){ar(this.featureLayerAssociation_),a.forEachFeatureAtPixel(e.pixel,(u,c)=>{if(!(!(u instanceof Je)||!this.filter_(u,c)))return this.addFeatureLayerAssociation_(u,c),h.push(u),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=o.getLength()-1;u>=0;--u){const c=o.item(u),f=h.indexOf(c);f>-1?h.splice(f,1):(o.remove(c),l.push(c))}h.length!==0&&o.extend(h)}else{a.forEachFeatureAtPixel(e.pixel,(u,c)=>{if(!(!(u instanceof Je)||!this.filter_(u,c)))return(t||i)&&!o.getArray().includes(u)?(this.addFeatureLayerAssociation_(u,c),h.push(u)):(r||i)&&o.getArray().includes(u)&&(l.push(u),this.removeFeatureLayerAssociation_(u)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=l.length-1;u>=0;--u)o.remove(l[u]);o.extend(h)}return(h.length>0||l.length>0)&&this.dispatchEvent(new Qr(Yr.SELECT,h,l,e)),!0}}function es(){const s=or();return qe(s.Polygon,s.LineString),qe(s.GeometryCollection,s.LineString),function(e){return e.getGeometry()?s[e.getGeometry().getType()]:null}}var O=Uint8Array,J=Uint16Array,ts=Int32Array,bt=new O([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Tt=new O([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rs=new O([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xt=function(s,e){for(var t=new J(31),r=0;r<31;++r)t[r]=e+=1<<s[r-1];for(var i=new ts(t[30]),r=1;r<30;++r)for(var n=t[r];n<t[r+1];++n)i[n]=n-t[r]<<5|r;return{b:t,r:i}},Lt=xt(bt,2),St=Lt.b,ss=Lt.r;St[28]=258,ss[258]=28;var is=xt(Tt,0),ns=is.b,Ae=new J(32768);for(var x=0;x<32768;++x){var z=(x&43690)>>1|(x&21845)<<1;z=(z&52428)>>2|(z&13107)<<2,z=(z&61680)>>4|(z&3855)<<4,Ae[x]=((z&65280)>>8|(z&255)<<8)>>1}var se=(function(s,e,t){for(var r=s.length,i=0,n=new J(e);i<r;++i)s[i]&&++n[s[i]-1];var a=new J(e);for(i=1;i<e;++i)a[i]=a[i-1]+n[i-1]<<1;var o;if(t){o=new J(1<<e);var l=15-e;for(i=0;i<r;++i)if(s[i])for(var h=i<<4|s[i],u=e-s[i],c=a[s[i]-1]++<<u,f=c|(1<<u)-1;c<=f;++c)o[Ae[c]>>l]=h}else for(o=new J(r),i=0;i<r;++i)s[i]&&(o[i]=Ae[a[s[i]-1]++]>>15-s[i]);return o}),ae=new O(288);for(var x=0;x<144;++x)ae[x]=8;for(var x=144;x<256;++x)ae[x]=9;for(var x=256;x<280;++x)ae[x]=7;for(var x=280;x<288;++x)ae[x]=8;var At=new O(32);for(var x=0;x<32;++x)At[x]=5;var as=se(ae,9,1),os=se(At,5,1),Te=function(s){for(var e=s[0],t=1;t<s.length;++t)s[t]>e&&(e=s[t]);return e},D=function(s,e,t){var r=e/8|0;return(s[r]|s[r+1]<<8)>>(e&7)&t},xe=function(s,e){var t=e/8|0;return(s[t]|s[t+1]<<8|s[t+2]<<16)>>(e&7)},ls=function(s){return(s+7)/8|0},cs=function(s,e,t){return(t==null||t>s.length)&&(t=s.length),new O(s.subarray(e,t))},us=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],F=function(s,e,t){var r=new Error(e||us[s]);if(r.code=s,Error.captureStackTrace&&Error.captureStackTrace(r,F),!t)throw r;return r},Pe=function(s,e,t,r){var i=s.length,n=0;if(!i||e.f&&!e.l)return t||new O(0);var a=!t,o=a||e.i!=2,l=e.i;a&&(t=new O(i*3));var h=function(ze){var Ve=t.length;if(ze>Ve){var Ze=new O(Math.max(Ve*2,ze));Ze.set(t),t=Ze}},u=e.f||0,c=e.p||0,f=e.b||0,m=e.l,_=e.d,y=e.m,d=e.n,g=i*8;do{if(!m){u=D(s,c,1);var w=D(s,c+1,3);if(c+=3,w)if(w==1)m=as,_=os,y=9,d=5;else if(w==2){var B=D(s,c,31)+257,S=D(s,c+10,15)+4,E=B+D(s,c+5,31)+1;c+=14;for(var b=new O(E),A=new O(19),M=0;M<S;++M)A[rs[M]]=D(s,c+M*3,7);c+=S*3;for(var U=Te(A),q=(1<<U)-1,X=se(A,U,1),M=0;M<E;){var j=X[D(s,c,q)];c+=j&15;var p=j>>4;if(p<16)b[M++]=p;else{var G=0,oe=0;for(p==16?(oe=3+D(s,c,3),c+=2,G=b[M-1]):p==17?(oe=3+D(s,c,7),c+=3):p==18&&(oe=11+D(s,c,127),c+=7);oe--;)b[M++]=G}}var De=b.subarray(0,B),k=b.subarray(B);y=Te(De),d=Te(k),m=se(De,y,1),_=se(k,d,1)}else F(1);else{var p=ls(c)+4,I=s[p-4]|s[p-3]<<8,P=p+I;if(P>i){l&&F(0);break}o&&h(f+I),t.set(s.subarray(p,P),f),e.b=f+=I,e.p=c=P*8,e.f=u;continue}if(c>g){l&&F(0);break}}o&&h(f+131072);for(var Wt=(1<<y)-1,Nt=(1<<d)-1,pe=c;;pe=c){var G=m[xe(s,c)&Wt],Z=G>>4;if(c+=G&15,c>g){l&&F(0);break}if(G||F(2),Z<256)t[f++]=Z;else if(Z==256){pe=c,m=null;break}else{var Be=Z-254;if(Z>264){var M=Z-257,Y=bt[M];Be=D(s,c,(1<<Y)-1)+St[M],c+=Y}var _e=_[xe(s,c)&Nt],we=_e>>4;_e||F(3),c+=_e&15;var k=ns[we];if(we>3){var Y=Tt[we];k+=xe(s,c)&(1<<Y)-1,c+=Y}if(c>g){l&&F(0);break}o&&h(f+131072);var Ge=f+Be;if(f<k){var ke=n-k,$t=Math.min(k,Ge);for(ke+f<0&&F(3);f<$t;++f)t[f]=r[ke+f]}for(;f<Ge;++f)t[f]=t[f-k]}}e.l=m,e.p=pe,e.b=f,e.f=u,m&&(u=1,e.m=y,e.d=_,e.n=d)}while(!u);return f!=t.length&&a?cs(t,0,f):t.subarray(0,f)},hs=new O(0),fs=function(s){(s[0]!=31||s[1]!=139||s[2]!=8)&&F(6,"invalid gzip data");var e=s[3],t=10;e&4&&(t+=(s[10]|s[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!s[t++]);return t+(e&2)},ds=function(s){var e=s.length;return(s[e-4]|s[e-3]<<8|s[e-2]<<16|s[e-1]<<24)>>>0},ms=function(s,e){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&F(6,"invalid zlib data"),(s[1]>>5&1)==1&&F(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function gs(s,e){return Pe(s,{i:2},e,e)}function ys(s,e){var t=fs(s);return t+8>s.length&&F(6,"invalid gzip data"),Pe(s.subarray(t,-8),{i:2},new O(ds(s)),e)}function ps(s,e){return Pe(s.subarray(ms(s),-4),{i:2},e,e)}function _s(s,e){return s[0]==31&&s[1]==139&&s[2]==8?ys(s,e):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?gs(s,e):ps(s,e)}var ws=typeof TextDecoder<"u"&&new TextDecoder,vs=0;try{ws.decode(hs,{stream:!0}),vs=1}catch{}var bs=Object.defineProperty,ie=Math.pow,v=(s,e)=>bs(s,"name",{value:e,configurable:!0}),C=(s,e,t)=>new Promise((r,i)=>{var n=l=>{try{o(t.next(l))}catch(h){i(h)}},a=l=>{try{o(t.throw(l))}catch(h){i(h)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(n,a);o((t=t.apply(s,e)).next())});v((s,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:v((n,a)=>{let o=document.createElement("img"),l=new AbortController,h=l.signal;return o.cancel=()=>{l.abort()},t||(s.getHeader().then(u=>{u.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):u.tileType===2?r="image/png":u.tileType===3?r="image/jpeg":u.tileType===4?r="image/webp":u.tileType===5&&(r="image/avif")}),t=!0),s.getZxy(n.z,n.x,n.y,h).then(u=>{if(u){let c=new Blob([u.data],{type:r}),f=window.URL.createObjectURL(c);o.src=f,o.cancel=void 0,a(void 0,o)}}).catch(u=>{if(u.name!=="AbortError")throw u}),o},"createTile"),_removeTile:v(function(n){let a=this._tiles[n];a&&(a.el.cancel&&a.el.cancel(),a.el.width=0,a.el.height=0,a.el.deleted=!0,L.DomUtil.remove(a.el),delete this._tiles[n],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(n)}))},"_removeTile")});return new i(e)},"leafletRasterLayer");var Ts=v(s=>(e,t)=>{if(t instanceof AbortController)return s(e,t);let r=new AbortController;return s(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:v(()=>r.abort(),"cancel")}},"v3compat"),xs=class{constructor(e){this.tilev4=v((t,r)=>C(this,null,function*(){if(t.type==="json"){let m=t.url.substr(10),_=this.tiles.get(m);if(_||(_=new ne(m),this.tiles.set(m,_)),this.metadata)return{data:yield _.getTileJson(t.url)};let y=yield _.getHeader();return(y.minLon>=y.maxLon||y.minLat>=y.maxLat)&&console.error(`Bounds of PMTiles archive ${y.minLon},${y.minLat},${y.maxLon},${y.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:y.minZoom,maxzoom:y.maxZoom,bounds:[y.minLon,y.minLat,y.maxLon,y.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),n=t.url.match(i);if(!n)throw new Error("Invalid PMTiles protocol URL");let a=n[1],o=this.tiles.get(a);o||(o=new ne(a),this.tiles.set(a,o));let l=n[2],h=n[3],u=n[4],c=yield o.getHeader(),f=yield o?.getZxy(+l,+h,+u,r.signal);if(f)return{data:new Uint8Array(f.data),cacheControl:f.cacheControl,expires:f.expires};if(c.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=Ts(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};v(xs,"Protocol");function Mt(s,e){return(e>>>0)*4294967296+(s>>>0)}v(Mt,"toNum");function Et(s,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return Mt(s,i);throw new Error("Expected varint not more than 10 bytes")}v(Et,"readVarintRemainder");function H(s){let e=s.buf,t=e[s.pos++],r=t&127;return t<128||(t=e[s.pos++],r|=(t&127)<<7,t<128)||(t=e[s.pos++],r|=(t&127)<<14,t<128)||(t=e[s.pos++],r|=(t&127)<<21,t<128)?r:(t=e[s.pos],r|=(t&15)<<28,Et(r,s))}v(H,"readVarint");function Ie(s,e,t,r){if(r===0){t===1&&(e[0]=s-1-e[0],e[1]=s-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}v(Ie,"rotate");function Ct(s,e){let t=ie(2,s),r=e,i=e,n=e,a=[0,0],o=1;for(;o<t;)r=1&n/2,i=1&(n^r),Ie(o,a,r,i),a[0]+=o*r,a[1]+=o*i,n=n/4,o*=2;return[s,a[0],a[1]]}v(Ct,"idOnLevel");var Ls=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function Pt(s,e,t){if(s>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>ie(2,s)-1||t>ie(2,s)-1)throw new Error("tile x/y outside zoom level bounds");let r=Ls[s],i=ie(2,s),n=0,a=0,o=0,l=[e,t],h=i/2;for(;h>0;)n=(l[0]&h)>0?1:0,a=(l[1]&h)>0?1:0,o+=h*h*(3*n^a),Ie(h,l,n,a),h=h/2;return r+o}v(Pt,"zxyToTileId");function Ss(s){let e=0;for(let t=0;t<27;t++){let r=(1<<t)*(1<<t);if(e+r>s)return Ct(t,s-e);e+=r}throw new Error("Tile zoom level exceeds max safe number limit (26)")}v(Ss,"tileIdToZxy");var As=(s=>(s[s.Unknown=0]="Unknown",s[s.None=1]="None",s[s.Gzip=2]="Gzip",s[s.Brotli=3]="Brotli",s[s.Zstd=4]="Zstd",s))(As||{});function ge(s,e){return C(this,null,function*(){if(e===1||e===0)return s;if(e===2){if(typeof globalThis.DecompressionStream>"u")return _s(new Uint8Array(s));let t=new Response(s).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}v(ge,"defaultDecompress");var K=(s=>(s[s.Unknown=0]="Unknown",s[s.Mvt=1]="Mvt",s[s.Png=2]="Png",s[s.Jpeg=3]="Jpeg",s[s.Webp=4]="Webp",s[s.Avif=5]="Avif",s))(K||{});function It(s){return s===1?".mvt":s===2?".png":s===3?".jpg":s===4?".webp":s===5?".avif":""}v(It,"tileTypeExt");var Ms=127;function Ft(s,e){let t=0,r=s.length-1;for(;t<=r;){let i=r+t>>1,n=e-s[i].tileId;if(n>0)t=i+1;else if(n<0)r=i-1;else return s[i]}return r>=0&&(s[r].runLength===0||e-s[r].tileId<s[r].runLength)?s[r]:null}v(Ft,"findTile");var Es=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return C(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};v(Es,"FileSource");var Ot=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");let i=r.indexOf("Windows")>-1,n=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,i&&n&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return C(this,null,function*(){let n,a;r?a=r:(n=new AbortController,a=n.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let l;this.mustReload?l="reload":this.chromeWindowsNoCache&&(l="no-store");let h=yield fetch(this.url,{signal:a,cache:l,headers:o});if(e===0&&h.status===416){let f=h.headers.get("Content-Range");if(!f||!f.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let m=+f.substr(8);h=yield fetch(this.url,{signal:a,cache:"reload",headers:{range:`bytes=0-${m-1}`}})}let u=h.headers.get("Etag");if(u!=null&&u.startsWith("W/")&&(u=null),h.status===416||i&&u&&u!==i)throw this.mustReload=!0,new Me(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(h.status>=300)throw new Error(`Bad response code: ${h.status}`);let c=h.headers.get("Content-Length");if(h.status===200&&(!c||+c>t))throw n&&n.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield h.arrayBuffer(),etag:u||void 0,cacheControl:h.headers.get("Cache-Control")||void 0,expires:h.headers.get("Expires")||void 0}})}};v(Ot,"FetchSource");var Cs=Ot;function R(s,e){let t=s.getUint32(e+4,!0),r=s.getUint32(e+0,!0);return t*ie(2,32)+r}v(R,"getUint64");function Rt(s,e){let t=new DataView(s),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:R(t,8),rootDirectoryLength:R(t,16),jsonMetadataOffset:R(t,24),jsonMetadataLength:R(t,32),leafDirectoryOffset:R(t,40),leafDirectoryLength:R(t,48),tileDataOffset:R(t,56),tileDataLength:R(t,64),numAddressedTiles:R(t,72),numTileEntries:R(t,80),numTileContents:R(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}v(Rt,"bytesToHeader");function Fe(s){let e={buf:new Uint8Array(s),pos:0},t=H(e),r=[],i=0;for(let n=0;n<t;n++){let a=H(e);r.push({tileId:i+a,offset:0,length:0,runLength:1}),i+=a}for(let n=0;n<t;n++)r[n].runLength=H(e);for(let n=0;n<t;n++)r[n].length=H(e);for(let n=0;n<t;n++){let a=H(e);a===0&&n>0?r[n].offset=r[n-1].offset+r[n-1].length:r[n].offset=a-1}return r}v(Fe,"deserializeIndex");var Ut=class extends Error{};v(Ut,"EtagMismatch");var Me=Ut;function Oe(s,e){return C(this,null,function*(){let t=yield s.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,Ms),i=Rt(r,t.etag),n=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),a=`${s.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,o=Fe(yield e(n,i.internalCompression));return[i,[a,o.length,o]]})}v(Oe,"getHeaderAndRoot");function Re(s,e,t,r,i){return C(this,null,function*(){let n=yield s.getBytes(t,r,void 0,i.etag),a=yield e(n.data,i.internalCompression),o=Fe(a);if(o.length===0)throw new Error("Empty directory is invalid");return o})}v(Re,"getDirectory");var Ps=class{constructor(e=100,t=!0,r=ge){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return C(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield Oe(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return C(this,null,function*(){let n=`${e.getKey()}|${i.etag||""}|${t}|${r}`,a=this.cache.get(n);if(a)return a.lastUsed=this.counter++,a.data;let o=yield Re(e,this.decompress,t,r,i);return this.cache.set(n,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return C(this,null,function*(){this.cache.delete(e.getKey())})}};v(Ps,"ResolvedValueCache");var jt=class{constructor(e=100,t=!0,r=ge){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return C(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((n,a)=>{Oe(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),n(o[0]),this.prune()}).catch(o=>{a(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return C(this,null,function*(){let n=`${e.getKey()}|${i.etag||""}|${t}|${r}`,a=this.cache.get(n);if(a)return a.lastUsed=this.counter++,yield a.data;let o=new Promise((l,h)=>{Re(e,this.decompress,t,r,i).then(u=>{l(u),this.prune()}).catch(u=>{h(u)})});return this.cache.set(n,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return C(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,n)=>{this.getHeader(e).then(a=>{i(),this.invalidations.delete(t)}).catch(a=>{n(a)})});this.invalidations.set(t,r)})}};v(jt,"SharedPromiseCache");var Is=jt,Dt=class{constructor(e,t,r){typeof e=="string"?this.source=new Cs(e):this.source=e,r?this.decompress=r:this.decompress=ge,t?this.cache=t:this.cache=new Is}getHeader(){return C(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return C(this,null,function*(){let n=Pt(e,t,r),a=yield this.cache.getHeader(this.source);if(e<a.minZoom||e>a.maxZoom)return;let o=a.rootDirectoryOffset,l=a.rootDirectoryLength;for(let h=0;h<=3;h++){let u=yield this.cache.getDirectory(this.source,o,l,a),c=Ft(u,n);if(c){if(c.runLength>0){let f=yield this.source.getBytes(a.tileDataOffset+c.offset,c.length,i,a.etag);return{data:yield this.decompress(f.data,a.tileCompression),cacheControl:f.cacheControl,expires:f.expires}}o=a.leafDirectoryOffset+c.offset,l=c.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return C(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(n){if(n instanceof Me)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw n}})}getMetadataAttempt(){return C(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return C(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof Me)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return C(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=It(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};v(Dt,"PMTiles");var ne=Dt,Bt=Object.defineProperty,it=Object.getOwnPropertySymbols,Fs=Object.prototype.hasOwnProperty,Os=Object.prototype.propertyIsEnumerable,nt=(s,e,t)=>e in s?Bt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,me=(s,e)=>{for(var t in e||(e={}))Fs.call(e,t)&&nt(s,t,e[t]);if(it)for(var t of it(e))Os.call(e,t)&&nt(s,t,e[t]);return s},ye=(s,e)=>Bt(s,"name",{value:e,configurable:!0}),Rs=(s,e,t)=>new Promise((r,i)=>{var n=l=>{try{o(t.next(l))}catch(h){i(h)}},a=l=>{try{o(t.throw(l))}catch(h){i(h)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(n,a);o((t=t.apply(s,e)).next())}),Gt=class extends _t{constructor(e){super(me(me({},e),{state:"loading"})),this.loadImage=ye(r=>new Promise((i,n)=>{const a=new Image;a.addEventListener("load",()=>i(a)),a.addEventListener("error",()=>n(new Error("load failed"))),a.src=r}),"loadImage");const t=new ne(e.url);t.getHeader().then(r=>{const i=e.projection===void 0?"EPSG:3857":e.projection;this.tileGrid=e.tileGrid||wt({extent:vt(i),maxResolution:e.maxResolution,minZoom:r.minZoom,maxZoom:r.maxZoom,tileSize:e.tileSize}),this.setLoader((n,a,o)=>Rs(this,null,function*(){const l=yield t.getZxy(n,a,o);if(!l)return new Uint8Array;const h=URL.createObjectURL(new Blob([l.data])),u=yield this.loadImage(h);return URL.revokeObjectURL(h),u})),this.setState("ready")})}};ye(Gt,"PMTilesRasterSource");var at=Gt,kt=class extends pt{constructor(e){super(me(me({},e),{state:"loading",url:"pmtiles://{z}/{x}/{y}",format:e.format||new zr})),this.tileLoadFunction=ye((t,r)=>{const i=t,n=new RegExp(/pmtiles:\/\/(\d+)\/(\d+)\/(\d+)/),a=r.match(n);if(!(a&&a.length>=4))throw Error("Could not parse tile URL");const o=+a[1],l=+a[2],h=+a[3];i.setLoader((u,c,f)=>{this.pmtiles_.getZxy(o,l,h).then(m=>{if(m){const _=i.getFormat();i.setFeatures(_.readFeatures(m.data,{extent:u,featureProjection:f})),i.setState(ve.LOADED)}else i.setFeatures([]),i.setState(ve.EMPTY)}).catch(m=>{i.setFeatures([]),i.setState(ve.ERROR)})})},"tileLoadFunction"),this.pmtiles_=new ne(e.url),this.pmtiles_.getHeader().then(t=>{const r=e.projection||"EPSG:3857",i=e.extent||vt(r);this.tileGrid=e.tileGrid||wt({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:e.tileSize||512}),this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}};ye(kt,"PMTilesVectorSource");var Us=kt;class js extends mt{constructor(e){super(lr.ERROR),this.error=e}}const Ds="https://stac-extensions.github.io/label/v1.*/schema.json",zt=new gt({color:"rgba(0,0,0,0)"});function Ue(s,e,t="rgba(255,255,255,0.4)",r=5){let i=zt;t&&(i=new gt({color:t}));const n=new cr({color:s,width:e});return new ur({image:new hr({fill:i,stroke:n,radius:r}),fill:i,stroke:n})}const Bs=Ue("#3399CC",3),ot=Ue("#ff9933",2,null);async function Gs(s,e=null,t=null,r=0){const i=new Set;return s.map.forEachFeatureAtPixel(s.pixel,(n,a)=>{t&&t.push(n),i.add(a.get("stac"))},{hitTolerance:r,layerFilter(n){if(n instanceof Ee&&n.get("bounds")===!0){const a=n.get("stac");if(a instanceof $&&(!e||!a.equals(e)))return!0}return!1}}),[...i]}function ks(s,e){const t={url:s.getAbsoluteUrl()};let r=s,i=s.getBands();i.length===1&&(r=i[0],i=[]);const{minimum:n,maximum:a}=r.getMinMaxValues();if(typeof n=="number"&&(t.min=n),typeof a=="number"&&(t.max=a),typeof t.min!="number"&&typeof t.max!="number"&&i.length>1)for(const l of i){const{minimum:h,maximum:u}=l.getMinMaxValues();typeof h=="number"&&(typeof t.min>"u"||h<t.min)&&(t.min=h),typeof u=="number"&&(typeof t.max>"u"||u>t.max)&&(t.max=u)}const o=r.getNoDataValues();if(o.length>0)t.nodata=o[0];else if(i.length>1){let l;for(const h of i){const u=h.getNoDataValues();if(u.length>0){if(typeof l>"u")l=u[0];else if(l!==u[0]){l=void 0;break}}}typeof l<"u"&&(t.nodata=l)}if(e.length>0)t.bands=e;else{const l=s.findVisualBands();l&&(t.bands=[l.red.getIndex()+1,l.green.getIndex()+1,l.blue.getIndex()+1])}return t}async function Vt(s){try{const{fromProjectionCode:e,fromEPSGCode:t}=await te(async()=>{const{fromProjectionCode:r,fromEPSGCode:i}=await import("./GeoJSON-dVJCj0SI.js").then(n=>n.cb);return{fromProjectionCode:r,fromEPSGCode:i}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));return typeof e=="function"?await e(s):await t(s)}catch{return null}}async function lt(s,e=void 0){let t;if(fr()){const r=s.getMetadata("proj:code");r&&(t=await Vt(r))}return t||e}function ct(s,e){const t=s.clone();return e.hasOnlyBounds()||t.setFill(zt),t}function zs(s){let e=s.href;if(e.includes("{s}"))if(Array.isArray(s["href:servers"])&&s["href:servers"].length>0){const t=Math.random()*s["href:servers"].length|0;e=e.replace("{s}",s["href:servers"][t])}else return null;return e}function ut(s){return typeof s=="string"||typeof s=="number"||typeof s=="boolean"}function Vs(s){return((s.fileDirectory.NewSubfileType||0)&4)===4}function Zs(s,e){if(!s)return!1;if(s===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const t=e.fileDirectory.PhotometricInterpretation,r=qr;return t===r.CMYK||t===r.YCbCr||t===r.CIELab||t===r.ICCLab}const ht="STATISTICS_MAXIMUM",ft="STATISTICS_MINIMUM",Le=256;let Se;function Ws(){return Se||(Se=new Jr),Se}function Ns(s){try{return s.getBoundingBox(!0)}catch{return[0,0,s.getWidth(),s.getHeight()]}}function $s(s){try{return s.getOrigin().slice(0,2)}catch{return[0,s.getHeight()]}}function Hs(s,e){try{return s.getResolution(e)}catch{return[e.getWidth()/s.getWidth(),e.getHeight()/s.getHeight()]}}async function dt(s,e,t,r){const i=s[e];if(i&&i!==32767){const n="EPSG:"+i;let a=xr(n);if(!a&&r&&(a=await Vt(n)),!a){const o=Lr(s[t]);o&&(a=new Sr({code:n,units:o}))}return a||null}}async function Ks(s,e){const t=s.geoKeys;if(!t)return null;const r=await dt(t,"ProjectedCSTypeGeoKey","ProjLinearUnitsGeoKey",e);return r||await dt(t,"GeographicTypeGeoKey","GeogAngularUnitsGeoKey",e)}function Js(s){return s.getImageCount().then(function(e){const t=new Array(e);for(let r=0;r<e;++r)t[r]=s.getImage(r);return Promise.all(t)})}function qs(s,e){let t;return s.blob?t=$r(s.blob):s.overviews?t=Hr(s.url,s.overviews,e):t=Kr(s.url,e),t.then(Js)}function re(s,e,t,r,i){if(Array.isArray(s)){const n=s.length;if(!Array.isArray(e)||n!=e.length){const a=new Error(r);throw i(a),a}for(let a=0;a<n;++a)re(s[a],e[a],t,r,i);return}if(e=e,Math.abs(s-e)>t*s)throw new Error(r)}function Xs(s){return s instanceof Int8Array?-128:s instanceof Int16Array?-32768:s instanceof Int32Array?-2147483648:s instanceof Float32Array?12e-39:0}function Ys(s){return s instanceof Int8Array?127:s instanceof Uint8Array||s instanceof Uint8ClampedArray?255:s instanceof Int16Array?32767:s instanceof Uint16Array?65535:s instanceof Int32Array?2147483647:s instanceof Uint32Array?4294967295:s instanceof Float32Array?34e37:255}class Zt extends _t{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.loadMissingProjection_=e.loadMissingProjection||!1,this.setKey(this.sourceInfo_.map(n=>n.url).join(","));const r=this,i=new Array(t);for(let n=0;n<t;++n)i[n]=qs(this.sourceInfo_[n],this.sourceOptions_);Promise.all(i).then(function(n){return r.configure_(n)}).catch(function(n){Xe(n),r.error_=n,r.setState("error")})}getError(){return this.error_}async determineProjection(e){const t=e[0];for(let r=t.length-1;r>=0;--r){const i=t[r],n=await Ks(i,this.loadMissingProjection_);if(n){this.projection=n;break}}}determineTransformMatrix(e){const t=e[0];for(let r=t.length-1;r>=0;--r){const n=t[r].fileDirectory.ModelTransformation;if(n){const[a,o,l,h,u,c,f,m]=n,_=Ye(Ye([1/Math.sqrt(a*a+u*u),0,0,-1/Math.sqrt(o*o+c*c),h,m],[a,u,o,c,0,0]),[1,0,0,1,-h,-m]);this.transformMatrix=_,this.addAlpha_=!0;break}}}async configure_(e){let t,r,i,n,a;const o=new Array(e.length),l=new Array(e.length),h=new Array(e.length);let u=0;const c=e.length;for(let d=0;d<c;++d){const g=[],w=[];e[d].forEach(b=>{Vs(b)?w.push(b):g.push(b)});const p=g.length;if(w.length>0&&w.length!==p)throw new Error(`Expected one mask per image found ${w.length} masks and ${p} images`);let I,P;const B=new Array(p),S=new Array(p),E=new Array(p);l[d]=new Array(p),h[d]=new Array(p);for(let b=0;b<p;++b){const A=g[b],M=A.getGDALNoData();h[d][b]=A.getGDALMetadata(0),l[d][b]=M;const U=this.sourceInfo_[d].bands;o[d]=U?U.length:A.getSamplesPerPixel();const q=p-(b+1);I||(I=Ns(A)),P||(P=$s(A));const X=Hs(A,g[0]);E[q]=X[0];const j=[A.getTileWidth(),A.getTileHeight()];j[0]!==j[1]&&j[1]<Le&&(j[0]=Le,j[1]=Le),B[q]=j;const G=X[0]/Math.abs(X[1]);S[q]=[j[0],j[1]/G]}if(t?wr(t,I,t):t=I,!r)r=P;else{const b=`Origin mismatch for source ${d}, got [${P}] but expected [${r}]`;re(r,P,0,b,this.viewRejector)}if(!a)a=E,this.resolutionFactors_[d]=1;else{a.length-u>E.length&&(u=a.length-E.length);const b=a[a.length-1]/E[E.length-1];this.resolutionFactors_[d]=b;const A=E.map(U=>U*=b),M=`Resolution mismatch for source ${d}, got [${A}] but expected [${a}]`;re(a.slice(u,a.length),A,.02,M,this.viewRejector)}i?re(i.slice(u,i.length),S,.01,`Tile size mismatch for source ${d}`,this.viewRejector):i=S,n?re(n.slice(u,n.length),B,0,`Tile size mismatch for source ${d}`,this.viewRejector):n=B,this.sourceImagery_[d]=g.reverse(),this.sourceMasks_[d]=w.reverse()}for(let d=0,g=this.sourceImagery_.length;d<g;++d){const w=this.sourceImagery_[d];for(;w.length<a.length;)w.unshift(void 0)}this.getProjection()||await this.determineProjection(e),this.determineTransformMatrix(e),this.samplesPerPixel_=o,this.nodataValues_=l,this.metadata_=h;e:for(let d=0;d<c;++d){if(this.sourceInfo_[d].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[d].length){this.addAlpha_=!0;break}const g=l[d],w=this.sourceInfo_[d].bands;if(w){for(let p=0;p<w.length;++p)if(g[w[p]-1]!==null){this.addAlpha_=!0;break e}continue}for(let p=0;p<g.length;++p)if(g[p]!==null){this.addAlpha_=!0;break e}}let f=this.addAlpha_?1:0;for(let d=0;d<c;++d)f+=o[d];this.bandCount=f;const m=new Xr({extent:t,minZoom:u,origin:r,resolutions:a,tileSizes:i});this.tileGrid=m,this.setTileSizes(n),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const _=1;a.length===2?a=[a[0],a[1],a[1]/2]:a.length===1&&(a=[a[0]*2,a[0],a[0]/2]);let y=t;if(this.transformMatrix){const d=dr(mr(),this.transformMatrix.slice()),g=vr(w=>Tr(d,w));y=gr(t,g)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:a,center:pr(_r(y),this.projection),extent:yr(y,this.projection),zoom:_})}loadTile_(e,t,r,i){const n=this.getTileSize(e),a=this.sourceImagery_.length,o=new Array(a*2),l=this.nodataValues_,h=this.sourceInfo_,u=Ws();for(let c=0;c<a;++c){const f=h[c],m=this.resolutionFactors_[c],_=[Math.round(t*(n[0]*m)),Math.round(r*(n[1]*m)),Math.round((t+1)*(n[0]*m)),Math.round((r+1)*(n[1]*m))],y=this.sourceImagery_[c][e];let d;f.bands&&(d=f.bands.map(function(P){return P-1}));let g;"nodata"in f&&f.nodata!==null?g=f.nodata:d?g=d.map(function(P){return l[c][P]}):g=l[c];const w={window:_,width:n[0],height:n[1],samples:d,fillValue:g,pool:u,interleave:!1,signal:i.signal};Zs(this.convertToRGB_,y)?o[c]=y.readRGB(w):o[c]=y.readRasters(w);const p=a+c,I=this.sourceMasks_[c][e];if(!I){o[p]=Promise.resolve(null);continue}o[p]=I.readRasters({window:_,width:n[0],height:n[1],samples:[0],pool:u,interleave:!1})}return Promise.all(o).then(this.composeTile_.bind(this,n)).catch(function(c){throw Xe(c),c})}composeTile_(e,t){const r=this.metadata_,i=this.sourceInfo_,n=this.sourceImagery_.length,a=this.bandCount,o=this.samplesPerPixel_,l=this.nodataValues_,h=this.normalize_,u=this.addAlpha_,c=e[0]*e[1],f=c*a;let m;h?m=new Uint8Array(f):m=new Float32Array(f);let _=0;for(let y=0;y<c;++y){let d=u;for(let g=0;g<n;++g){const w=i[g];let p=w.min,I=w.max,P,B;if(h){const S=r[g][0];p===void 0&&(S&&ft in S?p=parseFloat(S[ft]):p=Xs(t[g][0])),I===void 0&&(S&&ht in S?I=parseFloat(S[ht]):I=Ys(t[g][0])),P=255/(I-p),B=-p*P}for(let S=0;S<o[g];++S){const E=t[g][S][y];let b;if(h?b=br(P*E+B,0,255):b=E,!u)m[_]=b;else{let A=w.nodata;if(A===void 0){let U;w.bands?U=w.bands[S]-1:U=S,A=l[g][U]}const M=isNaN(A);(!M&&E!==A||M&&!isNaN(E))&&(d=!1,m[_]=b)}_++}if(!d){const S=n+g,E=t[S];E&&!E[0][y]&&(d=!0)}}u&&(d||(m[_]=255),_++)}return m}}Zt.prototype.getView;class T{constructor(e){this.name=e}toString(){return this.name}}T.GeoTIFF=new T("GeoTIFF");T.ImageStatic=new T("ImageStatic");T.PMTilesRaster=new T("PMTilesRaster");T.PMTilesVector=new T("PMTilesVector");T.TileJSON=new T("TileJSON");T.TileWMS=new T("TileWMS");T.WMTS=new T("WMTS");T.XYZ=new T("XYZ");class je extends Ar{constructor(e){const t={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>t[r]=e[r]),super(t),this.getSourceOptions_=e.getSourceOptions,this.children_=null,this.childrenOptions_=e.childrenOptions||{},this.assets_=null,this.bands_=[],this.crossOrigin_=e.crossOrigin||null,this.displayFootprint_=e.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!e.displayGeoTiffByDefault,this.displayPreview_=!!e.displayPreview,this.displayOverview_=e.displayOverview!==!1,this.displayWebMapLink_=e.displayWebMapLink||!1,this.buildTileUrlTemplate_=e.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=e.useTileLayerAsFallback||!1,this.boundsStyle_=e.boundsStyle||Bs,this.collectionStyle_=e.collectionStyle||ot,this.boundsLayer_=null,this.disableMigration_=e.disableMigration||!1,this.map_=null,this.eventQueue_=[],e.httpRequestFn&&(this.fetch_=e.httpRequestFn),e.data){try{this.configure_(e.data,e.url,e.children,e.assets,e.bands)}catch(r){this.handleError_(r)}return}if(!e.url)throw new Error("Either url or data must be provided");this.fetch_(e.url).then(r=>this.configure_(r,e.url,e.children,e.assets,e.bands)).catch(r=>this.handleError_(r))}async fetch_(e,t="json"){const r=await fetch(e);if(!r.ok)throw new Error(`Unexpected response from ${e}: ${r.status}`);return t==="json"?await r.json():t==="text"?await r.text():null}getBoundsLayer(){return this.boundsLayer_}isEmpty(){var e;if(this.getLayers().getLength()>1)return!1;const r=(e=this.getData())===null||e===void 0?void 0:e.getBoundingBox();return!r||Mr(r)?!0:!this.boundsLayer_||!this.displayFootprint_}handleError_(e){this.dispatch_(new js(e))}configure_(e,t=null,r=null,i=null,n=[]){let a;e instanceof le||e instanceof $?a=e:(a=fe(e,!this.disableMigration_),t&&t.includes("://")&&a.setAbsoluteUrl(t)),this.set("stac",a),this.bands_=n,this.boundsLayer_=this.addFootprint_();const o=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(ct(this.boundsStyle_,this))};this.getLayers().on("add",o),this.getLayers().on("remove",o);const l=u=>this.handleError_(u),h=[];r&&h.push(this.setChildren(r,null,!1).catch(l)),i&&h.push(this.setAssets(i,!1).catch(l)),Promise.all(h).then(()=>this.updateLayers().catch(l)),this.dispatch_("sourceready")}dispatch_(e){this.eventQueue_.push(e),this.flush_()}flush_(){if(this.map_){for(const e of this.eventQueue_)this.dispatchEvent(e);this.eventQueue_=[]}}setMap_(e){this.map_!==e&&(this.map_=e,this.flush_())}async addChildren_(e,t={}){const r=e.map(i=>{const n={data:i,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_,useTileLayerAsFallback:this.useTileLayerAsFallback_,buildTileUrlTemplate:this.buildTileUrlTemplate_},a=new je(Object.assign(n,t));return a.on("sourceready",()=>{a.map_&&this.setMap_(a.map_)}),this.addLayer_(a,null),a});return await Promise.all(r)}async addPreviewImage_(e){const t=await lt(e,"EPSG:4326"),r=e.getContext().getBoundingBoxes();if(r.length!==1)return;const i=r[0];let n={url:e.getAbsoluteUrl(),projection:t,imageExtent:Qe(i,"EPSG:4326",t),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(n=await this.getSourceOptions_(T.ImageStatic,n,e));const a=new Rr({source:new jr(n)});return this.addLayer_(a,e),a}async addLayerForLink(e){const t=zs(e);if(!t)return;const r={attributions:e.getMetadata("attribution")||this.getData().getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:t},i=async(a,o)=>(this.getSourceOptions_&&(o=await this.getSourceOptions_(a,o,e)),o),n=[];switch(e.rel){case"pmtiles":const o=await new ne(r.url).getHeader();let l;switch(o.tileType){case K.Mvt:l=new Us(await i(T.PMTilesVector,r));break;case K.Avif:case K.Jpeg:case K.Png:case K.Webp:l=new at(await i(T.PMTilesRaster,r));break;default:return}n.push(l);break;case"tilejson":n.push(new Dr(await i(T.TileJSON,r)));break;case"wms":if(!Array.isArray(e["wms:layers"]))break;for(const c in e["wms:layers"]){const f=e["wms:layers"][c]||"";let m="";Array.isArray(e["wms:styles"])&&typeof e["wms:styles"][c]=="string"&&(m=e["wms:styles"][c]);const _=Object.assign({LAYERS:f,STYLES:m},e["wms:dimensions"]);typeof e["wms:transparent"]=="boolean"&&(_.TRANSPARENT=String(e["wms:transparent"])),typeof e.type=="string"&&e.type.startsWith("image/")&&(_.FORMAT=e.type);const y=await i(T.TileWMS,Object.assign({},r,{params:_}));n.push(new Br(y))}break;case"wmts":const h=await this.getWmtsCapabilities_(t,e["wmts:encoding"]);if(!h)return;let u=[];Array.isArray(e["wmts:layer"])?u=e["wmts:layer"]:typeof e["wmts:layer"]=="string"&&(u=[e["wmts:layer"]]);for(const c of u){let f=Object.assign({},r,{layer:c,requestEncoding:e["wmts:encoding"]==="rest"?"REST":"KVP"});typeof e.type=="string"&&e.type.startsWith("image/")&&(f.format=e.type),f=await i(T.WMTS,f);const m=kr(h,f);if(m!==null){if(typeof e.uriTemplate=="string"){let _=e.uriTemplate;const y=be(e.variables)?e.variables:{};for(const d in y){const g=y[d];let w;if(ut(g.const)?w=g.const:ut(g.default)?w=g.default:Array.isArray(g.enum)&&g.enum.length>0&&(w=g.enum[0]),typeof w<"u")_=_.replaceAll(`{${d}}`,String(w));else continue}delete m.urls,m.url=_}n.push(new Gr(m))}}break;case"xyz":n.push(new rt(await i(T.XYZ,r)));break;default:return}return n.map(a=>{let o;return a instanceof pt?o=new Ur({source:a,declutter:!0}):a instanceof at?o=new tt({source:a}):o=new et({source:a}),this.addLayer_(o,e),o})}async addGeoTiff_(e){if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(e);let r={sources:[ks(e,this.bands_)],convertToRGB:"auto",loadMissingProjection:!0};const i=await lt(e);i&&(r.projection=i),this.getSourceOptions_&&(r=await this.getSourceOptions_(T.GeoTIFF,r,e));const n=new Zt(r),a=new Promise((o,l)=>{n.on("error",l),n.on("change",()=>{n.getState()==="error"?l(n.getError()):o()})});try{await a;const o=new tt({source:n});return this.addLayer_(o,e),o}catch(o){if(this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(e);this.handleError_(o)}}async addTileLayerForImagery_(e){let t=this.buildTileUrlTemplate_(e);t instanceof Promise&&(t=await t);let r={crossOrigin:this.crossOrigin_,url:t};this.getSourceOptions_&&(r=await this.getSourceOptions_(T.XYZ,r,e));const i=new et({source:new rt(r)});return this.addLayer_(i,e),i}addLayer_(e,t=null,r=0){t&&e.set("stac",t),e.setZIndex(r),this.getLayers().push(e)}addFootprint_(){let e=null;const t=this.getData();if(t.isItemCollection()||t.isCollectionCollection()?e=Vr(t.getBoundingBox()):e=t.toGeoJSON(),e){const r=this.createGeoJsonLayer_(e,ct(this.boundsStyle_,this),this.displayFootprint_);return r.set("bounds",!0),r.on("change",()=>this.setMap_(r.getMapInternal())),this.addLayer_(r,t,1),r}return null}async addGeoJson_(e){try{const t=await this.fetch_(e.getAbsoluteUrl()),r=this.createGeoJsonLayer_(t);return this.addLayer_(r,e),r}catch(t){this.handleError_(t)}}createGeoJsonLayer_(e,t=null,r=!0){const i=new yt,n=new Er({format:i,loader:(a,o,l)=>{e=Zr(e);const h=i.readFeatures(e,{featureProjection:l});n.addFeatures(h)}});return t||(t=ot),new Ee({source:n,style:t,visible:r})}async addLabelExtension_(){const e=this.getData();if(!(e instanceof Ht))return;let t=e.getAssetsWithRoles(["labels","labels-vector"],!0),r;t.length>1&&(r=t.find(n=>n.roles.includes("labels-vector"))),r||(r=e.getAsset("vector_labels")),r||(t=e.getAssets().filter(n=>n.type===st&&!n.roles),t.length===1&&(r=t[0]));const i=e.getLinksWithRels(["source"]);if(r&&i.length>0){const n=i.map(async o=>{try{const l=await this.fetch_(o.getAbsoluteUrl());return fe(l)}catch(l){return this.handleError_(l),null}}),a=(await Promise.all(n)).filter(o=>o instanceof $);await this.addChildren_(a,{displayFootprint:!1})}try{await this.addGeoJson_(r)}catch(n){this.handleError_(n)}}async updateLayers(e=!0){const t=this.getLayers();for(let n=t.getLength()-1;n>=0;n--){const a=t.item(n);a.get("stac")&&!a.get("bounds")&&t.removeAt(n)}const r=this.getData();if(Array.isArray(this.displayWebMapLink_)){const n=this.getWebMapLinks().map(async a=>await this.addLayerForLink(a));await Promise.all(n)}this.children_&&await this.addChildren_(this.children_,this.childrenOptions_);const i=this.getAssets();if(i){const n=i.map(async a=>{if(a){if(a.type===st)return await this.addGeoJson_(a);if(a.isGeoTIFF())return await this.addGeoTiff_(a);if(a.canBrowserDisplayImage())return await this.addPreviewImage_(a)}});await Promise.all(n)}if(this.hasOnlyBounds()){if(r instanceof Kt)await this.addChildren_(r.getAll(),this.childrenOptions_);else if(r instanceof $){if(r.isItem()&&r.supportsExtension(Ds)&&r.getMetadata("label:type")==="vector"){await this.addLabelExtension_(),e&&this.dispatch_("layersready");return}const n=this.getWebMapLinks();if(n.length>0)await this.addLayerForLink(n[0]);else{const a=r.getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);let o;if(a&&this.displayOverview_&&(o=await this.addGeoTiff_(a)),this.displayPreview_&&(!a||!o)){const l=r.getThumbnails(!0,"overview");l.length>0&&await this.addPreviewImage_(l[0])}}}}e&&this.dispatch_("layersready")}hasOnlyBounds(){const e=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==e)>"u"}getWebMapLinks(){const e=this.getData();if(e instanceof le)return[];let t=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(t=[this.displayWebMapLink_]);let r=e.getLinksWithRels(t);return Array.isArray(this.displayWebMapLink_)?r=this.displayWebMapLink_.map(i=>{if(typeof i=="string"){const n=r.find(a=>a.id===i);return n||null}return i}).filter(i=>!!i):r.sort((i,n)=>{const a=t.indexOf(i.rel),o=t.indexOf(n.rel);return a-o}),r}async setAssets(e,t=!0){if(e!==this.assets_){if(Array.isArray(e)){const r=this.getData();this.assets_=e.map(i=>r instanceof $&&typeof i=="string"?r.getAsset(i):i instanceof le?i:new le(i))}else this.assets_=null;t&&await this.updateLayers()}}async setChildren(e,t=null,r=!0){e instanceof Jt?this.children_=e.getAll():e instanceof qt?this.children_=e.getAll():be(e)&&e.type==="FeatureCollection"?this.children_=fe(e,!this.disableMigration_).getAll():Array.isArray(e)?this.children_=e.map(i=>i instanceof $?i:fe(i,!this.disableMigration_)):this.children_=null,this.children_&&this.children_.length===0&&(this.children_=null),this.children_&&be(t)&&(this.childrenOptions_=t),r&&await this.updateLayers()}getData(){return this.get("stac")}getChildren(){return this.children_}getAssets(){return this.assets_}getExtent(){if(!this.map_)return;const e=this.map_.getView();if(!e)return;let t;const r=this.getData();r&&(t=r.getBoundingBox());const i=this.getChildren();if(i){const n=i.map(a=>a.getBoundingBox());t=Wr(n)}if(t)return Qe(t,"EPSG:4326",e.getProjection())}getLayerState(){const e=super.getLayerState();return e.extent=void 0,e}getAttributions(){const e=[],t=this.getData();if(t){const r=t.getMetadata("attribution");r&&r.push(r)}return e}getSource(){return null}async getWmtsCapabilities_(e,t="kvp"){try{const r=new URL(e);t!=="rest"&&(r.searchParams.set("service","wmts"),r.searchParams.set("request","GetCapabilities"));const i=await this.fetch_(r.toString(),"text");return new Or().read(i)}catch{return null}}}const Qs=Ue("#ff0000",2,null);let ei=0;const ti={name:"MapView",components:{BPopover:ce(()=>te(()=>import("./bootstrap-vue-next-BcxQ-4nT.js"),__vite__mapDeps([10,1,2,3,4,5,11,12,13,14,15,8,16,17,18,19,20,21,22,7,23,24,6,25,26,27])).then(s=>s.BPopover)),Features:ce(()=>te(()=>import("./Features-Bhlu8ydW.js"),__vite__mapDeps([28,1,2,3,4,5,15,8,18,29,30,31]))),Catalogs:ce(()=>te(()=>import("./Catalogs-D46bBwoK.js").then(s=>s.b),__vite__mapDeps([32,1,2,3,4,5,15,8,33,34,30,31,18,19,35,36,37]))),Items:ce(()=>te(()=>import("./Items-CsFJGy65.js"),__vite__mapDeps([38,1,2,3,4,5,15,8,14,33,34,30,31,18,19,35,36]))),LayerControl:Ir,TextControl:Pr},mixins:[Cr],props:{stac:{type:Object,default:null},assets:{type:Array,default:null},children:{type:Object,default:null},onfocusOnly:{type:Boolean,default:!1},popover:{type:Boolean,default:!1}},emits:["empty","changed"],data(){return{selection:null,clickPosition:{x:0,y:0},empty:!1,selector:null,mapId:`map-${++ei}`}},computed:{...Yt(["getStac"]),container(){return this.isFullScreen?"#"+this.mapId:"#stac-browser"},childrenOptions(){return{displayPreview:this.children&&this.children.isItemCollection()}}},watch:{async stac(){await this.showStacLayer()},async assets(){this.stacLayer&&await this.stacLayer.setAssets(this.assets)},async children(){this.stacLayer&&(await this.stacLayer.setAssets(null,!1),await this.stacLayer.setChildren(this.children,this.childrenOptions,!1),await this.stacLayer.updateLayers(),this.fit())},empty(s){s&&this.$emit("empty")},selection(s){!s&&this.selector&&this.selector.getFeatures().clear()}},created(){this.stacLayer=null},async mounted(){await this.showStacLayer()},methods:{async showStacLayer(){this.map=null,this.stacLayer=null,await this.createMap(this.$refs.map,this.stac,this.onfocusOnly),this.stac&&await this.addStacLayer()},async addStacLayer(){let s=Object.assign({},this.stacLayerOptions,{data:this.stac,children:this.children,assets:this.assets||null,displayWebMapLink:!0,disableMigration:!0,childrenOptions:this.childrenOptions});this.stacLayer=new je(s),this.stacLayer.on("error",e=>{console.warn(e),this.fit()}),this.stacLayer.on("sourceready",this.fit),this.stacLayer.on("layersready",()=>{this.empty=this.stacLayer.isEmpty(),this.$emit("changed",this.getShownData())}),this.map.addLayer(this.stacLayer),this.popover&&(this.selector=new Ce({multi:!0,style:Qs,layers:e=>{if(this.children)return!1;{const t=e.get("stac");return t&&t.isAsset()}}}),this.selector.on("select",e=>{this.selection=null,this.setTargetPosition(e.mapBrowserEvent);const t=this.selector.getFeatures();if(t.getLength()>0){const r=new yt;this.selection={target:this.$refs.target,type:"features",items:t.getArray().map(i=>r.writeFeatureObject(i))}}}),this.map.addInteraction(this.selector),this.map.on("singleclick",async e=>{if(this.selection=null,this.children){this.setTargetPosition(e),this.selector.getFeatures().clear();const t=this.selector.getFeatures(),r=this.stacLayer.getData(),i=await Gs(e,r,t,5);i.length>0&&(this.selection={target:this.$refs.target,type:this.children.isCollectionCollection()?"collections":"items",children:i})}}),this.map.on("change",()=>this.selection=null),this.map.on("movestart",()=>this.selection=null))},setTargetPosition(s){this.$refs.target.style.left=s.pixel[0]+"px",this.$refs.target.style.top=s.pixel[1]+"px"},fit(){const s=this.stacLayer.getExtent();s&&(this.map.updateSize(),this.map.getView().fit(s,{padding:[50,50,50,50],maxZoom:this.maxZoom}))},resetSelection(){this.selection=null},getShownData(){return this.stacLayer?this.stacLayer.getLayers().getArray().filter(s=>Fr.isLayerVisible(s)).map(s=>s.get("stac")).filter(s=>s instanceof Nr):null}}},ri={class:"map-container"},si=["id"],ii={ref:"target",class:"popover-target"},ni={class:"popover-children"},ai={class:"text-center"};function oi(s,e,t,r,i,n){const a=W("LayerControl"),o=W("TextControl"),l=W("Items"),h=W("Catalogs"),u=W("Features"),c=er,f=W("b-popover");return V(),Qt("div",ri,[ue("div",{ref:"map",class:"map",id:i.mapId},[Ne(a,{map:s.map,maxZoom:s.maxZoom},null,8,["map","maxZoom"]),e[0]||(e[0]=Q()),i.empty?(V(),N(o,{key:0,map:s.map,text:s.$t("mapping.nodata")},null,8,["map","text"])):s.hasBasemap?We("",!0):(V(),N(o,{key:1,map:s.map,text:s.$t("mapping.nobasemap")},null,8,["map","text"]))],8,si),e[2]||(e[2]=Q()),ue("div",ii,null,512),e[3]||(e[3]=Q()),t.popover&&i.selection?(V(),N(f,{key:0,show:"",manual:"",placement:"auto",target:i.selection.target,"teleport-to":n.container,class:"map-popover","boundary-padding":10},{default:$e(()=>[ue("section",ni,[i.selection.type==="items"?(V(),N(l,{key:0,stac:t.stac,items:i.selection.children},null,8,["stac","items"])):i.selection.type==="collections"?(V(),N(h,{key:1,collectionsOnly:"",enforceCards:"",hideControls:"",stac:t.stac,catalogs:i.selection.children},null,8,["stac","catalogs"])):(V(),N(u,{key:2,features:i.selection.children},null,8,["features"]))]),e[1]||(e[1]=Q()),ue("div",ai,[Ne(c,{variant:"danger",onClick:n.resetSelection},{default:$e(()=>[Q(tr(s.$t("mapping.close")),1)]),_:1},8,["onClick"])])]),_:1},8,["target","teleport-to"])):We("",!0)])}const gn=Xt(ti,[["render",oi]]);export{gn as default};
//# sourceMappingURL=MapView-Bs3bjima.js.map
