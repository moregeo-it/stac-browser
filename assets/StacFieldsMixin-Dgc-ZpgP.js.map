{"version":3,"file":"StacFieldsMixin-Dgc-ZpgP.js","sources":["../../node_modules/@radiantearth/stac-fields/normalize.js","../../node_modules/@radiantearth/stac-fields/registry.js","../../node_modules/@radiantearth/stac-fields/formatters.js","../../node_modules/content-type/index.js","../../src/components/StacFieldsMixin.js"],"sourcesContent":["const _ = require('./helper');\nconst I18N = require('./I18N');\n\nconst Normalize = {\n\n  fields(fields) {\n    let parts = ['extensions', 'metadata', 'links', 'assets'];\n    for (let part of parts) {\n      for(let key in fields[part]) {\n        fields[part][key] = Normalize.field(fields[part][key], fields[part], fields);\n      }\n    }\n    return fields;\n  },\n\n  field(spec, fields = {}, allFields = {}) {\n    // If just a string label is given, make a normal object with a label from it\n    if (typeof spec === 'string') {\n      return {\n        label: spec\n      };\n    }\n    // Resolve alias\n    if (typeof spec.alias === 'string') {\n      // As we don't know whether the alias has been resolved so far, resolve it here, too.\n      let aliasedSpec = fields[spec.alias] || allFields.metadata[spec.alias];\n      if (!aliasedSpec) {\n        throw new Error('Alias is invalid: ' + spec.alias);\n      }\n      return Object.assign(spec, Normalize.field(aliasedSpec, fields, allFields));\n    }\n\n    // Normalize items\n    if (_.isObject(spec.items)) {\n    let itemOrder = [];\n      for(let key in spec.items) {\n        spec.items[key] = Normalize.field(spec.items[key], fields, allFields);\n        itemOrder.push(Object.assign({key}, spec.items[key]));\n      }\n\n      spec.itemOrder = itemOrder\n        .sort((i1, i2) => {\n          if (i1.id === true) {\n            return -1;\n          }\n          else if (i2.id === true) {\n            return 1;\n          }\n          else if (typeof i1.order === 'number' && typeof i2.order === 'number') {\n            return i1.order - i2.order;\n          }\n          else {\n            return I18N.collator.compare(_.t(i1.label), _.t(i2.label));\n          }\n        })\n        .map(item => item.key);\n    }\n\n    // Normalize properties\n    if (_.isObject(spec.properties)) {\n      for(let key in spec.properties) {\n        spec.properties[key] = Normalize.field(spec.properties[key], fields, allFields);\n      }\n    }\n\n    return spec;\n  }\n\n};\n\nmodule.exports = Normalize;","const Normalize = require('./normalize');\n\nconst Registry = {\n\n\texternalRenderer: false,\n\tdependencies: {},\n\tfields: {\n\t\tassets: {},\n\t\textensions: {},\n\t\tlinks: {},\n\t\tmetadata: {}\n\t},\n\n\texportFields() {\n\t\treturn this.fields;\n\t},\n\n\timportFields(fields) {\n\t\tfields = Normalize.fields(fields);\n\t\tfor(let key in this.fields) {\n\t\t\tObject.assign(this.fields[key], fields[key]);\n\t\t}\n\t},\n\n\tgetDependency(name) {\n\t\tif (!this.dependencies[name]) {\n\t\t\tconsole.warn(`Dependency '${name}' not registered.`);\n\t\t}\n\t\treturn this.dependencies[name];\n\t},\n\n\taddDependency(name, library) {\n\t\tthis.dependencies[name] = library;\n\t},\n\n\taddExtension(prefix, spec) {\n\t\tthis.fields.extensions[prefix] = Normalize.field(spec, this.fields.extensions);\n\t},\n\n\taddMetadataField(field, spec) {\n\t\tthis.fields.metadata[field] = Normalize.field(spec, this.fields.metadata);\n\t},\n\n\taddLinkField(field, spec) {\n\t\tthis.fields.links[field] = Normalize.field(spec, this.fields.links);\n\t},\n\n\taddAssetField(field, spec) {\n\t\tthis.fields.assets[field] = Normalize.field(spec, this.fields.assets);\n\t},\n\n\taddMetadataFields(specs) {\n\t\tfor(var key in specs) {\n\t\t\tRegistry.addMetadataField(key, specs[key]);\n\t\t}\n\t},\n\n\tgetExtension(name) {\n\t\tif (this.fields.extensions[name]) {\n\t\t\treturn this.fields.extensions[name];\n\t\t}\n\t\telse {\n\t\t\treturn {};\n\t\t}\n\t},\n\n\tgetSpecification(field, type = null) {\n\t\tlet spec = {};\n\t\tif (type === 'assets' && this.fields.assets[field]) {\n\t\t\tspec = this.fields.assets[field];\n\t\t}\n\t\telse if (type === 'links' && this.fields.links[field]) {\n\t\t\tspec = this.fields.links[field];\n\t\t}\n\t\telse if (this.fields.metadata[field]) {\n\t\t\tspec = this.fields.metadata[field];\n\t\t}\n\t\treturn spec;\n\t}\n\n};\n\nmodule.exports = Registry;","const _ = require('./helper');\nconst DataTypes = require('./datatypes');\nconst I18N = require('./I18N');\nconst Registry = require('./registry');\n\nconst Formatters = {\n\n\tallowHtmlInCommonMark: false,\n\n\tformatUrl(value, field, spec = {}, context = null, parent = null) {\n\t\tlet title = _.isObject(parent) && typeof parent === 'string' ? parent.title : value;\n\t\treturn _.toLink(value, title, parent.rel || \"\");\n\t},\n\n\tformatLink(value) {\n\t\treturn _.toList(value, false, value => _.toLink(value.href, value.title, value.rel));\n\t},\n\n\tformatMediaType(value, field, spec = {}) {\n\t\treturn _.e(_.t(Formatters._formatMediaType(value, field, spec)));\n\t},\n\n\t_formatMediaType(value, field, spec = {}) {\n\t\tlet short = Boolean(spec.shorten);\n\n\t\tconst mediaType = Registry.getDependency('content-type');\n\t\tif (!mediaType) {\n\t\t\treturn short ? \"\" : _.e(value);\n\t\t}\n\n\t\tlet media;\n\t\ttry {\n\t\t\tmedia = mediaType.parse(value);\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t\treturn short ? \"\" : _.e(value);\n\t\t}\n\n\t\tswitch(media.type) {\n\t\t\t// not supported: image/vnd.stac.geotiff; cloud-optimized=true\n\t\t\tcase 'image/tiff':\n\t\t\t\tif (media.parameters.application === \"geotiff\") {\n\t\t\t\t\tif (media.parameters.profile === \"cloud-optimized\") {\n\t\t\t\t\t\treturn short ? 'COG' : 'Cloud-Optimized GeoTIFF image';\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn short ? 'GeoTiff' : 'GeoTIFF image';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn short ? 'TIFF' : 'TIFF image';\n\t\t\t\t}\n\t\t\tcase 'image/jp2':\n\t\t\t\treturn short ? 'JPEG 2000' : 'JPEG 2000 image';\n\t\t\tcase 'image/png':\n\t\t\tcase 'image/apng':\n\t\t\tcase 'image/vnd.mozilla.apng':\n\t\t\t\treturn short ? 'PNG' : 'PNG image';\n\t\t\tcase 'image/gif':\n\t\t\t\treturn short ? 'GIF' : 'GIF image';\n\t\t\tcase 'image/jpeg':\n\t\t\tcase 'image/jpg':\n\t\t\t\treturn short ? 'JPEG' : 'JPEG image';\n\t\t\tcase 'image/webp':\n\t\t\t\treturn short ? 'WebP' : 'WebP image';\n\t\t\tcase 'image/bmp':\n\t\t\tcase 'image/x-bmp':\n\t\t\tcase 'image/x-ms-bmp':\n\t\t\tcase 'image/wbmp':\n\t\t\t\treturn short ? 'Bitmap' : 'Bitmap image';\n\t\t\tcase 'image/svg+xml':\n\t\t\t\treturn short ? 'SVG' : 'SVG vector image';\n\t\t\tcase 'text/csv':\n\t\t\t\treturn short ? 'CSV' : 'Comma-separated values (CSV)';\n\t\t\tcase 'text/xml':\n\t\t\tcase 'application/xml':\n\t\t\t\treturn 'XML';\n\t\t\tcase 'text/json':\n\t\t\tcase 'application/json':\n\t\t\t\treturn 'JSON';\n\t\t\tcase 'application/x-ndjson':\n\t\t\t\treturn short ? 'NDJSON' : 'Newline Delimited JSON';\n\t\t\tcase 'text/yaml':\n\t\t\tcase 'text/vnd.yaml':\n\t\t\tcase 'text/x-yaml':\n\t\t\tcase 'application/x-yaml':\n\t\t\t\treturn 'YAML';\n\t\t\tcase 'application/geo+json':\n\t\t\t\treturn 'GeoJSON';\n\t\t\tcase 'application/gml+xml':\n\t\t\t\treturn 'GML';\n\t\t\tcase 'application/vnd.google-earth.kml+xml':\n\t\t\tcase 'application/vnd.google-earth.kmz':\n\t\t\t\treturn 'KML';\n\t\t\tcase 'application/geopackage+vnd.sqlite3':\n\t\t\tcase 'application/geopackage+sqlite3':\n\t\t\t\treturn 'GeoPackage';\n\t\t\tcase 'text/html':\n\t\t\tcase 'application/html':\n\t\t\tcase 'application/xhtml+xml':\n\t\t\t\treturn short ? 'HTML' : 'HTML (Website)';\n\t\t\tcase 'text/plain':\n\t\t\t\treturn short ? 'Text' : 'Text document';\n\t\t\tcase 'text/markdown':\n\t\t\t\treturn short ? 'Markdown' : 'Markdown document';\n\t\t\tcase 'application/pdf':\n\t\t\t\treturn short ? 'PDF' : 'PDF document';\n\t\t\tcase 'application/zip':\n\t\t\t\treturn short ? 'ZIP' : 'ZIP archive';\n\t\t\tcase 'application/gzip':\n\t\t\t\treturn short ? 'GZIP' : 'GZIP archive';\n\t\t\tcase 'application/x-hdf':\n\t\t\t\treturn 'HDF';\n\t\t\tcase 'application/netcdf':\n\t\t\tcase 'application/x-netcdf':\n\t\t\t\treturn 'NetCDF';\n\t\t\tcase 'application/x.mrf':\n\t\t\t\treturn short ? 'MRF' : 'Meta Raster Format';\n\t\t\tcase 'application/wmo-GRIB2':\n\t\t\t\treturn 'GRIB 2';\n\t\t\tcase 'application/grib':\n\t\t\t\treturn `GRIB ${media.parameters.edition || \"\"}`.trim();\n\t\t\tcase 'application/bufr':\n\t\t\t\treturn `BUFR ${media.parameters.edition || \"\"}`.trim();\n\t\t\tcase 'application/octet-stream':\n\t\t\t\treturn short ? 'Binary' : 'Binary file';\n\t\t\tcase 'application/vnd.laszip':\n\t\t\t\treturn 'LASzip';\n\t\t\tcase 'application/vnd.laszip+copc': // https://github.com/copcio/copcio.github.io/issues/53\n\t\t\t\treturn short ? 'COPC' : 'Cloud-Optimized Point Cloud (LASzip)';\n\t\t\tcase 'application/vnd+zarr': // https://github.com/zarr-developers/zarr-specs/issues/123\n\t\t\t\treturn 'Zarr';\n\t\t\tcase 'application/x-parquet': // Unofficial\n\t\t\tcase 'application/vnd.apache.parquet': // Official (tbc): https://github.com/opengeospatial/geoparquet/issues/115\n\t\t\t\treturn 'Parquet'\n\t\t\tcase 'application/vnd.pmtiles':\n\t\t\t\treturn 'PMTiles';\n\t\t\tcase 'application/vnd.cov+json':\n\t\t\t\treturn 'CoverageJSON';\n\t\t\tcase 'application/vnd.flatgeobuf':\n\t\t\t\treturn 'FlatGeobuf'; // unofficial: https://github.com/flatgeobuf/flatgeobuf/discussions/112\n\t\t\tcase 'application/x-filegdb':\n\t\t\t\treturn short ? 'Geodatabase' : 'Esri File Geodatabase';\n\t\t\tcase 'application/vnd.nitf':\n\t\t\t\treturn short ? 'NITF' : 'National Imagery Transmission Format';\n\t\t\tcase 'application/3dtiles+json':\n\t\t\t\treturn '3D Tiles';\n\t\t\tdefault: {\n\t\t\t\tlet [group, format] = media.type.split('/');\n\t\t\t\tformat = _.formatKey(format.replace(/^(vnd|x)[.+-]/, ''));\n\t\t\t\tif (short) {\n\t\t\t\t\treturn format;\n\t\t\t\t}\n\t\t\t\tswitch(group) {\n\t\t\t\t\tcase 'audio':\n\t\t\t\t\t\treturn `${format} audio`;\n\t\t\t\t\tcase 'image':\n\t\t\t\t\t\treturn `${format} image`;\n\t\t\t\t\tcase 'font':\n\t\t\t\t\t\treturn `Font`;\n\t\t\t\t\tcase 'model':\n\t\t\t\t\t\treturn `${format} 3D model`;\n\t\t\t\t\tcase 'video':\n\t\t\t\t\t\treturn `${format} video`;\n\t\t\t\t\tcase 'text':\n\t\t\t\t\tcase 'application':\n\t\t\t\t\t\treturn format;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tformatTimestamp(value) {\n\t\tif (typeof value === 'string') {\n\t\t\ttry {\n\t\t\t\treturn I18N.dateTimeFormatter.format(new Date(value));\n\t\t\t} catch (error) {}\n\t\t}\n\t\treturn DataTypes.null();\n\t},\n\n\tformatPercent0to1(value, field, spec = {}) {\n\t\treturn DataTypes.number(value * 100, spec.unit);\n\t},\n\n\tformatDate(value) {\n\t\tif (typeof value === 'string') {\n\t\t\ttry {\n\t\t\t\treturn I18N.dateFormatter.format(new Date(value));\n\t\t\t} catch (error) {}\n\t\t}\n\t\treturn DataTypes.null();\n\t},\n\n\tformatDuration(value) {\n\t\tif (typeof value === 'string') {\n\t\t\tconst lib = Registry.getDependency('@musement/iso-duration');\n\t\t\tif (!lib) {\n\t\t\t\treturn _.e(value);\n\t\t\t}\n\t\t\tconst { isoDuration, en } = lib;\n\t\t\tisoDuration.setLocales({ en }, { fallbackLocale: 'en' });\n\t\t\tlet formatted = isoDuration(value).humanize('en');\n\t\t\tif (formatted.length === 0) {\n\t\t\t\treturn _.e(_.t('none'));\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn _.e(formatted);\n\t\t\t}\n\t\t}\n\t\treturn DataTypes.null();\n\t},\n\n\tformatLanguageCode(value) {\n\t\tif (Array.isArray(value)) {\n\t\t\treturn _.toList(value, true, Formatters.formatLanguageCode, false);\n\t\t}\n\t\telse if (typeof value !== 'string' || value.length < 2) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\n\t\tconst list = require('./languages.json');\n\t\tconst [code, ...rest] = value.split('-');\n\t\tif (code in list) {\n\t\t\tconst name = list[code];\n\t\t\tif (rest.length > 0) {\n\t\t\t\treturn _.e(_.t(`${name} (${rest.join(' ')})`));\n\t\t\t}\n\t\t\treturn _.e(_.t(name));\n\t\t}\n\t\treturn _.e(_.t(value));\n\t},\n\n\tformatLicense(value, field, spec = {}, context = null) {\n\t\tif (typeof value !== 'string' || value.length === 0) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\n\t\t// We could use the spdx-license-ids and/or spdx-to-html packages previously used in STAC Browser,\n\t\t// but let's try it without additional dependency for now.\n\t\tif (value !== 'other' && value !== 'proprietary' && value !== 'various' && value.match(/^[\\w\\.\\-]+$/i)) { // SPDX\n\t\t\treturn _.toLink(`https://spdx.org/licenses/${value}.html`, value, \"license\");\n\t\t}\n\t\t\n\t\tlet licenses = Array.isArray(context.links) ? context.links.filter(link => (_.isObject(link) && typeof link.href === 'string' && link.rel === 'license')) : [];\n\t\tif (licenses.length > 0) {\n\t\t\treturn _.toList(licenses, false, link => _.toLink(link.href, link.title || value, \"license\"));\n\t\t}\n\t\telse {\n\t\t\treturn DataTypes.string(value);\n\t\t}\n\t},\n\n\tformatProviders(value) {\n\t\treturn _.toList(value, false, provider => {\n\t\t\tlet name = provider.name;\n\t\t\tlet roles = '';\n\t\t\tlet description = '';\n\t\t\tif (typeof provider.url === 'string' && provider.url.length > 0) {\n\t\t\t\tname = _.toLink(provider.url, name);\n\t\t\t}\n\t\t\tif (Array.isArray(provider.roles) && provider.roles.length > 0) {\n\t\t\t\troles = provider.roles.map(r => DataTypes.format(r)).join(', ');\n\t\t\t\troles = ` (<em>${roles}</em>)`;\n\t\t\t}\n\t\t\tif (typeof provider.description === 'string' && provider.description.length > 0) {\n\t\t\t\tdescription = Formatters.formatCommonMark(provider.description);\n\t\t\t}\n\t\t\treturn `${name}${roles}${description}`;\n\t\t});\n\t},\n\n\tformatCommonMark(value) {\n\t\tif (typeof value !== 'string' || value.length === 0) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t\tconst commonmark = Registry.getDependency('commonmark');\n\t\tlet html;\n\t\tif (commonmark) {\n\t\t\tlet reader = new commonmark.Parser();\n\t\t\tlet writer = new commonmark.HtmlRenderer({safe: !Formatters.allowHtmlInCommonMark, smart: true});\n\t\t\thtml = writer.render(reader.parse(value));\n\t\t}\n\t\telse if (Formatters.allowHtmlInCommonMark) {\n\t\t\thtml = value;\n\t\t}\n\t\telse {\n\t\t\thtml = _.e(value);\n\t\t}\n\t\treturn `<div class=\"description\">${html}</div>`;\n\t},\n\n\tformatSoftware(value) {\n\t\tif (!_.isObject(value)) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\n\t\tlet list = [];\n\t\tfor(let software in value) {\n\t\t\tlet version = value[software];\n\t\t\tif ((typeof version === 'string' && version.length > 0) || typeof version === 'number') {\n\t\t\t\tlist.push(`${software} (${version})`);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlist.push(software);\n\t\t\t}\n\t\t}\n\t\treturn _.toList(list, true, null, false);\n\t},\n\n\tformatDOI(value) {\n\t\tvalue = DataTypes.format(value);\n\t\treturn _.toLink(`http://doi.org/${value}`, value);\n\t},\n\n\tformatCRS(value) {\n\t\treturn _.toList(value, false, value => {\n\t\t\tif (typeof value === 'string') {\n\t\t\t\tlet title = value\n\t\t\t\t\t.replace(/^https?:\\/\\/www\\.opengis\\.net\\/def\\/crs\\//i, '') // HTTP(s) URI\n\t\t\t\t\t.replace(/^urn:ogc:def:crs:/i, ''); // OGC URN\n\t\t\t\treturn _.toLink(value, title);\n\t\t\t}\n\t\t\treturn DataTypes.format(value);\n\t\t});\n\t},\n\n\tformatCrsCode(value) {\n\t\tif (typeof value === 'string') {\n\t\t\tconst [authority, code] = value.split(':', 2);\n\t\t\tswitch(authority.toUpperCase()) {\n\t\t\t\tcase 'EPSG':\n\t\t\t\tcase 'ESRI':\n\t\t\t\tcase 'IAU_2015':\n\t\t\t\tcase 'IGNF':\n\t\t\t\tcase 'MKG':\n\t\t\t\tcase 'OGC':\n\t\t\t\t\treturn _.toLink(`https://spatialreference.org/ref/${authority.toLowerCase()}/${code}/`, value);\n\t\t\t\tdefault:\n\t\t\t\t\treturn DataTypes.string(value);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn DataTypes.null();\n\t},\n\n\t/**\n\t * @deprecated Use formatCrsCode instead\n\t */\n\tformatEPSG(value) {\n\t\tif (typeof value === 'number') {\n\t\t\treturn Formatters.formatCrsCode(`EPSG:${value}`);\n\t\t}\n\t\telse if (typeof value === 'string') {\n\t\t\treturn Formatters.formatCrsCode(value);\n\t\t}\n\t\treturn DataTypes.null();\n\t},\n\n\tformatExtent(value, field, spec = {}) {\n\t\tif (!Array.isArray(value) || value.length < 2) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t\telse if (value[0] === value[1]) {\n\t\t\treturn DataTypes.format(value[0], spec.unit);\n\t\t}\n\t\telse if (value[0] === null) {\n\t\t\treturn `< ${DataTypes.format(value[1], spec.unit)}`;\n\t\t}\n\t\telse if (value[1] === null) {\n\t\t\treturn `> ${DataTypes.format(value[0], spec.unit)}`;\n\t\t}\n\t\telse {\n\t\t\treturn value.map(v => DataTypes.format(v, spec.unit)).join(' – ');\n\t\t}\n\t},\n\n\tformatHexColor(value) {\n\t\tif (typeof value !== 'string' || !value.match(/^#?[\\dA-F]{3,8}$/i)) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t\tif (value.startsWith('#')) {\n\t\t\tvalue = value.substring(1);\n\t\t}\n\t\treturn `<div class=\"color\" style=\"background-color: #${value}\"><code class=\"color-code\">#${value}</code></div>`;\n\t},\n\n\tformatPROJJSON(value) {\n\t\tif (!_.isObject(value)) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t\tif (_.isObject(value.id) && value.id.authority === 'EPSG' && typeof value.code === 'number' && value.code > 0) {\n\t\t\treturn 'EPSG ' + Formatters.formatEPSG(value);\n\t\t}\n\t\telse if (typeof value.name === 'string') {\n\t\t\treturn DataTypes.string(value.name);\n\t\t}\n\t\telse {\n\t\t\treturn DataTypes.object(value);\n\t\t}\n\t},\n\n\tformatTemporalExtent(value, field, spec = {}) {\t\n\t\tif (!Array.isArray(value) || value.length !== 2) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\n\t\tvalue = value.map(d => {\n\t\t\ttry {\n\t\t\t\treturn d ? new Date(d) : null;\n\t\t\t} catch(e) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\ttry {\n\t\t\tconst [start, end] = value;\n\t\t\tif (start || end) {\n\t\t\t\tconst base = spec.shorten ? I18N.dateFormatter : I18N.dateTimeFormatter;\n\t\t\t\tif (!start) {\n\t\t\t\t\treturn _.t(\"Until {0}\", [base.format(end)]);\n\t\t\t\t}\n\t\t\t\telse if (!end) {\n\t\t\t\t\treturn _.t(\"{0} until present\", [base.format(start)]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn base.formatRange(start, end);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {}\n\n\t\treturn DataTypes.null();\n\t},\n\n\tformatTemporalExtents(value, field, spec = {}) {\n\t\tlet sortExtents = (a,b) => {\n\t\t\tif (a[0] === null) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn I18N.collator.compare(a[0], b[0]);\n\t\t\t}\n\t\t};\n\t\treturn _.toList(value, sortExtents, v => Formatters.formatTemporalExtent(v, field, spec));\n\t},\n\n\tformatWKT2(value) {\n\t\tif (typeof value !== 'string') {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t\t\n\t\t// This is a VERY simplistic WKT2 formatter, which may fail to render properly in some cases.\n\t\tlet indent = -1;\n\t\tlet formatted;\n\t\ttry {\n\t\t\tformatted = value.replace(/([A-Z]+)\\[|\\]/ig, (match, keyword) => {\n\t\t\t\tif (match === ']') {\n\t\t\t\t\tindent--;\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tindent++;\n\t\t\t\t\tlet tabs = \"  \".repeat(indent);\n\t\t\t\t\treturn `\\n${tabs}${keyword}[`;\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {\n\t\t\t// In case the formatting did not work properly\n\t\t\t// (usually the number of [ and ] doesn't match)\n\t\t\t// just return the unformatted value\n\t\t\tformatted = value;\n\t\t\t\n\t\t}\n\n\t\treturn `<pre>${formatted}</pre>`;\n\t},\n\n\tfileSizeUnits: ['B', 'kB', 'MB', 'GB', 'TB'],\n\n\tformatFileSize(value) {\n\t\tif (typeof value !== 'number') {\n\t\t\treturn DataTypes.format(value);\n\t\t}\n\t\tvar i = value == 0 ? 0 : Math.floor( Math.log(value) / Math.log(1024) );\n\t\treturn _.unit(( value / Math.pow(1024, i) ).toFixed(2) * 1, Formatters.fileSizeUnits[i]);\n\t},\n\n\tformatChecksum(value) {\n\t\tif (typeof value !== 'string') {\n\t\t\treturn DataTypes.null();\n\t\t}\n\n\t\tconst multihash = Registry.getDependency('multihashes');\n\t\tif (!multihash) {\n\t\t\treturn _.e(value);\n\t\t}\n\n\t\ttry {\n\t\t\tconst meta = multihash.decode(_.hexToUint8(value));\n\t\t\tconst name = _.e(meta.name);\n\t\t\tconst hex = _.e(_.uint8ToHex(meta.digest));\n\t\t\treturn `<div class=\"checksum\"><input class=\"checksum-input\" size=\"32\" value=\"${hex}\" readonly><br><span class=\"checksum-algo\">${_.t('Hashing algorithm:')} <strong>${name}</strong></span></div>`;\n\t\t} catch (error) {\n\t\t\treturn DataTypes.null();\n\t\t}\n\t},\n\n\tfileDataTypes: {\n\t\t\"int8\": \"8-bit integer\",\n\t\t\"int16\": \"16-bit integer\",\n\t\t\"int32\": \"32-bit integer\",\n\t\t\"int64\": \"64-bit integer\",\n\t\t\"uint8\": \"unsigned 8-bit integer\",\n\t\t\"uint16\": \"unsigned 16-bit integer\",\n\t\t\"uint32\": \"unsigned 32-bit integer\",\n\t\t\"uint64\": \"unsigned 64-bit integer\",\n\t\t\"float16\": \"16-bit float\",\n\t\t\"float32\": \"32-bit float\",\n\t\t\"float64\": \"64-bit float\",\n\t\t\"cint16\": \"16-bit complex integer\",\n\t\t\"cint32\": \"32-bit complex integer\",\n\t\t\"cfloat32\": \"32-bit complex float\",\n\t\t\"cfloat64\": \"64-bit complex float\"\n\t},\n\n\tformatFileDataType(value) {\n\t\tif (value === \"other\") {\n\t\t\treturn _.t(\"non-standard\");\n\t\t}\n\t\telse if (typeof value === 'string' && value in Formatters.fileDataTypes) {\n\t\t\treturn _.abbrev(_.t(value), _.t(Formatters.fileDataTypes[value]));\n\t\t}\n\n\t\treturn DataTypes.null();\n\t},\n\n\tformatTransform(value) {\n\t\tif (Array.isArray(value) && value.length % 3 === 0) {\n\t\t\tlet rows = [];\n\t\t\tfor (let i = 0; i < value.length; i = i+3) {\n\t\t\t\tlet chunk = value.slice(i, i + 3);\n\t\t\t\trows.push(`[${Formatters.formatCSV(chunk)}]`);\n\t\t\t}\n\t\t\treturn rows.join('<br>');\n\t\t}\n\t\telse {\n\t\t\treturn Formatters.formatCSV(value);\n\t\t}\n\t},\n\n\tformatShape(value, field, spec = {}) {\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(x => DataTypes.format(x, spec.unit)).join(' × ');\n\t\t}\n\t\telse {\n\t\t\treturn DataTypes.format(value, spec.unit);\n\t\t}\n\t},\n\n\tformatCSV(value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tlet numeric = value.find(v => typeof v === 'number') !== undefined;\n\t\t\t// If there's potentially a comma in the values (decimal or thousand separators in numbers), use semicolon instead of comma.\n\t\t\treturn value.map(DataTypes.format).join(numeric ? '; ' : ', ');\n\t\t}\n\t\telse {\n\t\t\treturn DataTypes.format(value);\n\t\t}\n\t},\n\n\tformatImage(value, field) { // from url or link\n\t\tlet title = \"\";\n\t\tlet src = null;\n\t\tif (_.isObject(value)) {\n\t\t\tsrc = value.href;\n\t\t\ttitle = value.title || \"\";\n\t\t}\n\t\telse if (typeof value === 'string') {\n\t\t\tsrc = value;\n\t\t}\n\t\telse {\n\t\t\treturn DataTypes.format(src);\n\t\t}\n\n\t\treturn `<img src=\"${_.e(src)}\" title=\"${_.e(title)}\" class=\"${_.e(field.replace(':', '_'))}\">`;\n\t},\n\n\tformatPhone(value) {\n\t\treturn _.toLink(`tel:${value}`, value);\n\t},\n\n\tformatEmail(value) {\n\t\treturn _.toLink(`mailto:${value}`, value);\n\t},\n\n\tformatConcepts(value) {\n\t\treturn _.toList(value, false, concept => {\n\t\t\tif (!_.isObject(concept)) {\n\t\t\t\treturn DataTypes.format(concept);\n\t\t\t}\n\n\t\t\tlet html = \"\";\n\t\t\tif (concept.title) {\n\t\t\t\tlet title = concept.title;\n\t\t\t\tif (concept.url) {\n\t\t\t\t\ttitle = _.toLink(concept.url, concept.title);\n\t\t\t\t}\n\t\t\t\thtml += `<strong>${title}</strong> (<code>${_.e(concept.id)}</code>)`;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet title = concept.id;\n\t\t\t\tif (concept.url) {\n\t\t\t\t\ttitle = _.toLink(concept.url, concept.id);\n\t\t\t\t}\n\t\t\t\thtml += `<strong><code>${title}</code></strong>`;\n\t\t\t}\n\t\t\tif (concept.description) {\n\t\t\t\thtml += `<br><small>${_.e(concept.description)}</small>`;\n\t\t\t}\n\t\t\treturn html;\n\t\t});\n\t},\n\n\tformatAddress(value) { // array or object\n\t\treturn _.toList(value, false, address => {\n\t\t\tif (!_.isObject(address)) {\n\t\t\t\treturn DataTypes.format(address);\n\t\t\t}\n\n\t\t\tlet lines = Array.isArray(address.deliveryPoint) ? address.deliveryPoint.slice(0) : [];\n\n\t\t\tif (address.postalCode && address.city) {\n\t\t\t\t// Try to create a compact address\n\t\t\t\tlet line = `${address.postalCode} ${address.city}`;\n\t\t\t\tif (address.administrativeArea) {\n\t\t\t\t\tline += ` (${address.administrativeArea})`;\n\t\t\t\t}\n\t\t\t\tif (typeof address.country === 'string' && address.country.length > 0) {\n\t\t\t\t\tif (address.country.length === 2 && address.country.toUpperCase() === address.country) { // is ISO code\n\t\t\t\t\t\tline = address.country + '-' + line;\n\t\t\t\t\t\tlines.push(line);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tlines.push(line);\n\t\t\t\t\t\tlines.push(address.country.toUpperCase());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Long version of the address\n\t\t\t\tif (address.city) {\n\t\t\t\t\tlines.push(address.city);\n\t\t\t\t}\n\t\t\t\tif (address.administrativeArea) {\n\t\t\t\t\tlines.push(address.administrativeArea);\n\t\t\t\t}\n\t\t\t\tif (address.postalCode) {\n\t\t\t\t\tlines.push(address.postalCode);\n\t\t\t\t}\n\t\t\t\tif (typeof address.country === 'string' && address.country.length > 0) {\n\t\t\t\t\tlines.push(address.country.toUpperCase());\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn DataTypes.string(lines.join(\"\\n\\n\"));\n\t\t});\n\t},\n\n\tformatGridCode(value) {\n\t\tif (typeof value !== 'string') {\n\t\t\treturn DataTypes.format(value);\n\t\t}\n\n\t\tlet splitHalf = function(parts, value, labelA, labelB) {\n\t\t\tlet len = value.length;\n\t\t\tif ((len % 2) === 1) {\n\t\t\t\tparts.push(`Code: ${value}`);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet mid = len/2;\n\t\t\t\tlet a = value.substring(0, mid);\n\t\t\t\tparts.push(`${labelA}: ${a}`);\n\t\t\t\tlet b = value.substring(mid, len);\n\t\t\t\tparts.push(`${labelB}: ${b}`);\n\t\t\t}\n\t\t};\n\n\t\tlet [designator, code] = value.split(/-(.*)/);\n\t\tlet parts = [];\n\t\tswitch(designator) {\n\t\t\tcase 'MGRS': \n\t\t\t\tparts.push(_.abbrev(_.t(designator), _.t('Military Grid Reference System')));\n\t\t\t\tlet [, utm, band, sq, coord] = code.match(/^(\\d{2})([C-X])([A-Z]{2})(\\d*)$/);\n\t\t\t\tparts.push(`${_.t(\"UTM Zone\")}: ${utm}`);\n\t\t\t\tparts.push(`${_.t(\"Latitude Band\")}: ${band}`);\n\t\t\t\tparts.push(`${_.t(\"Square Identifier\")}: ${sq}`);\n\t\t\t\tif (coord) {\n\t\t\t\t\tsplitHalf(parts, coord, _.t(\"Easting\"), _.t(\"Northing\"));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'MSIN':\n\t\t\t\tparts.push(_.t('MODIS Sinusoidal Tile Grid'));\n\t\t\t\tsplitHalf(parts, code, _.t('Horizontal'), _.t('Vertical'));\n\t\t\t\tbreak;\n\t\t\tcase 'WRS1':\n\t\t\tcase 'WRS2':\n\t\t\t\tlet version = designator.substring(3,4);\n\t\t\t\tparts.push(_.abbrev(_.t('WRS-' + version), _.t('Worldwide Reference System ' + version)));\n\t\t\t\tsplitHalf(parts, code, _.t('Path'), _.t('Row'));\n\t\t\t\tbreak;\n\t\t\tcase 'DOQ':\n\t\t\t\tparts.push(_abbrev(_.t(designator), _.t('Digital Orthophoto Quadrangle')));\n\t\t\t\tparts.push(`${_.t(\"Quadrangle\")}: ${code}`);\n\t\t\t\tbreak;\n\t\t\tcase 'DOQQ':\n\t\t\t\tparts.push(_abbrev(_.t(designator), _.t('Digital Orthophoto Quarter Quadrangle')));\n\t\t\t\tlet quad = code.substr(0, code.length - 2);\n\t\t\t\tparts.push(`${_.t(\"Quadrangle\")}: ${quad}`);\n\t\t\t\tlet quarter = code.substr(-2);\n\t\t\t\tlet a = quarter[0] === 'N' ? _.t('North') : _.t('South');\n\t\t\t\tlet b = quarter[1] === 'E' ? _.t('East') : _.t('West');\n\t\t\t\tparts.push(`${_.t(\"Quarter\")}: ${a} ${b}`);\n\t\t\t\tbreak;\n\t\t\tcase 'MXRA':\n\t\t\t\tparts.push(_.t('Maxar ARD Tile Grid'));\n\t\t\t\tlet [zone, quadkey] = code.split(/-(.*)/);\n\t\t\t\tif (zone.startsWith('Z')) {\n\t\t\t\t\tzone = zone.substring(1);\n\t\t\t\t}\n\t\t\t\tparts.push(`${_.t(\"UTM Zone\")}: ${zone}`);\n\t\t\t\tparts.push(`${_.t(\"Quadkey\")}: ${quadkey}`);\n\t\t\t\tbreak;\n\t\t\tcase 'EASE':\n\t\t\t\tlet [dggs, components] = code.split('-');\n\t\t\t\tif (dggs === 'DGGS') {\n\t\t\t\t\tparts.push(_.t('EASE-DGGS'));\n\t\t\t\t\tlet [level, rowcol, ...fractions] = components.split('.');\n\t\t\t\t\tparts.push(`${_.t(\"Level\")}: ${level}`);\n\t\t\t\t\tif (rowcol.length === 6) {\n\t\t\t\t\t\tparts.push(`${_.t(\"Level 0 row cell\")}: ${rowcol.substring(0,3)}`);\n\t\t\t\t\t\tparts.push(`${_.t(\"Level 0 column cell\")}: ${rowcol.substring(3,6)}`);\n\t\t\t\t\t\tfor(let i in fractions) {\n\t\t\t\t\t\t\tlet value = fractions[i];\n\t\t\t\t\t\t\tif (value.length === 2) {\n\t\t\t\t\t\t\t\tparts.push(`${_.t(\"Fraction of level {i} row cell\", {i})}: ${value[0]}`);\n\t\t\t\t\t\t\t\tparts.push(`${_.t(\"Fraction of level {i} column cell\", {i})}: ${value[1]}`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 'CDEM':\n\t\t\t\tlet [, n, e] = code.match(/^([A-Z]\\d+)([A-Z]\\d+)$/);\n\t\t\t\tparts.push(_.t(\"Copernicus Digital Elevation Model Grid\"));\n\t\t\t\tparts.push(`${_.t(\"Easting\")}: ${e}`);\n\t\t\t\tparts.push(`${_.t(\"Northing\")}: ${n}`);\n\t\t\tdefault:\n\t\t\t\tparts.push(value);\n\t\t}\n\n\t\treturn parts.join('<br>');\n\t}\n\n};\n\nmodule.exports = Formatters;","/*!\n * content-type\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * RegExp to match *( \";\" parameter ) in RFC 7231 sec 3.1.1.1\n *\n * parameter     = token \"=\" ( token / quoted-string )\n * token         = 1*tchar\n * tchar         = \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" / \"*\"\n *               / \"+\" / \"-\" / \".\" / \"^\" / \"_\" / \"`\" / \"|\" / \"~\"\n *               / DIGIT / ALPHA\n *               ; any VCHAR, except delimiters\n * quoted-string = DQUOTE *( qdtext / quoted-pair ) DQUOTE\n * qdtext        = HTAB / SP / %x21 / %x23-5B / %x5D-7E / obs-text\n * obs-text      = %x80-FF\n * quoted-pair   = \"\\\" ( HTAB / SP / VCHAR / obs-text )\n */\nvar PARAM_REGEXP = /; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *(\"(?:[\\u000b\\u0020\\u0021\\u0023-\\u005b\\u005d-\\u007e\\u0080-\\u00ff]|\\\\[\\u000b\\u0020-\\u00ff])*\"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g // eslint-disable-line no-control-regex\nvar TEXT_REGEXP = /^[\\u000b\\u0020-\\u007e\\u0080-\\u00ff]+$/ // eslint-disable-line no-control-regex\nvar TOKEN_REGEXP = /^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/\n\n/**\n * RegExp to match quoted-pair in RFC 7230 sec 3.2.6\n *\n * quoted-pair = \"\\\" ( HTAB / SP / VCHAR / obs-text )\n * obs-text    = %x80-FF\n */\nvar QESC_REGEXP = /\\\\([\\u000b\\u0020-\\u00ff])/g // eslint-disable-line no-control-regex\n\n/**\n * RegExp to match chars that must be quoted-pair in RFC 7230 sec 3.2.6\n */\nvar QUOTE_REGEXP = /([\\\\\"])/g\n\n/**\n * RegExp to match type in RFC 7231 sec 3.1.1.1\n *\n * media-type = type \"/\" subtype\n * type       = token\n * subtype    = token\n */\nvar TYPE_REGEXP = /^[!#$%&'*+.^_`|~0-9A-Za-z-]+\\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/\n\n/**\n * Module exports.\n * @public\n */\n\nexports.format = format\nexports.parse = parse\n\n/**\n * Format object to media type.\n *\n * @param {object} obj\n * @return {string}\n * @public\n */\n\nfunction format (obj) {\n  if (!obj || typeof obj !== 'object') {\n    throw new TypeError('argument obj is required')\n  }\n\n  var parameters = obj.parameters\n  var type = obj.type\n\n  if (!type || !TYPE_REGEXP.test(type)) {\n    throw new TypeError('invalid type')\n  }\n\n  var string = type\n\n  // append parameters\n  if (parameters && typeof parameters === 'object') {\n    var param\n    var params = Object.keys(parameters).sort()\n\n    for (var i = 0; i < params.length; i++) {\n      param = params[i]\n\n      if (!TOKEN_REGEXP.test(param)) {\n        throw new TypeError('invalid parameter name')\n      }\n\n      string += '; ' + param + '=' + qstring(parameters[param])\n    }\n  }\n\n  return string\n}\n\n/**\n * Parse media type to object.\n *\n * @param {string|object} string\n * @return {Object}\n * @public\n */\n\nfunction parse (string) {\n  if (!string) {\n    throw new TypeError('argument string is required')\n  }\n\n  // support req/res-like objects as argument\n  var header = typeof string === 'object'\n    ? getcontenttype(string)\n    : string\n\n  if (typeof header !== 'string') {\n    throw new TypeError('argument string is required to be a string')\n  }\n\n  var index = header.indexOf(';')\n  var type = index !== -1\n    ? header.slice(0, index).trim()\n    : header.trim()\n\n  if (!TYPE_REGEXP.test(type)) {\n    throw new TypeError('invalid media type')\n  }\n\n  var obj = new ContentType(type.toLowerCase())\n\n  // parse parameters\n  if (index !== -1) {\n    var key\n    var match\n    var value\n\n    PARAM_REGEXP.lastIndex = index\n\n    while ((match = PARAM_REGEXP.exec(header))) {\n      if (match.index !== index) {\n        throw new TypeError('invalid parameter format')\n      }\n\n      index += match[0].length\n      key = match[1].toLowerCase()\n      value = match[2]\n\n      if (value.charCodeAt(0) === 0x22 /* \" */) {\n        // remove quotes\n        value = value.slice(1, -1)\n\n        // remove escapes\n        if (value.indexOf('\\\\') !== -1) {\n          value = value.replace(QESC_REGEXP, '$1')\n        }\n      }\n\n      obj.parameters[key] = value\n    }\n\n    if (index !== header.length) {\n      throw new TypeError('invalid parameter format')\n    }\n  }\n\n  return obj\n}\n\n/**\n * Get content-type from req/res objects.\n *\n * @param {object}\n * @return {Object}\n * @private\n */\n\nfunction getcontenttype (obj) {\n  var header\n\n  if (typeof obj.getHeader === 'function') {\n    // res-like\n    header = obj.getHeader('content-type')\n  } else if (typeof obj.headers === 'object') {\n    // req-like\n    header = obj.headers && obj.headers['content-type']\n  }\n\n  if (typeof header !== 'string') {\n    throw new TypeError('content-type header is missing from object')\n  }\n\n  return header\n}\n\n/**\n * Quote a string if necessary.\n *\n * @param {string} val\n * @return {string}\n * @private\n */\n\nfunction qstring (val) {\n  var str = String(val)\n\n  // no need to quote tokens\n  if (TOKEN_REGEXP.test(str)) {\n    return str\n  }\n\n  if (str.length > 0 && !TEXT_REGEXP.test(str)) {\n    throw new TypeError('invalid parameter value')\n  }\n\n  return '\"' + str.replace(QUOTE_REGEXP, '\\\\$1') + '\"'\n}\n\n/**\n * Class to represent a content type.\n * @private\n */\nfunction ContentType (type) {\n  this.parameters = Object.create(null)\n  this.type = type\n}\n","import { mapState } from 'vuex';\n\nimport Registry from '@radiantearth/stac-fields/registry';\nimport contentType from 'content-type';\nRegistry.addDependency('content-type', contentType);\n\nexport default functions => {\n  let mixin = {\n    computed: {\n      ...mapState(['uiLanguage'])\n    },\n    methods: {}\n  };\n  for(let name in functions) {\n    let fn = functions[name];\n    mixin.methods[name] = function() {\n      // We call uiLanguage once so that it's a dependency for the computed property\n      // which makes the computed property to re-render when uiLanguage changes.\n      this.uiLanguage;\n      return fn(...arguments);\n    };\n  }\n  return mixin;\n};\n"],"names":["_","require$$0","I18N","require$$1","Normalize","fields","parts","part","key","spec","allFields","aliasedSpec","itemOrder","i1","i2","item","normalize","Registry","name","library","prefix","field","specs","type","registry","DataTypes","require$$2","require$$3","Formatters","value","context","parent","title","short","mediaType","media","error","group","format","lib","isoDuration","en","formatted","list","require$$4","code","rest","licenses","link","provider","roles","description","r","commonmark","html","reader","software","version","authority","v","d","start","end","base","sortExtents","a","b","indent","match","keyword","i","multihash","meta","rows","chunk","x","numeric","src","concept","address","lines","line","splitHalf","labelA","labelB","len","mid","designator","utm","band","sq","coord","quad","quarter","zone","quadkey","dggs","components","level","rowcol","fractions","n","e","formatters","PARAM_REGEXP","TEXT_REGEXP","TOKEN_REGEXP","QESC_REGEXP","QUOTE_REGEXP","TYPE_REGEXP","contentType","parse","obj","parameters","string","param","params","qstring","header","getcontenttype","index","ContentType","val","str","StacFieldsMixin","functions","mixin","mapState","fn"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}