import{N as O,d as ae,m as X,e as le,f as te,aR as oe,h as Y,i as re,cc as se,r as A,g as Z,c as p,j as fe,bv as ce,w as M,v as R,x as y,y as _,A as S,z as Q,C as ie,B as u,K as ee,aQ as pe,s as me,bE as be,ak as Ie,$ as z,P as ye,E as G,bF as Ce,H as E,G as H,av as ge,F as I,cd as c,L as ke,M as xe,a2 as T,at as Be}from"./index-DLQIbJqc.js";function ne(C){return C.map(x=>x.type===O?ne(x.children):x).flat()}const Te=ae({inheritAttrs:!1,__name:"BTab",props:X({buttonId:{default:void 0},disabled:{type:Boolean,default:!1},id:{default:void 0},lazy:{type:Boolean,default:void 0},unmountLazy:{type:Boolean,default:void 0},noBody:{type:Boolean,default:!1},tag:{default:"div"},title:{default:void 0},titleItemClass:{default:void 0},titleLinkAttrs:{default:void 0},titleLinkClass:{default:void 0}},{active:{type:Boolean,default:!1},activeModifiers:{}}),emits:["update:active"],setup(C,{expose:x}){const a=le(C,"BTab"),U=te(),F=oe(),n=Y(C,"active"),d=re(se,null),B=A(a.id),o=Z("","tabpane"),b=p(()=>a.id??B.value??o.value),L=Z(()=>a.buttonId,"tab"),g=A(!1),j=fe("_el"),s=p(()=>{const{onClick:r,...D}=F;return D});function h(){if(!d)return;const r=d.registerTab(p(()=>({internalId:o.value,id:b.value,active:n.value,buttonId:L.value,disabled:a.disabled,title:a.title,titleComponent:U.title,titleItemClass:a.titleItemClass,titleLinkAttrs:a.titleLinkAttrs,titleLinkClass:a.titleLinkClass,onClick:F.onClick,el:j})));r!==B.value&&(B.value=r)}d&&(h(),n.value&&d.activateTab(o.value)),ce(()=>{d&&d.unregisterTab(o.value)});const m=p(()=>d?.activeId.value===b.value),k=A(m.value),$=p(()=>!!(d?.lazy.value||a.lazy)),V=p(()=>m.value&&!a.disabled),P=p(()=>V.value||!$.value||$.value&&!a.unmountLazy&&g.value);M(P,r=>{r&&!g.value&&(g.value=!0)}),M(m,r=>{if(r){n.value=!0,setTimeout(()=>{k.value=!0},0);return}k.value=!1,n.value=!1}),M(n,r=>{if(a.disabled){n.value=!1;return}if(d){if(!r){m.value&&d.activateTab(void 0);return}m.value||d.activateTab(o.value)}});const q=p(()=>[{active:m.value,show:k.value,"card-body":d?.card.value&&a.noBody===!1,fade:!d?.noFade.value},k.value?d?.activeTabClass.value:d?.inactiveTabClass.value,d?.tabClass.value]);return x({activate:()=>{n.value=!0},deactivate:()=>{n.value=!1}}),(r,D)=>(y(),R(ee(u(a).tag),ie({id:b.value,ref:"_el",class:["tab-pane",q.value],role:"tabpanel","aria-labelledby":u(L)},s.value),{default:_(()=>[P.value?S(r.$slots,"default",{key:0}):Q("",!0)]),_:3},16,["id","class","aria-labelledby"]))}}),Ae=["aria-orientation"],Le=["id","aria-controls","aria-selected","disabled","tabindex","onClick"],Ne=ae({__name:"BTabs",props:X({activeNavItemClass:{default:void 0},activeTabClass:{default:void 0},align:{default:void 0},card:{type:Boolean,default:!1},contentClass:{default:void 0},end:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},id:{default:void 0},index:{},inactiveNavItemClass:{default:void 0},inactiveTabClass:{default:void 0},justified:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},navClass:{default:void 0},navItemClass:{default:void 0},navWrapperClass:{default:void 0},noFade:{type:Boolean,default:!1},noKeyNav:{type:Boolean,default:!1},noNavStyle:{type:Boolean,default:!1},pills:{type:Boolean,default:!1},small:{type:Boolean,default:!1},tag:{default:"div"},tabClass:{default:void 0},underline:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1}},{index:{default:-1},indexModifiers:{},modelValue:{default:void 0},modelModifiers:{}}),emits:X(["activate-tab"],["update:index","update:modelValue"]),setup(C,{emit:x}){const a=le(C,"BTabs"),U=x,F=te(),n=Y(C,"index"),d=Y(C,"modelValue"),B=Ce(),o=A([]),b=A([]),L=A(!1),g=A([]),j=()=>{const l=ne(F.default?.({})??[]);b.value=(Array.isArray(l)?l:[l]).filter(e=>e.type===Te),g.value.length===0&&(g.value=b.value.map(e=>u(Z(()=>e.props?.id,"tabpane")))),L.value=b.value.some(e=>e.props?.active!==void 0&&e.props?.active!==!1)};j(),M(()=>F.default?.({}),()=>{j(),T(()=>{W()})});const s=p(()=>{if(o.value.length===0){const l=b.value.findIndex(e=>e.props?.active!==void 0&&(e.props.disabled===!1||e.props.disabled===void 0)||d.value&&e.props?.id===d.value);return b.value.map((e,t)=>{const v=l!==-1?t===l:n.value>-1?t===n.value:t===0;return{id:e.props?.id??g.value[t],internalId:`premount-${t}`,buttonId:e.props?.buttonId,disabled:e.props?.disabled,title:e.props?.title,titleComponent:e.children?.title,titleItemClass:e.props?.titleItemClass,titleLinkAttrs:e.props?.titleLinkAttrs,titleLinkClass:e.props?.titleLinkClass,onClick:e.props?.onClick,active:v,navItemClasses:[{active:v,disabled:!(e.props?.disabled===!1||e.props?.disabled===void 0)},v?a.activeNavItemClass:a.inactiveNavItemClass,a.navItemClass]}})}return o.value.map(l=>{const e=u(l),t=e.id===d.value;return{...e,active:t,navItemClasses:[{active:t,disabled:e.disabled},t?a.activeNavItemClass:a.inactiveNavItemClass,a.navItemClass]}})});let h=!1,m=!1,k=!1;n.value===-1&&d.value?s.value.findIndex(l=>l.id===d.value)!==-1?n.value=s.value.findIndex(l=>l.id===d.value):m=!0:n.value>-1&&!d.value?s.value[n.value]?.id?d.value=s.value[n.value]?.id:k=!0:n.value===-1&&!d.value&&!L.value?(n.value=s.value.findIndex(l=>l.disabled===void 0||l.disabled===!1),d.value=s.value[n.value]?.id):n.value===-1&&!d.value&&L.value&&(n.value=s.value.findIndex(l=>l.active!==void 0&&l.active!==!1&&(l.disabled===void 0||l.disabled===!1)),d.value=s.value[n.value]?.id);function $(){if(m){const l=s.value.findIndex(e=>e.id===d.value);l!==-1&&T(()=>{n.value=l,m=!1})}k&&n.value>-1&&s.value[n.value]?.id&&T(()=>{d.value=s.value[n.value]?.id,k=!1})}$();const V=p(()=>!(s?.value&&s.value.length>0)),P=p(()=>({"d-flex":a.vertical,"align-items-start":a.vertical})),q=pe(()=>a.align),r=p(()=>({"nav-pills":a.pills,"nav-underline":a.underline,"flex-column me-3":a.vertical,[q.value]:a.align!==void 0,"nav-fill":a.fill,"card-header-tabs":a.card&&!a.pills&&!a.underline,"card-header-pills":a.card&&a.pills,"nav-justified":a.justified,"nav-tabs":!a.noNavStyle&&!a.pills&&!a.underline,small:a.small})),D=(l,e)=>{if(e>=0&&!s.value[e].disabled&&s.value[e]?.onClick&&typeof s.value[e].onClick=="function"&&(s.value[e].onClick?.(l),l.defaultPrevented)){document.getElementById(s.value[e].buttonId)?.blur();return}n.value=e},f=(l,e)=>{s.value.length<=0||a.noKeyNav||(l.preventDefault(),l.stopPropagation(),n.value=N(n.value+e,e),T(()=>{n.value>=0&&document.getElementById(s.value[n.value]?.buttonId)?.focus()}))},N=(l,e)=>{let t=l,v=-1,i=-1;for(let K=0;K<s.value.length;K++)s.value[K].disabled||(v===-1&&(v=K),i=K);for(;t>=v&&t<=i&&s.value[t].disabled;)t+=e;return t<v&&(t=v),t>i&&(t=i),t};let w,J=!1;M(n,(l,e)=>{if(s.value.length<=0||s.value.filter(i=>!i.disabled).length<=0)return;if(J){J=!1;return}const t=N(l,l>e?1:-1);if(t!==l){w=e,n.value=t;return}const v=new Be("activate-tab",{cancelable:!0});if(U("activate-tab",s.value[t]?.id,s.value[w??e]?.id,t,w??e,v),v.defaultPrevented){J=!0;const i=w??e??N(0,1);w=void 0,d.value!==s.value[i]?.id&&(d.value=s.value[i]?.id),T(()=>{i>=0&&document.getElementById(s.value[i]?.buttonId)?.focus()});return}d.value!==s.value[t]?.id&&(d.value=s.value[t]?.id),w=void 0}),M(d,(l,e)=>{if(s.value.length<=0||s.value.filter(i=>!i.disabled).length<=0)return;const t=s.value.findIndex(i=>i.id===l);if(t===n.value)return;const v=s.value.findIndex(i=>i.id===e);if(s.value[t]?.disabled){n.value=N(t,t>v?1:-1);return}if(t===-1){n.value=N(0,1),T(()=>{d.value=s.value[n.value]?.id});return}n.value=t});const ue=l=>{const e=o.value.findIndex(v=>v.value.internalId===l.value.internalId);e===-1?(o.value.push(l),h&&T(()=>{W()})):(o.value[e]=l,h&&W());const t=o.value.findIndex(v=>v.value.internalId===l.value.internalId);return l.value.id??(h?l.value.internalId:g.value[t])};me(()=>{$(),W(),h=!0});const W=()=>{o.value.sort((l,e)=>be(l.value.el.value,e.value.el.value)),d.value&&n.value!==s.value.findIndex(l=>l.id===d.value)&&(n.value=s.value.findIndex(l=>l.id===d.value))},ve=l=>{o.value=o.value.filter(e=>e.value.internalId!==l)};return Ie(se,{lazy:z(()=>a.lazy),card:z(()=>a.card),noFade:z(()=>a.noFade),activeTabClass:z(()=>a.activeTabClass),inactiveTabClass:z(()=>a.inactiveTabClass),tabClass:z(()=>a.tabClass),registerTab:ue,unregisterTab:ve,activeId:d,activateTab:l=>{const e=s.value.findIndex(t=>t.internalId===l);if(l===void 0||e===-1){n.value=N(0,1);return}n.value=e}}),(l,e)=>(y(),R(ee(u(a).tag),{id:u(a).id,class:E(["tabs",P.value])},{default:_(()=>[ye(u(B).define,null,{default:_(()=>[G("div",{class:E(["tab-content",u(a).contentClass])},[S(l.$slots,"default"),V.value?(y(),H("div",{key:"bv-empty-tab",class:E(["tab-pane active",{"card-body":u(a).card}])},[S(l.$slots,"empty")],2)):Q("",!0)],2)]),_:3}),u(a).end?(y(),R(u(B).reuse,{key:0})):Q("",!0),G("div",{class:E([u(a).navWrapperClass,{"card-header":u(a).card,"ms-auto":l.vertical&&u(a).end}])},[G("ul",{class:E(["nav",[r.value,u(a).navClass]]),role:"tablist","aria-orientation":u(a).vertical?"vertical":"horizontal"},[S(l.$slots,"tabs-start"),(y(!0),H(O,null,ge(s.value,(t,v)=>(y(),H("li",{key:t.id??t.internalId,class:E(["nav-item",t.titleItemClass]),role:"presentation"},[G("button",ie({id:t.buttonId,class:["nav-link",[t.navItemClasses,t.titleLinkClass]],role:"tab","aria-controls":t.id,"aria-selected":t.active,disabled:t.disabled,tabindex:u(a).noKeyNav||t.active?void 0:-1,type:"button"},{ref_for:!0},t.titleLinkAttrs,{onKeydown:[e[0]||(e[0]=c(I(i=>!u(a).vertical&&f(i,-1),["exact"]),["left"])),e[1]||(e[1]=c(I(i=>!u(a).vertical&&f(i,-999),["shift"]),["left"])),e[2]||(e[2]=c(I(i=>u(a).vertical&&f(i,-1),["exact"]),["up"])),e[3]||(e[3]=c(I(i=>u(a).vertical&&f(i,-999),["shift"]),["up"])),e[4]||(e[4]=c(I(i=>!u(a).vertical&&f(i,1),["exact"]),["right"])),e[5]||(e[5]=c(I(i=>!u(a).vertical&&f(i,999),["shift"]),["right"])),e[6]||(e[6]=c(I(i=>u(a).vertical&&f(i,1),["exact"]),["down"])),e[7]||(e[7]=c(I(i=>u(a).vertical&&f(i,999),["shift"]),["down"])),e[8]||(e[8]=c(i=>f(i,-999),["page-up"])),e[9]||(e[9]=c(i=>f(i,999),["page-down"])),e[10]||(e[10]=c(i=>f(i,-999),["home"])),e[11]||(e[11]=c(i=>f(i,999),["end"]))],onClick:I(i=>D(i,v),["stop"])}),[t.titleComponent?(y(),R(ee(t.titleComponent),{key:0})):(y(),H(O,{key:1},[ke(xe(t.title),1)],64))],16,Le)],2))),128)),S(l.$slots,"tabs-end")],10,Ae)],2),u(a).end?Q("",!0):(y(),R(u(B).reuse,{key:1}))]),_:3},8,["id","class"]))}});export{Ne as _,Te as a,ne as f};
//# sourceMappingURL=BTabs.vue_vue_type_script_setup_true_lang-DJniJmO4-DqkkB-SW.js.map
